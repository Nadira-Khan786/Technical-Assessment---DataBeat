{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nrequire(\"core-js/modules/es.reflect.construct.js\");\nrequire(\"core-js/modules/es.reflect.get.js\");\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.symbol.js\");\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\nrequire(\"core-js/modules/es.symbol.description.js\");\nrequire(\"core-js/modules/es.symbol.iterator.js\");\nrequire(\"core-js/modules/es.array.iterator.js\");\nrequire(\"core-js/modules/es.string.iterator.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nrequire(\"core-js/modules/es.array.from.js\");\nrequire(\"core-js/modules/es.array.slice.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.AddressComponentMode = void 0;\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.regexp.exec.js\");\nrequire(\"core-js/modules/es.string.search.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\nvar _autocompleter = _interopRequireDefault(require(\"autocompleter\"));\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\nvar _Formio = require(\"../../Formio\");\nvar _GoogleAddressProvider = require(\"../../providers/address/GoogleAddressProvider\");\nvar _Field = _interopRequireDefault(require(\"../_classes/field/Field\"));\nvar _NestedComponent = _interopRequireDefault(require(\"../_classes/nested/NestedComponent\"));\nvar _Container = _interopRequireDefault(require(\"../container/Container\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _s, _e;\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n  return _arr;\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nvar AddressComponentMode = {\n  Autocomplete: 'autocomplete',\n  Manual: 'manual'\n};\nexports.AddressComponentMode = AddressComponentMode;\nvar RemoveValueIconHiddenClass = 'address-autocomplete-remove-value-icon--hidden';\nvar ChildConditional = 'show = _.get(instance, \\'parent.manualMode\\', false);';\nvar AddressComponent = /*#__PURE__*/function (_ContainerComponent) {\n  _inherits(AddressComponent, _ContainerComponent);\n  var _super = _createSuper(AddressComponent);\n  function AddressComponent() {\n    _classCallCheck(this, AddressComponent);\n    return _super.apply(this, arguments);\n  }\n  _createClass(AddressComponent, [{\n    key: \"mergeSchema\",\n    value: function mergeSchema() {\n      var component = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var defaultSchema = this.defaultSchema;\n      if (component.components) {\n        defaultSchema = _lodash.default.omit(defaultSchema, 'components');\n      }\n      return _lodash.default.defaultsDeep(component, defaultSchema);\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.components = this.components || [];\n      if (this.builderMode || this.manualModeEnabled) {\n        _NestedComponent.default.prototype.addComponents.call(this, this.manualMode ? this.address : {});\n      }\n      _Field.default.prototype.init.call(this);\n      if (!this.builderMode) {\n        if (this.component.provider) {\n          var _this$component = this.component,\n            provider = _this$component.provider,\n            providerOptions = _this$component.providerOptions;\n          this.provider = this.initializeProvider(provider, providerOptions);\n        } else if (this.component.map) {\n          // Fallback to legacy version where Google Maps was the only provider.\n          this.component.provider = _GoogleAddressProvider.GoogleAddressProvider.name;\n          this.component.providerOptions = this.component.providerOptions || {};\n          var _this$component2 = this.component,\n            map = _this$component2.map,\n            _provider = _this$component2.provider,\n            _providerOptions = _this$component2.providerOptions;\n          var key = map.key,\n            region = map.region;\n          if (key) {\n            _lodash.default.set(_providerOptions, 'params.key', key);\n          }\n          if (region) {\n            _lodash.default.set(_providerOptions, 'params.region', region);\n          }\n          this.provider = this.initializeProvider(_provider, _providerOptions);\n        }\n      }\n    }\n  }, {\n    key: \"initializeProvider\",\n    value: function initializeProvider(provider) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var url = this.interpolate(options.url);\n      var Provider = _Formio.GlobalFormio.Providers.getProvider('address', provider);\n      return new Provider(_objectSpread(_objectSpread({}, options), {}, {\n        url: url\n      }));\n    }\n  }, {\n    key: \"emptyValue\",\n    get: function get() {\n      return this.manualModeEnabled ? {\n        mode: AddressComponentMode.Autocomplete,\n        address: {}\n      } : {};\n    }\n  }, {\n    key: \"mode\",\n    get: function get() {\n      var _this$dataValue$mode, _this$dataValue;\n      if (!this.manualModeEnabled) {\n        return AddressComponentMode.Autocomplete;\n      }\n      return (_this$dataValue$mode = (_this$dataValue = this.dataValue) === null || _this$dataValue === void 0 ? void 0 : _this$dataValue.mode) !== null && _this$dataValue$mode !== void 0 ? _this$dataValue$mode : AddressComponentMode.Autocomplete;\n    },\n    set: function set(value) {\n      if (this.manualModeEnabled) {\n        this.dataValue.mode = value;\n      }\n    }\n  }, {\n    key: \"autocompleteMode\",\n    get: function get() {\n      return this.mode === AddressComponentMode.Autocomplete;\n    }\n  }, {\n    key: \"manualMode\",\n    get: function get() {\n      return this.mode === AddressComponentMode.Manual;\n    }\n  }, {\n    key: \"manualModeEnabled\",\n    get: function get() {\n      return !this.isMultiple && Boolean(this.component.enableManualMode);\n    }\n  }, {\n    key: \"restoreComponentsContext\",\n    value: function restoreComponentsContext() {\n      var _this = this;\n      this.getComponents().forEach(function (component) {\n        component.data = _this.address;\n        component.setValue(component.dataValue, {\n          noUpdateEvent: true\n        });\n      });\n    }\n  }, {\n    key: \"isMultiple\",\n    get: function get() {\n      return Boolean(this.component.multiple);\n    }\n  }, {\n    key: \"address\",\n    get: function get() {\n      if (this.isMultiple) {\n        return _lodash.default.isArray(this.dataValue) ? this.dataValue : [this.dataValue];\n      } // Manual mode is not implementing for multiple value\n\n      return this.manualModeEnabled && this.dataValue ? this.dataValue.address : this.dataValue;\n    },\n    set: function set(value) {\n      if (this.manualModeEnabled && !this.isMultiple) {\n        this.dataValue.address = value;\n      } else {\n        this.dataValue = value;\n      }\n    }\n  }, {\n    key: \"defaultValue\",\n    get: function get() {\n      var defaultValue = _get(_getPrototypeOf(AddressComponent.prototype), \"defaultValue\", this);\n      if (this.isMultiple) {\n        defaultValue = _lodash.default.isArray(defaultValue) ? defaultValue : [defaultValue];\n      }\n      return defaultValue;\n    }\n  }, {\n    key: \"defaultSchema\",\n    get: function get() {\n      return AddressComponent.schema();\n    }\n  }, {\n    key: \"isValueInLegacyFormat\",\n    value: function isValueInLegacyFormat(value) {\n      return value && !value.mode;\n    }\n  }, {\n    key: \"normalizeValue\",\n    value: function normalizeValue(value) {\n      return this.manualModeEnabled && this.isValueInLegacyFormat(value) ? {\n        mode: AddressComponentMode.Autocomplete,\n        address: value\n      } : value;\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var changed = _Field.default.prototype.setValue.call(this, value, flags);\n      if (this.manualMode) {\n        this.restoreComponentsContext();\n      }\n      if (changed || !_lodash.default.isEmpty(value) && flags.fromSubmission) {\n        this.redraw();\n      }\n      return changed;\n    }\n  }, {\n    key: \"modeSwitcher\",\n    get: function get() {\n      return this.refs ? this.refs[AddressComponent.modeSwitcherRef] || null : null;\n    }\n  }, {\n    key: \"removeValueIcon\",\n    get: function get() {\n      return this.refs ? this.refs[AddressComponent.removeValueIconRef] || null : null;\n    }\n  }, {\n    key: \"searchInput\",\n    get: function get() {\n      return this.refs ? this.refs[AddressComponent.searchInputRef] || null : null;\n    }\n  }, {\n    key: \"addRowButton\",\n    get: function get() {\n      return this.refs ? this.refs[AddressComponent.addRowButtonRef] || null : null;\n    }\n  }, {\n    key: \"removeRowButton\",\n    get: function get() {\n      return this.refs ? this.refs[AddressComponent.removeRowButtonRef] || null : null;\n    }\n  }, {\n    key: \"searchInputAttributes\",\n    get: function get() {\n      var attr = {\n        name: this.options.name,\n        type: 'text',\n        class: 'form-control',\n        lang: this.options.language,\n        tabindex: this.component.tabindex || 0\n      };\n      if (this.component.placeholder) {\n        attr.placeholder = this.t(this.component.placeholder), {\n          _userInput: true\n        };\n      }\n      if (this.disabled) {\n        attr.disabled = 'disabled';\n      }\n      _lodash.default.defaults(attr, this.component.attributes);\n      return attr;\n    }\n  }, {\n    key: \"templateName\",\n    get: function get() {\n      return 'address';\n    }\n  }, {\n    key: \"gridTemplateName\",\n    get: function get() {\n      return 'multiValueTable';\n    }\n  }, {\n    key: \"rowTemplateName\",\n    get: function get() {\n      return 'multiValueRow';\n    }\n  }, {\n    key: \"hasChildren\",\n    get: function get() {\n      return !this.isMultiple && (this.builderMode || this.manualModeEnabled);\n    }\n  }, {\n    key: \"addAnother\",\n    get: function get() {\n      return this.t(this.component.addAnother || 'Add Another');\n    }\n  }, {\n    key: \"renderElement\",\n    value: function renderElement(value) {\n      return this.renderTemplate(this.templateName, {\n        children: this.hasChildren ? this.renderComponents() : '',\n        nestedKey: this.nestedKey,\n        inputAttributes: this.searchInputAttributes,\n        ref: {\n          modeSwitcher: AddressComponent.modeSwitcherRef,\n          removeValueIcon: AddressComponent.removeValueIconRef,\n          searchInput: AddressComponent.searchInputRef\n        },\n        displayValue: this.getDisplayValue(value),\n        mode: {\n          autocomplete: this.autocompleteMode,\n          manual: this.manualMode\n        }\n      });\n    }\n  }, {\n    key: \"renderRow\",\n    value: function renderRow(value, index) {\n      return this.renderTemplate(this.rowTemplateName, {\n        index: index,\n        disabled: this.disabled,\n        element: \"\".concat(this.renderElement(value, index))\n      });\n    }\n  }, {\n    key: \"renderGrid\",\n    value: function renderGrid() {\n      return this.renderTemplate(this.gridTemplateName, {\n        rows: this.address.map(this.renderRow.bind(this)).join(''),\n        disabled: this.disabled,\n        addAnother: this.addAnother\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.isMultiple) {\n        return _get(_getPrototypeOf(AddressComponent.prototype), \"render\", this).call(this, this.renderGrid());\n      }\n      return _get(_getPrototypeOf(AddressComponent.prototype), \"render\", this).call(this, this.renderElement());\n    }\n  }, {\n    key: \"onSelectAddress\",\n    value: function onSelectAddress(address, element, index) {\n      if (this.isMultiple) {\n        this.address[index] = address;\n        this.address = _toConsumableArray(this.address);\n      } else {\n        this.address = address;\n      }\n      this.triggerChange({\n        modified: true\n      });\n      if (element) {\n        element.value = this.getDisplayValue(this.isMultiple ? this.address[index] : this.address);\n      }\n      this.updateRemoveIcon(index);\n    }\n  }, {\n    key: \"addRow\",\n    value: function addRow() {\n      this.address = this.address.concat(this.emptyValue);\n      _get(_getPrototypeOf(AddressComponent.prototype), \"redraw\", this).call(this);\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this$loadRefs,\n        _this2 = this;\n      var result = (this.builderMode || this.manualMode ? _get(_getPrototypeOf(AddressComponent.prototype), \"attach\", this) : _Field.default.prototype.attach).call(this, element);\n      if (!this.builderMode) {\n        if (!this.provider && this.component.provider) {\n          var _this$component3 = this.component,\n            provider = _this$component3.provider,\n            providerOptions = _this$component3.providerOptions;\n          this.provider = this.initializeProvider(provider, providerOptions);\n        }\n      }\n      this.loadRefs(element, (_this$loadRefs = {}, _defineProperty(_this$loadRefs, AddressComponent.addRowButtonRef, 'single'), _defineProperty(_this$loadRefs, AddressComponent.modeSwitcherRef, 'single'), _defineProperty(_this$loadRefs, AddressComponent.removeRowButtonRef, 'multiple'), _defineProperty(_this$loadRefs, AddressComponent.removeValueIconRef, 'multiple'), _defineProperty(_this$loadRefs, AddressComponent.searchInputRef, 'multiple'), _this$loadRefs));\n      this.searchInput.forEach(function (element, index) {\n        if (!_this2.builderMode && element && _this2.provider) {\n          if (_this2.component.provider === 'google') {\n            _this2.provider.attachAutocomplete(element, index, _this2.onSelectAddress.bind(_this2));\n          } else {\n            (0, _autocompleter.default)({\n              input: element,\n              debounceWaitMs: 300,\n              fetch: function fetch(text, update) {\n                var query = text;\n                _this2.provider.search(query).then(update);\n              },\n              render: function render(address) {\n                var div = _this2.ce('div');\n                div.textContent = _this2.getDisplayValue(address);\n                return div;\n              },\n              onSelect: function onSelect(address) {\n                _this2.onSelectAddress(address, element, index);\n              }\n            });\n          }\n          _this2.addEventListener(element, 'blur', function () {\n            if (!element) {\n              return;\n            }\n            if (element.value) {\n              element.value = _this2.getDisplayValue(_this2.isMultiple ? _this2.address[index] : _this2.address);\n            }\n          });\n          _this2.addEventListener(element, 'keyup', function () {\n            if (!element) {\n              return;\n            }\n            if (!element.value) {\n              _this2.clearAddress(element, index);\n            }\n          });\n        }\n      });\n      if (this.addRowButton) {\n        this.addEventListener(this.addRowButton, 'click', function (event) {\n          event.preventDefault();\n          _this2.addRow();\n        });\n      }\n      this.removeRowButton.forEach(function (removeRowButton, index) {\n        _this2.addEventListener(removeRowButton, 'click', function (event) {\n          event.preventDefault();\n          _this2.removeValue(index);\n        });\n      });\n      if (this.modeSwitcher) {\n        this.addEventListener(this.modeSwitcher, 'change', function () {\n          if (!_this2.modeSwitcher) {\n            return;\n          }\n          _this2.dataValue = _this2.emptyValue;\n          _this2.mode = _this2.modeSwitcher.checked ? AddressComponentMode.Manual : AddressComponentMode.Autocomplete;\n          if (!_this2.builderMode) {\n            if (_this2.manualMode) {\n              _this2.restoreComponentsContext();\n            }\n            _this2.triggerChange({\n              modified: true\n            });\n          }\n          _this2.redraw();\n        });\n      }\n      if (!this.builderMode) {\n        this.removeValueIcon.forEach(function (removeValueIcon, index) {\n          _this2.updateRemoveIcon(index);\n          var removeValueHandler = function removeValueHandler() {\n            var _this2$searchInput;\n            var searchInput = (_this2$searchInput = _this2.searchInput) === null || _this2$searchInput === void 0 ? void 0 : _this2$searchInput[index];\n            _this2.clearAddress(searchInput, index);\n            if (searchInput) {\n              searchInput.focus();\n            }\n          };\n          _this2.addEventListener(removeValueIcon, 'click', removeValueHandler);\n          _this2.addEventListener(removeValueIcon, 'keydown', function (_ref) {\n            var key = _ref.key;\n            if (key === 'Enter') {\n              removeValueHandler();\n            }\n          });\n        });\n      }\n      return result;\n    }\n  }, {\n    key: \"addChildComponent\",\n    value: function addChildComponent(component) {\n      component.customConditional = ChildConditional;\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      var _this3 = this;\n      var modeSwitcherInFocus = this.modeSwitcher && document.activeElement === this.modeSwitcher;\n      return _get(_getPrototypeOf(AddressComponent.prototype), \"redraw\", this).call(this).then(function (result) {\n        if (modeSwitcherInFocus && _this3.modeSwitcher) {\n          _this3.modeSwitcher.focus();\n        }\n        return result;\n      });\n    }\n  }, {\n    key: \"clearAddress\",\n    value: function clearAddress(element, index) {\n      var _this$address;\n      if (!this.isEmpty()) {\n        this.triggerChange();\n      }\n      if ((_this$address = this.address) !== null && _this$address !== void 0 && _this$address[index]) {\n        this.address[index] = this.emptyValue;\n      } else {\n        this.address = this.emptyValue;\n      }\n      if (element) {\n        element.value = '';\n      }\n      this.updateRemoveIcon(index);\n    }\n  }, {\n    key: \"getDisplayValue\",\n    value: function getDisplayValue() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.address;\n      return this.provider && !this.manualMode ? this.provider.getDisplayValue(value) : '';\n    }\n  }, {\n    key: \"validateMultiple\",\n    value: function validateMultiple() {\n      return this.isMultiple;\n    }\n  }, {\n    key: \"updateRemoveIcon\",\n    value: function updateRemoveIcon(index) {\n      var _this$removeValueIcon;\n      var removeValueIcon = (_this$removeValueIcon = this.removeValueIcon) === null || _this$removeValueIcon === void 0 ? void 0 : _this$removeValueIcon[index];\n      if (removeValueIcon) {\n        var value = this.isMultiple ? this.address[index] : this.address;\n        if (this.isEmpty(value) || this.disabled) {\n          this.addClass(removeValueIcon, RemoveValueIconHiddenClass);\n        } else {\n          this.removeClass(removeValueIcon, RemoveValueIconHiddenClass);\n        }\n      }\n    }\n  }, {\n    key: \"getValueAsString\",\n    value: function getValueAsString(value, options) {\n      if (!value) {\n        return '';\n      }\n      var normalizedValue = this.normalizeValue(value);\n      var _ref2 = this.manualModeEnabled ? normalizedValue : {\n          address: normalizedValue,\n          mode: AddressComponentMode.Autocomplete\n        },\n        address = _ref2.address,\n        mode = _ref2.mode;\n      var valueInManualMode = mode === AddressComponentMode.Manual;\n      if (this.provider && !valueInManualMode) {\n        return this.getDisplayValue(address);\n      }\n      if (valueInManualMode) {\n        if (this.component.manualModeViewString) {\n          return this.interpolate(this.component.manualModeViewString, {\n            address: address,\n            data: this.data,\n            component: this.component\n          });\n        }\n        return this.getComponents().filter(function (component) {\n          return component.hasValue(address);\n        }).map(function (component) {\n          return [component, _lodash.default.get(address, component.key)];\n        }).filter(function (_ref3) {\n          var _ref4 = _slicedToArray(_ref3, 2),\n            component = _ref4[0],\n            componentValue = _ref4[1];\n          return !component.isEmpty(componentValue);\n        }).map(function (_ref5) {\n          var _ref6 = _slicedToArray(_ref5, 2),\n            component = _ref6[0],\n            componentValue = _ref6[1];\n          return component.getValueAsString(componentValue, options);\n        }).join(', ');\n      }\n      return _get(_getPrototypeOf(AddressComponent.prototype), \"getValueAsString\", this).call(this, address, options);\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      if (this.searchInput && this.searchInput[0]) {\n        this.searchInput[0].focus();\n      }\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len = arguments.length, extend = new Array(_len), _key = 0; _key < _len; _key++) {\n        extend[_key] = arguments[_key];\n      }\n      return _Container.default.schema.apply(_Container.default, [{\n        type: 'address',\n        label: 'Address',\n        key: 'address',\n        switchToManualModeLabel: 'Can\\'t find address? Switch to manual mode.',\n        provider: '',\n        providerOptions: {},\n        manualModeViewString: '',\n        hideLabel: false,\n        disableClearIcon: false,\n        enableManualMode: false,\n        components: [{\n          label: 'Address 1',\n          tableView: false,\n          key: 'address1',\n          type: 'textfield',\n          input: true,\n          customConditional: ChildConditional\n        }, {\n          label: 'Address 2',\n          tableView: false,\n          key: 'address2',\n          type: 'textfield',\n          input: true,\n          customConditional: ChildConditional\n        }, {\n          label: 'City',\n          tableView: false,\n          key: 'city',\n          type: 'textfield',\n          input: true,\n          customConditional: ChildConditional\n        }, {\n          label: 'State',\n          tableView: false,\n          key: 'state',\n          type: 'textfield',\n          input: true,\n          customConditional: ChildConditional\n        }, {\n          label: 'Country',\n          tableView: false,\n          key: 'country',\n          type: 'textfield',\n          input: true,\n          customConditional: ChildConditional\n        }, {\n          label: 'Zip Code',\n          tableView: false,\n          key: 'zip',\n          type: 'textfield',\n          input: true,\n          customConditional: ChildConditional\n        }]\n      }].concat(extend));\n    }\n  }, {\n    key: \"builderInfo\",\n    get: function get() {\n      return {\n        title: 'Address',\n        group: 'advanced',\n        icon: 'home',\n        documentation: '/userguide/forms/form-components#address',\n        weight: 35,\n        schema: AddressComponent.schema()\n      };\n    }\n  }, {\n    key: \"modeSwitcherRef\",\n    get: function get() {\n      return 'modeSwitcher';\n    }\n  }, {\n    key: \"removeValueIconRef\",\n    get: function get() {\n      return 'removeValueIcon';\n    }\n  }, {\n    key: \"searchInputRef\",\n    get: function get() {\n      return 'searchInput';\n    }\n  }, {\n    key: \"addRowButtonRef\",\n    get: function get() {\n      return 'addButton';\n    }\n  }, {\n    key: \"removeRowButtonRef\",\n    get: function get() {\n      return 'removeRow';\n    }\n  }]);\n  return AddressComponent;\n}(_Container.default);\nexports.default = AddressComponent;","map":{"version":3,"names":["_typeof","obj","Symbol","iterator","constructor","prototype","require","Object","defineProperty","exports","value","default","AddressComponentMode","_autocompleter","_interopRequireDefault","_lodash","_Formio","_GoogleAddressProvider","_Field","_NestedComponent","_Container","__esModule","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","_i","_arr","_n","_d","_s","_e","call","next","done","push","length","err","Array","isArray","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","o","minLen","_arrayLikeToArray","n","toString","slice","name","from","test","iter","len","arr2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_get","Reflect","get","bind","property","receiver","base","_superPropBase","desc","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","Autocomplete","Manual","RemoveValueIconHiddenClass","ChildConditional","AddressComponent","_ContainerComponent","_super","mergeSchema","component","undefined","defaultSchema","components","omit","defaultsDeep","init","builderMode","manualModeEnabled","addComponents","manualMode","address","provider","_this$component","providerOptions","initializeProvider","map","GoogleAddressProvider","_this$component2","_provider","_providerOptions","region","set","options","url","interpolate","Provider","GlobalFormio","Providers","getProvider","mode","_this$dataValue$mode","_this$dataValue","dataValue","isMultiple","enableManualMode","restoreComponentsContext","_this","getComponents","data","setValue","noUpdateEvent","multiple","defaultValue","schema","isValueInLegacyFormat","normalizeValue","flags","changed","isEmpty","fromSubmission","redraw","refs","modeSwitcherRef","removeValueIconRef","searchInputRef","addRowButtonRef","removeRowButtonRef","attr","type","class","lang","language","tabindex","placeholder","t","_userInput","disabled","defaults","attributes","addAnother","renderElement","renderTemplate","templateName","children","hasChildren","renderComponents","nestedKey","inputAttributes","searchInputAttributes","ref","modeSwitcher","removeValueIcon","searchInput","displayValue","getDisplayValue","autocomplete","autocompleteMode","manual","renderRow","index","rowTemplateName","element","concat","renderGrid","gridTemplateName","rows","join","render","onSelectAddress","triggerChange","modified","updateRemoveIcon","addRow","emptyValue","attach","_this$loadRefs","_this2","_this$component3","loadRefs","attachAutocomplete","input","debounceWaitMs","fetch","text","update","query","search","then","div","ce","textContent","onSelect","addEventListener","clearAddress","addRowButton","event","preventDefault","removeRowButton","removeValue","checked","removeValueHandler","_this2$searchInput","focus","_ref","addChildComponent","customConditional","_this3","modeSwitcherInFocus","document","activeElement","_this$address","validateMultiple","_this$removeValueIcon","addClass","removeClass","getValueAsString","normalizedValue","_ref2","valueInManualMode","manualModeViewString","hasValue","_ref3","_ref4","componentValue","_ref5","_ref6","_len","extend","_key","label","switchToManualModeLabel","hideLabel","disableClearIcon","tableView","title","group","icon","documentation","weight"],"sources":["D:/task/node_modules/formiojs/components/address/Address.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.reflect.get.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.AddressComponentMode = void 0;\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.join.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.search.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nvar _autocompleter = _interopRequireDefault(require(\"autocompleter\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _Formio = require(\"../../Formio\");\n\nvar _GoogleAddressProvider = require(\"../../providers/address/GoogleAddressProvider\");\n\nvar _Field = _interopRequireDefault(require(\"../_classes/field/Field\"));\n\nvar _NestedComponent = _interopRequireDefault(require(\"../_classes/nested/NestedComponent\"));\n\nvar _Container = _interopRequireDefault(require(\"../container/Container\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar AddressComponentMode = {\n  Autocomplete: 'autocomplete',\n  Manual: 'manual'\n};\nexports.AddressComponentMode = AddressComponentMode;\nvar RemoveValueIconHiddenClass = 'address-autocomplete-remove-value-icon--hidden';\nvar ChildConditional = 'show = _.get(instance, \\'parent.manualMode\\', false);';\n\nvar AddressComponent = /*#__PURE__*/function (_ContainerComponent) {\n  _inherits(AddressComponent, _ContainerComponent);\n\n  var _super = _createSuper(AddressComponent);\n\n  function AddressComponent() {\n    _classCallCheck(this, AddressComponent);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(AddressComponent, [{\n    key: \"mergeSchema\",\n    value: function mergeSchema() {\n      var component = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var defaultSchema = this.defaultSchema;\n\n      if (component.components) {\n        defaultSchema = _lodash.default.omit(defaultSchema, 'components');\n      }\n\n      return _lodash.default.defaultsDeep(component, defaultSchema);\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.components = this.components || [];\n\n      if (this.builderMode || this.manualModeEnabled) {\n        _NestedComponent.default.prototype.addComponents.call(this, this.manualMode ? this.address : {});\n      }\n\n      _Field.default.prototype.init.call(this);\n\n      if (!this.builderMode) {\n        if (this.component.provider) {\n          var _this$component = this.component,\n              provider = _this$component.provider,\n              providerOptions = _this$component.providerOptions;\n          this.provider = this.initializeProvider(provider, providerOptions);\n        } else if (this.component.map) {\n          // Fallback to legacy version where Google Maps was the only provider.\n          this.component.provider = _GoogleAddressProvider.GoogleAddressProvider.name;\n          this.component.providerOptions = this.component.providerOptions || {};\n          var _this$component2 = this.component,\n              map = _this$component2.map,\n              _provider = _this$component2.provider,\n              _providerOptions = _this$component2.providerOptions;\n          var key = map.key,\n              region = map.region;\n\n          if (key) {\n            _lodash.default.set(_providerOptions, 'params.key', key);\n          }\n\n          if (region) {\n            _lodash.default.set(_providerOptions, 'params.region', region);\n          }\n\n          this.provider = this.initializeProvider(_provider, _providerOptions);\n        }\n      }\n    }\n  }, {\n    key: \"initializeProvider\",\n    value: function initializeProvider(provider) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var url = this.interpolate(options.url);\n\n      var Provider = _Formio.GlobalFormio.Providers.getProvider('address', provider);\n\n      return new Provider(_objectSpread(_objectSpread({}, options), {}, {\n        url: url\n      }));\n    }\n  }, {\n    key: \"emptyValue\",\n    get: function get() {\n      return this.manualModeEnabled ? {\n        mode: AddressComponentMode.Autocomplete,\n        address: {}\n      } : {};\n    }\n  }, {\n    key: \"mode\",\n    get: function get() {\n      var _this$dataValue$mode, _this$dataValue;\n\n      if (!this.manualModeEnabled) {\n        return AddressComponentMode.Autocomplete;\n      }\n\n      return (_this$dataValue$mode = (_this$dataValue = this.dataValue) === null || _this$dataValue === void 0 ? void 0 : _this$dataValue.mode) !== null && _this$dataValue$mode !== void 0 ? _this$dataValue$mode : AddressComponentMode.Autocomplete;\n    },\n    set: function set(value) {\n      if (this.manualModeEnabled) {\n        this.dataValue.mode = value;\n      }\n    }\n  }, {\n    key: \"autocompleteMode\",\n    get: function get() {\n      return this.mode === AddressComponentMode.Autocomplete;\n    }\n  }, {\n    key: \"manualMode\",\n    get: function get() {\n      return this.mode === AddressComponentMode.Manual;\n    }\n  }, {\n    key: \"manualModeEnabled\",\n    get: function get() {\n      return !this.isMultiple && Boolean(this.component.enableManualMode);\n    }\n  }, {\n    key: \"restoreComponentsContext\",\n    value: function restoreComponentsContext() {\n      var _this = this;\n\n      this.getComponents().forEach(function (component) {\n        component.data = _this.address;\n        component.setValue(component.dataValue, {\n          noUpdateEvent: true\n        });\n      });\n    }\n  }, {\n    key: \"isMultiple\",\n    get: function get() {\n      return Boolean(this.component.multiple);\n    }\n  }, {\n    key: \"address\",\n    get: function get() {\n      if (this.isMultiple) {\n        return _lodash.default.isArray(this.dataValue) ? this.dataValue : [this.dataValue];\n      } // Manual mode is not implementing for multiple value\n\n\n      return this.manualModeEnabled && this.dataValue ? this.dataValue.address : this.dataValue;\n    },\n    set: function set(value) {\n      if (this.manualModeEnabled && !this.isMultiple) {\n        this.dataValue.address = value;\n      } else {\n        this.dataValue = value;\n      }\n    }\n  }, {\n    key: \"defaultValue\",\n    get: function get() {\n      var defaultValue = _get(_getPrototypeOf(AddressComponent.prototype), \"defaultValue\", this);\n\n      if (this.isMultiple) {\n        defaultValue = _lodash.default.isArray(defaultValue) ? defaultValue : [defaultValue];\n      }\n\n      return defaultValue;\n    }\n  }, {\n    key: \"defaultSchema\",\n    get: function get() {\n      return AddressComponent.schema();\n    }\n  }, {\n    key: \"isValueInLegacyFormat\",\n    value: function isValueInLegacyFormat(value) {\n      return value && !value.mode;\n    }\n  }, {\n    key: \"normalizeValue\",\n    value: function normalizeValue(value) {\n      return this.manualModeEnabled && this.isValueInLegacyFormat(value) ? {\n        mode: AddressComponentMode.Autocomplete,\n        address: value\n      } : value;\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var changed = _Field.default.prototype.setValue.call(this, value, flags);\n\n      if (this.manualMode) {\n        this.restoreComponentsContext();\n      }\n\n      if (changed || !_lodash.default.isEmpty(value) && flags.fromSubmission) {\n        this.redraw();\n      }\n\n      return changed;\n    }\n  }, {\n    key: \"modeSwitcher\",\n    get: function get() {\n      return this.refs ? this.refs[AddressComponent.modeSwitcherRef] || null : null;\n    }\n  }, {\n    key: \"removeValueIcon\",\n    get: function get() {\n      return this.refs ? this.refs[AddressComponent.removeValueIconRef] || null : null;\n    }\n  }, {\n    key: \"searchInput\",\n    get: function get() {\n      return this.refs ? this.refs[AddressComponent.searchInputRef] || null : null;\n    }\n  }, {\n    key: \"addRowButton\",\n    get: function get() {\n      return this.refs ? this.refs[AddressComponent.addRowButtonRef] || null : null;\n    }\n  }, {\n    key: \"removeRowButton\",\n    get: function get() {\n      return this.refs ? this.refs[AddressComponent.removeRowButtonRef] || null : null;\n    }\n  }, {\n    key: \"searchInputAttributes\",\n    get: function get() {\n      var attr = {\n        name: this.options.name,\n        type: 'text',\n        class: 'form-control',\n        lang: this.options.language,\n        tabindex: this.component.tabindex || 0\n      };\n\n      if (this.component.placeholder) {\n        attr.placeholder = this.t(this.component.placeholder), {\n          _userInput: true\n        };\n      }\n\n      if (this.disabled) {\n        attr.disabled = 'disabled';\n      }\n\n      _lodash.default.defaults(attr, this.component.attributes);\n\n      return attr;\n    }\n  }, {\n    key: \"templateName\",\n    get: function get() {\n      return 'address';\n    }\n  }, {\n    key: \"gridTemplateName\",\n    get: function get() {\n      return 'multiValueTable';\n    }\n  }, {\n    key: \"rowTemplateName\",\n    get: function get() {\n      return 'multiValueRow';\n    }\n  }, {\n    key: \"hasChildren\",\n    get: function get() {\n      return !this.isMultiple && (this.builderMode || this.manualModeEnabled);\n    }\n  }, {\n    key: \"addAnother\",\n    get: function get() {\n      return this.t(this.component.addAnother || 'Add Another');\n    }\n  }, {\n    key: \"renderElement\",\n    value: function renderElement(value) {\n      return this.renderTemplate(this.templateName, {\n        children: this.hasChildren ? this.renderComponents() : '',\n        nestedKey: this.nestedKey,\n        inputAttributes: this.searchInputAttributes,\n        ref: {\n          modeSwitcher: AddressComponent.modeSwitcherRef,\n          removeValueIcon: AddressComponent.removeValueIconRef,\n          searchInput: AddressComponent.searchInputRef\n        },\n        displayValue: this.getDisplayValue(value),\n        mode: {\n          autocomplete: this.autocompleteMode,\n          manual: this.manualMode\n        }\n      });\n    }\n  }, {\n    key: \"renderRow\",\n    value: function renderRow(value, index) {\n      return this.renderTemplate(this.rowTemplateName, {\n        index: index,\n        disabled: this.disabled,\n        element: \"\".concat(this.renderElement(value, index))\n      });\n    }\n  }, {\n    key: \"renderGrid\",\n    value: function renderGrid() {\n      return this.renderTemplate(this.gridTemplateName, {\n        rows: this.address.map(this.renderRow.bind(this)).join(''),\n        disabled: this.disabled,\n        addAnother: this.addAnother\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.isMultiple) {\n        return _get(_getPrototypeOf(AddressComponent.prototype), \"render\", this).call(this, this.renderGrid());\n      }\n\n      return _get(_getPrototypeOf(AddressComponent.prototype), \"render\", this).call(this, this.renderElement());\n    }\n  }, {\n    key: \"onSelectAddress\",\n    value: function onSelectAddress(address, element, index) {\n      if (this.isMultiple) {\n        this.address[index] = address;\n        this.address = _toConsumableArray(this.address);\n      } else {\n        this.address = address;\n      }\n\n      this.triggerChange({\n        modified: true\n      });\n\n      if (element) {\n        element.value = this.getDisplayValue(this.isMultiple ? this.address[index] : this.address);\n      }\n\n      this.updateRemoveIcon(index);\n    }\n  }, {\n    key: \"addRow\",\n    value: function addRow() {\n      this.address = this.address.concat(this.emptyValue);\n\n      _get(_getPrototypeOf(AddressComponent.prototype), \"redraw\", this).call(this);\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this$loadRefs,\n          _this2 = this;\n\n      var result = (this.builderMode || this.manualMode ? _get(_getPrototypeOf(AddressComponent.prototype), \"attach\", this) : _Field.default.prototype.attach).call(this, element);\n\n      if (!this.builderMode) {\n        if (!this.provider && this.component.provider) {\n          var _this$component3 = this.component,\n              provider = _this$component3.provider,\n              providerOptions = _this$component3.providerOptions;\n          this.provider = this.initializeProvider(provider, providerOptions);\n        }\n      }\n\n      this.loadRefs(element, (_this$loadRefs = {}, _defineProperty(_this$loadRefs, AddressComponent.addRowButtonRef, 'single'), _defineProperty(_this$loadRefs, AddressComponent.modeSwitcherRef, 'single'), _defineProperty(_this$loadRefs, AddressComponent.removeRowButtonRef, 'multiple'), _defineProperty(_this$loadRefs, AddressComponent.removeValueIconRef, 'multiple'), _defineProperty(_this$loadRefs, AddressComponent.searchInputRef, 'multiple'), _this$loadRefs));\n      this.searchInput.forEach(function (element, index) {\n        if (!_this2.builderMode && element && _this2.provider) {\n          if (_this2.component.provider === 'google') {\n            _this2.provider.attachAutocomplete(element, index, _this2.onSelectAddress.bind(_this2));\n          } else {\n            (0, _autocompleter.default)({\n              input: element,\n              debounceWaitMs: 300,\n              fetch: function fetch(text, update) {\n                var query = text;\n\n                _this2.provider.search(query).then(update);\n              },\n              render: function render(address) {\n                var div = _this2.ce('div');\n\n                div.textContent = _this2.getDisplayValue(address);\n                return div;\n              },\n              onSelect: function onSelect(address) {\n                _this2.onSelectAddress(address, element, index);\n              }\n            });\n          }\n\n          _this2.addEventListener(element, 'blur', function () {\n            if (!element) {\n              return;\n            }\n\n            if (element.value) {\n              element.value = _this2.getDisplayValue(_this2.isMultiple ? _this2.address[index] : _this2.address);\n            }\n          });\n\n          _this2.addEventListener(element, 'keyup', function () {\n            if (!element) {\n              return;\n            }\n\n            if (!element.value) {\n              _this2.clearAddress(element, index);\n            }\n          });\n        }\n      });\n\n      if (this.addRowButton) {\n        this.addEventListener(this.addRowButton, 'click', function (event) {\n          event.preventDefault();\n\n          _this2.addRow();\n        });\n      }\n\n      this.removeRowButton.forEach(function (removeRowButton, index) {\n        _this2.addEventListener(removeRowButton, 'click', function (event) {\n          event.preventDefault();\n\n          _this2.removeValue(index);\n        });\n      });\n\n      if (this.modeSwitcher) {\n        this.addEventListener(this.modeSwitcher, 'change', function () {\n          if (!_this2.modeSwitcher) {\n            return;\n          }\n\n          _this2.dataValue = _this2.emptyValue;\n          _this2.mode = _this2.modeSwitcher.checked ? AddressComponentMode.Manual : AddressComponentMode.Autocomplete;\n\n          if (!_this2.builderMode) {\n            if (_this2.manualMode) {\n              _this2.restoreComponentsContext();\n            }\n\n            _this2.triggerChange({\n              modified: true\n            });\n          }\n\n          _this2.redraw();\n        });\n      }\n\n      if (!this.builderMode) {\n        this.removeValueIcon.forEach(function (removeValueIcon, index) {\n          _this2.updateRemoveIcon(index);\n\n          var removeValueHandler = function removeValueHandler() {\n            var _this2$searchInput;\n\n            var searchInput = (_this2$searchInput = _this2.searchInput) === null || _this2$searchInput === void 0 ? void 0 : _this2$searchInput[index];\n\n            _this2.clearAddress(searchInput, index);\n\n            if (searchInput) {\n              searchInput.focus();\n            }\n          };\n\n          _this2.addEventListener(removeValueIcon, 'click', removeValueHandler);\n\n          _this2.addEventListener(removeValueIcon, 'keydown', function (_ref) {\n            var key = _ref.key;\n\n            if (key === 'Enter') {\n              removeValueHandler();\n            }\n          });\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"addChildComponent\",\n    value: function addChildComponent(component) {\n      component.customConditional = ChildConditional;\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      var _this3 = this;\n\n      var modeSwitcherInFocus = this.modeSwitcher && document.activeElement === this.modeSwitcher;\n      return _get(_getPrototypeOf(AddressComponent.prototype), \"redraw\", this).call(this).then(function (result) {\n        if (modeSwitcherInFocus && _this3.modeSwitcher) {\n          _this3.modeSwitcher.focus();\n        }\n\n        return result;\n      });\n    }\n  }, {\n    key: \"clearAddress\",\n    value: function clearAddress(element, index) {\n      var _this$address;\n\n      if (!this.isEmpty()) {\n        this.triggerChange();\n      }\n\n      if ((_this$address = this.address) !== null && _this$address !== void 0 && _this$address[index]) {\n        this.address[index] = this.emptyValue;\n      } else {\n        this.address = this.emptyValue;\n      }\n\n      if (element) {\n        element.value = '';\n      }\n\n      this.updateRemoveIcon(index);\n    }\n  }, {\n    key: \"getDisplayValue\",\n    value: function getDisplayValue() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.address;\n      return this.provider && !this.manualMode ? this.provider.getDisplayValue(value) : '';\n    }\n  }, {\n    key: \"validateMultiple\",\n    value: function validateMultiple() {\n      return this.isMultiple;\n    }\n  }, {\n    key: \"updateRemoveIcon\",\n    value: function updateRemoveIcon(index) {\n      var _this$removeValueIcon;\n\n      var removeValueIcon = (_this$removeValueIcon = this.removeValueIcon) === null || _this$removeValueIcon === void 0 ? void 0 : _this$removeValueIcon[index];\n\n      if (removeValueIcon) {\n        var value = this.isMultiple ? this.address[index] : this.address;\n\n        if (this.isEmpty(value) || this.disabled) {\n          this.addClass(removeValueIcon, RemoveValueIconHiddenClass);\n        } else {\n          this.removeClass(removeValueIcon, RemoveValueIconHiddenClass);\n        }\n      }\n    }\n  }, {\n    key: \"getValueAsString\",\n    value: function getValueAsString(value, options) {\n      if (!value) {\n        return '';\n      }\n\n      var normalizedValue = this.normalizeValue(value);\n\n      var _ref2 = this.manualModeEnabled ? normalizedValue : {\n        address: normalizedValue,\n        mode: AddressComponentMode.Autocomplete\n      },\n          address = _ref2.address,\n          mode = _ref2.mode;\n\n      var valueInManualMode = mode === AddressComponentMode.Manual;\n\n      if (this.provider && !valueInManualMode) {\n        return this.getDisplayValue(address);\n      }\n\n      if (valueInManualMode) {\n        if (this.component.manualModeViewString) {\n          return this.interpolate(this.component.manualModeViewString, {\n            address: address,\n            data: this.data,\n            component: this.component\n          });\n        }\n\n        return this.getComponents().filter(function (component) {\n          return component.hasValue(address);\n        }).map(function (component) {\n          return [component, _lodash.default.get(address, component.key)];\n        }).filter(function (_ref3) {\n          var _ref4 = _slicedToArray(_ref3, 2),\n              component = _ref4[0],\n              componentValue = _ref4[1];\n\n          return !component.isEmpty(componentValue);\n        }).map(function (_ref5) {\n          var _ref6 = _slicedToArray(_ref5, 2),\n              component = _ref6[0],\n              componentValue = _ref6[1];\n\n          return component.getValueAsString(componentValue, options);\n        }).join(', ');\n      }\n\n      return _get(_getPrototypeOf(AddressComponent.prototype), \"getValueAsString\", this).call(this, address, options);\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      if (this.searchInput && this.searchInput[0]) {\n        this.searchInput[0].focus();\n      }\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len = arguments.length, extend = new Array(_len), _key = 0; _key < _len; _key++) {\n        extend[_key] = arguments[_key];\n      }\n\n      return _Container.default.schema.apply(_Container.default, [{\n        type: 'address',\n        label: 'Address',\n        key: 'address',\n        switchToManualModeLabel: 'Can\\'t find address? Switch to manual mode.',\n        provider: '',\n        providerOptions: {},\n        manualModeViewString: '',\n        hideLabel: false,\n        disableClearIcon: false,\n        enableManualMode: false,\n        components: [{\n          label: 'Address 1',\n          tableView: false,\n          key: 'address1',\n          type: 'textfield',\n          input: true,\n          customConditional: ChildConditional\n        }, {\n          label: 'Address 2',\n          tableView: false,\n          key: 'address2',\n          type: 'textfield',\n          input: true,\n          customConditional: ChildConditional\n        }, {\n          label: 'City',\n          tableView: false,\n          key: 'city',\n          type: 'textfield',\n          input: true,\n          customConditional: ChildConditional\n        }, {\n          label: 'State',\n          tableView: false,\n          key: 'state',\n          type: 'textfield',\n          input: true,\n          customConditional: ChildConditional\n        }, {\n          label: 'Country',\n          tableView: false,\n          key: 'country',\n          type: 'textfield',\n          input: true,\n          customConditional: ChildConditional\n        }, {\n          label: 'Zip Code',\n          tableView: false,\n          key: 'zip',\n          type: 'textfield',\n          input: true,\n          customConditional: ChildConditional\n        }]\n      }].concat(extend));\n    }\n  }, {\n    key: \"builderInfo\",\n    get: function get() {\n      return {\n        title: 'Address',\n        group: 'advanced',\n        icon: 'home',\n        documentation: '/userguide/forms/form-components#address',\n        weight: 35,\n        schema: AddressComponent.schema()\n      };\n    }\n  }, {\n    key: \"modeSwitcherRef\",\n    get: function get() {\n      return 'modeSwitcher';\n    }\n  }, {\n    key: \"removeValueIconRef\",\n    get: function get() {\n      return 'removeValueIcon';\n    }\n  }, {\n    key: \"searchInputRef\",\n    get: function get() {\n      return 'searchInput';\n    }\n  }, {\n    key: \"addRowButtonRef\",\n    get: function get() {\n      return 'addButton';\n    }\n  }, {\n    key: \"removeRowButtonRef\",\n    get: function get() {\n      return 'removeRow';\n    }\n  }]);\n\n  return AddressComponent;\n}(_Container.default);\n\nexports.default = AddressComponent;"],"mappings":"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"},"metadata":{},"sourceType":"script"}