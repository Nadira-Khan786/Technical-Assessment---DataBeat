{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CALENDAR_ERROR_MESSAGES = void 0;\nexports.checkInvalidDate = checkInvalidDate;\nexports.lessOrGreater = lessOrGreater;\nrequire(\"core-js/modules/es.regexp.exec.js\");\nrequire(\"core-js/modules/es.string.match.js\");\nrequire(\"core-js/modules/es.regexp.constructor.js\");\nrequire(\"core-js/modules/es.regexp.to-string.js\");\nrequire(\"core-js/modules/es.string.split.js\");\nrequire(\"core-js/modules/es.string.replace.js\");\nrequire(\"core-js/modules/es.array.find-index.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.concat.js\");\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nvar CALENDAR_ERROR_MESSAGES = {\n  INVALID: 'You entered the Invalid Date',\n  INCOMPLETE: 'You entered an incomplete date.',\n  greater: function greater(date, format) {\n    return \"The entered date is greater than \".concat(date.format(format));\n  },\n  less: function less(date, format) {\n    return \"The entered date is less than \".concat(date.format(format));\n  }\n};\n/**\n * Builds the response for checkInvalidDate.\n *\n * @param {String} message\n *   The message for response.\n * @param {Boolean} result\n *   The boolean flag for response.\n * * @return {{message: string, result: boolean}}\n */\n\nexports.CALENDAR_ERROR_MESSAGES = CALENDAR_ERROR_MESSAGES;\nfunction buildResponse(message, result) {\n  return {\n    message: message,\n    result: result\n  };\n}\n/**\n * Checks the value for a min date and max date.\n *\n * @param {moment} value\n *   The value to check.\n * @param {[String]} format\n *   A moment formats.\n * @param {Date} maxDate\n *   The max date.\n * @param {Date} minDate\n *   The min date.\n * * @return {{message: string, result: boolean}}\n */\n\nfunction lessOrGreater(value, format, maxDate, minDate) {\n  var message = '';\n  var result = true;\n  if (maxDate && value.isValid()) {\n    var maxDateMoment = (0, _moment.default)(maxDate, format);\n    if (value > maxDateMoment) {\n      message = CALENDAR_ERROR_MESSAGES.greater(maxDateMoment, format);\n      result = false;\n    }\n  }\n  if (minDate && value.isValid()) {\n    var minDateMoment = (0, _moment.default)(minDate, format);\n    if (value < minDateMoment) {\n      message = CALENDAR_ERROR_MESSAGES.less(minDateMoment, format);\n      result = false;\n    }\n  }\n  return {\n    message: message,\n    result: result\n  };\n}\n/**\n * Checks the entered date for validity.\n *\n * @param {String} value\n *   The value to check.\n * @param {[String]} format\n *   A moment formats.\n * @param {Date} maxDate\n *   The max date.\n * @param {Date} minDate\n *   The min date.\n * * @return {{message: string, result: boolean}}\n */\n\nfunction checkInvalidDate(value, format, minDate, maxDate) {\n  var date = (0, _moment.default)(value, format, true);\n  var isValidDate = date.isValid();\n  if (!isValidDate) {\n    var delimeters = value.match(/[^a-z0-9_]/gi);\n    var delimetersRegEx = new RegExp(delimeters.join('|'), 'gi');\n    var inputParts = value.replace(/_*/gi, '').split(delimetersRegEx);\n    var formatParts = format[1] ? format[1].split(delimetersRegEx) : format[0].split(delimetersRegEx);\n    var timeIndex = _lodash.default.findIndex(formatParts, function (part, index) {\n      return part.length === 1 && index === formatParts.length - 1;\n    });\n    var yearIndex = _lodash.default.findIndex(formatParts, function (part) {\n      return part.match(/yyyy/gi);\n    });\n    if (inputParts[yearIndex] / 1000 < 1) {\n      return buildResponse(CALENDAR_ERROR_MESSAGES.INVALID, false);\n    }\n    if (inputParts[0].length === formatParts[0].length) {\n      var modifiedParts = inputParts.map(function (part, index) {\n        var partValue = part;\n        if (!part && index === timeIndex) {\n          partValue = 'AM';\n        } else if (!part) {\n          partValue = '01';\n        }\n        if (delimeters[index]) {\n          partValue = \"\".concat(partValue).concat(delimeters[index]);\n        }\n        return partValue;\n      });\n      var problemDate = (0, _moment.default)(modifiedParts.join(''), format, true);\n      if (problemDate.isValid()) {\n        var checkedLessOrGreater = lessOrGreater(problemDate, format[0], maxDate, minDate);\n        if (!checkedLessOrGreater.result) {\n          var message = checkedLessOrGreater.message,\n            result = checkedLessOrGreater.result;\n          return buildResponse(message, result);\n        }\n        return buildResponse(CALENDAR_ERROR_MESSAGES.INCOMPLETE, false);\n      } else {\n        return buildResponse(CALENDAR_ERROR_MESSAGES.INVALID, false);\n      }\n    } else {\n      return buildResponse(CALENDAR_ERROR_MESSAGES.INVALID, false);\n    }\n  } else if (isValidDate && value.indexOf('_') === -1) {\n    var _checkedLessOrGreater = lessOrGreater(date, format[0], maxDate, minDate);\n    if (!_checkedLessOrGreater.result) {\n      var _message = _checkedLessOrGreater.message,\n        _result = _checkedLessOrGreater.result;\n      return buildResponse(_message, _result);\n    }\n  }\n  return buildResponse('', true);\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","CALENDAR_ERROR_MESSAGES","checkInvalidDate","lessOrGreater","require","_moment","_interopRequireDefault","_lodash","obj","__esModule","default","INVALID","INCOMPLETE","greater","date","format","concat","less","buildResponse","message","result","maxDate","minDate","isValid","maxDateMoment","minDateMoment","isValidDate","delimeters","match","delimetersRegEx","RegExp","join","inputParts","replace","split","formatParts","timeIndex","findIndex","part","index","length","yearIndex","modifiedParts","map","partValue","problemDate","checkedLessOrGreater","indexOf","_checkedLessOrGreater","_message","_result"],"sources":["D:/task/node_modules/formiojs/utils/calendarUtils.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CALENDAR_ERROR_MESSAGES = void 0;\nexports.checkInvalidDate = checkInvalidDate;\nexports.lessOrGreater = lessOrGreater;\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.match.js\");\n\nrequire(\"core-js/modules/es.regexp.constructor.js\");\n\nrequire(\"core-js/modules/es.regexp.to-string.js\");\n\nrequire(\"core-js/modules/es.array.join.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.string.replace.js\");\n\nrequire(\"core-js/modules/es.array.find-index.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CALENDAR_ERROR_MESSAGES = {\n  INVALID: 'You entered the Invalid Date',\n  INCOMPLETE: 'You entered an incomplete date.',\n  greater: function greater(date, format) {\n    return \"The entered date is greater than \".concat(date.format(format));\n  },\n  less: function less(date, format) {\n    return \"The entered date is less than \".concat(date.format(format));\n  }\n};\n/**\n * Builds the response for checkInvalidDate.\n *\n * @param {String} message\n *   The message for response.\n * @param {Boolean} result\n *   The boolean flag for response.\n * * @return {{message: string, result: boolean}}\n */\n\nexports.CALENDAR_ERROR_MESSAGES = CALENDAR_ERROR_MESSAGES;\n\nfunction buildResponse(message, result) {\n  return {\n    message: message,\n    result: result\n  };\n}\n/**\n * Checks the value for a min date and max date.\n *\n * @param {moment} value\n *   The value to check.\n * @param {[String]} format\n *   A moment formats.\n * @param {Date} maxDate\n *   The max date.\n * @param {Date} minDate\n *   The min date.\n * * @return {{message: string, result: boolean}}\n */\n\n\nfunction lessOrGreater(value, format, maxDate, minDate) {\n  var message = '';\n  var result = true;\n\n  if (maxDate && value.isValid()) {\n    var maxDateMoment = (0, _moment.default)(maxDate, format);\n\n    if (value > maxDateMoment) {\n      message = CALENDAR_ERROR_MESSAGES.greater(maxDateMoment, format);\n      result = false;\n    }\n  }\n\n  if (minDate && value.isValid()) {\n    var minDateMoment = (0, _moment.default)(minDate, format);\n\n    if (value < minDateMoment) {\n      message = CALENDAR_ERROR_MESSAGES.less(minDateMoment, format);\n      result = false;\n    }\n  }\n\n  return {\n    message: message,\n    result: result\n  };\n}\n/**\n * Checks the entered date for validity.\n *\n * @param {String} value\n *   The value to check.\n * @param {[String]} format\n *   A moment formats.\n * @param {Date} maxDate\n *   The max date.\n * @param {Date} minDate\n *   The min date.\n * * @return {{message: string, result: boolean}}\n */\n\n\nfunction checkInvalidDate(value, format, minDate, maxDate) {\n  var date = (0, _moment.default)(value, format, true);\n  var isValidDate = date.isValid();\n\n  if (!isValidDate) {\n    var delimeters = value.match(/[^a-z0-9_]/gi);\n    var delimetersRegEx = new RegExp(delimeters.join('|'), 'gi');\n    var inputParts = value.replace(/_*/gi, '').split(delimetersRegEx);\n    var formatParts = format[1] ? format[1].split(delimetersRegEx) : format[0].split(delimetersRegEx);\n\n    var timeIndex = _lodash.default.findIndex(formatParts, function (part, index) {\n      return part.length === 1 && index === formatParts.length - 1;\n    });\n\n    var yearIndex = _lodash.default.findIndex(formatParts, function (part) {\n      return part.match(/yyyy/gi);\n    });\n\n    if (inputParts[yearIndex] / 1000 < 1) {\n      return buildResponse(CALENDAR_ERROR_MESSAGES.INVALID, false);\n    }\n\n    if (inputParts[0].length === formatParts[0].length) {\n      var modifiedParts = inputParts.map(function (part, index) {\n        var partValue = part;\n\n        if (!part && index === timeIndex) {\n          partValue = 'AM';\n        } else if (!part) {\n          partValue = '01';\n        }\n\n        if (delimeters[index]) {\n          partValue = \"\".concat(partValue).concat(delimeters[index]);\n        }\n\n        return partValue;\n      });\n      var problemDate = (0, _moment.default)(modifiedParts.join(''), format, true);\n\n      if (problemDate.isValid()) {\n        var checkedLessOrGreater = lessOrGreater(problemDate, format[0], maxDate, minDate);\n\n        if (!checkedLessOrGreater.result) {\n          var message = checkedLessOrGreater.message,\n              result = checkedLessOrGreater.result;\n          return buildResponse(message, result);\n        }\n\n        return buildResponse(CALENDAR_ERROR_MESSAGES.INCOMPLETE, false);\n      } else {\n        return buildResponse(CALENDAR_ERROR_MESSAGES.INVALID, false);\n      }\n    } else {\n      return buildResponse(CALENDAR_ERROR_MESSAGES.INVALID, false);\n    }\n  } else if (isValidDate && value.indexOf('_') === -1) {\n    var _checkedLessOrGreater = lessOrGreater(date, format[0], maxDate, minDate);\n\n    if (!_checkedLessOrGreater.result) {\n      var _message = _checkedLessOrGreater.message,\n          _result = _checkedLessOrGreater.result;\n      return buildResponse(_message, _result);\n    }\n  }\n\n  return buildResponse('', true);\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}