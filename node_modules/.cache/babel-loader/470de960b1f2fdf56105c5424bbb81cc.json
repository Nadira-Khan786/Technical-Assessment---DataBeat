{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nrequire(\"core-js/modules/es.reflect.construct.js\");\nrequire(\"core-js/modules/es.reflect.get.js\");\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\nrequire(\"core-js/modules/es.symbol.js\");\nrequire(\"core-js/modules/es.symbol.description.js\");\nrequire(\"core-js/modules/es.symbol.iterator.js\");\nrequire(\"core-js/modules/es.array.iterator.js\");\nrequire(\"core-js/modules/es.string.iterator.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nrequire(\"core-js/modules/es.array.from.js\");\nrequire(\"core-js/modules/es.array.slice.js\");\nrequire(\"core-js/modules/es.regexp.exec.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\nvar _Formio = require(\"./Formio\");\nvar _WebformBuilder2 = _interopRequireDefault(require(\"./WebformBuilder\"));\nvar _utils = require(\"./utils/utils\");\nvar _formUtils = require(\"./utils/formUtils\");\nvar _builder = _interopRequireDefault(require(\"./utils/builder\"));\nvar _PDF = _interopRequireDefault(require(\"./PDF\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nvar PDFBuilder = /*#__PURE__*/function (_WebformBuilder) {\n  _inherits(PDFBuilder, _WebformBuilder);\n  var _super = _createSuper(PDFBuilder);\n  function PDFBuilder() {\n    var _this;\n    _classCallCheck(this, PDFBuilder);\n    var element, options;\n    if (arguments[0] instanceof HTMLElement || arguments[1]) {\n      element = arguments[0];\n      options = arguments[1];\n    } else {\n      options = arguments[0];\n    } // Force superclass to skip the automatic init; we'll trigger it manually\n\n    options.skipInit = true;\n    options.display = 'pdf';\n    if (element) {\n      _this = _super.call(this, element, options);\n    } else {\n      _this = _super.call(this, options);\n    }\n    _this.dragDropEnabled = false;\n    return _possibleConstructorReturn(_this);\n  }\n  _createClass(PDFBuilder, [{\n    key: \"defaultGroups\",\n    get: function get() {\n      return {\n        pdf: {\n          title: 'PDF Fields',\n          weight: 0,\n          default: true,\n          components: {\n            textfield: true,\n            number: true,\n            password: true,\n            email: true,\n            phoneNumber: true,\n            currency: true,\n            checkbox: true,\n            signature: true,\n            select: true,\n            textarea: true,\n            datetime: true,\n            file: true,\n            htmlelement: true,\n            signrequestsignature: true\n          }\n        },\n        basic: false,\n        advanced: false,\n        layout: false,\n        data: false,\n        premium: false,\n        resource: false\n      };\n    }\n  }, {\n    key: \"hasPDF\",\n    get: function get() {\n      return _lodash.default.has(this.webform.form, 'settings.pdf');\n    }\n  }, {\n    key: \"projectUrl\",\n    get: function get() {\n      return this.options.projectUrl || _Formio.GlobalFormio.getProjectUrl();\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.options.attachMode = 'builder';\n      this.webform = this.webform || this.createForm(this.options);\n      this.webform.init();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var result = this.renderTemplate('pdfBuilder', {\n        sidebar: this.renderTemplate('builderSidebar', {\n          scrollEnabled: this.sideBarScroll,\n          groupOrder: this.groupOrder,\n          groupId: \"builder-sidebar-\".concat(this.id),\n          groups: this.groupOrder.map(function (groupKey) {\n            return _this2.renderTemplate('builderSidebarGroup', {\n              group: _this2.groups[groupKey],\n              groupKey: groupKey,\n              groupId: \"builder-sidebar-\".concat(_this2.id),\n              subgroups: _this2.groups[groupKey].subgroups.map(function (group) {\n                return _this2.renderTemplate('builderSidebarGroup', {\n                  group: group,\n                  groupKey: group.key,\n                  groupId: \"group-container-\".concat(groupKey),\n                  subgroups: []\n                });\n              })\n            });\n          })\n        }),\n        form: this.hasPDF ? this.webform.render() : this.renderTemplate('pdfBuilderUpload', {})\n      });\n      return result;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this3 = this;\n\n      // PDF Upload\n      if (!this.hasPDF) {\n        this.loadRefs(element, {\n          'fileDrop': 'single',\n          'fileBrowse': 'single',\n          'hiddenFileInputElement': 'single',\n          'uploadError': 'single',\n          'uploadProgress': 'single',\n          'uploadProgressWrapper': 'single',\n          'dragDropText': 'single'\n        });\n        this.addEventListener(this.refs['pdf-upload-button'], 'click', function (event) {\n          event.preventDefault();\n        }); // Init the upload error.\n\n        if (!this.projectUrl) {\n          this.setUploadError('Form options.projectUrl not set. Please set the \"projectUrl\" property of the options for this form or use Formio.setProjectUrl(). This setting is necessary to upload a pdf background.');\n        } else {\n          this.setUploadError();\n        }\n        if (this.refs.fileDrop) {\n          var _element = this;\n          this.addEventListener(this.refs.fileDrop, 'dragover', function (event) {\n            this.className = 'fileSelector fileDragOver';\n            event.preventDefault();\n          });\n          this.addEventListener(this.refs.fileDrop, 'dragleave', function (event) {\n            this.className = 'fileSelector';\n            event.preventDefault();\n          });\n          this.addEventListener(this.refs.fileDrop, 'drop', function (event) {\n            this.className = 'fileSelector';\n            event.preventDefault();\n            _element.upload(event.dataTransfer.files[0]);\n            return false;\n          });\n        }\n        if (this.refs.fileBrowse && this.refs.hiddenFileInputElement) {\n          this.addEventListener(this.refs.fileBrowse, 'click', function (event) {\n            event.preventDefault(); // There is no direct way to trigger a file dialog. To work around this, create an input of type file and trigger\n            // a click event on it.\n\n            if (typeof _this3.refs.hiddenFileInputElement.trigger === 'function') {\n              _this3.refs.hiddenFileInputElement.trigger('click');\n            } else {\n              _this3.refs.hiddenFileInputElement.click();\n            }\n          });\n          this.addEventListener(this.refs.hiddenFileInputElement, 'change', function () {\n            if (!_this3.refs.hiddenFileInputElement.value) {\n              return;\n            }\n            _this3.upload(_this3.refs.hiddenFileInputElement.files[0]);\n            _this3.refs.hiddenFileInputElement.value = '';\n          });\n        }\n        return _nativePromiseOnly.default.resolve();\n      } // Normal PDF Builder\n\n      return _get(_getPrototypeOf(PDFBuilder.prototype), \"attach\", this).call(this, element).then(function () {\n        _this3.loadRefs(_this3.element, {\n          iframeDropzone: 'single',\n          'sidebar-container': 'multiple',\n          'sidebar': 'single'\n        });\n        _this3.afterAttach();\n        return _this3.element;\n      });\n    }\n  }, {\n    key: \"afterAttach\",\n    value: function afterAttach() {\n      var _this4 = this;\n      this.on('saveComponent', function (component) {\n        _this4.webform.postMessage({\n          name: 'updateElement',\n          data: component\n        });\n      });\n      this.on('removeComponent', function (component) {\n        _this4.webform.postMessage({\n          name: 'removeElement',\n          data: component\n        });\n      });\n      this.initIframeEvents();\n      this.updateDropzoneDimensions();\n      var sidebar = this.refs.sidebar;\n      if (sidebar) {\n        this.addClass(sidebar, 'disabled');\n        this.webform.on('iframe-ready', function () {\n          _this4.pdfLoaded = true;\n          _this4.updateDragAndDrop();\n          _this4.removeClass(sidebar, 'disabled');\n        }, true);\n      }\n    }\n  }, {\n    key: \"upload\",\n    value: function upload(file) {\n      var _this5 = this;\n      var formio = new _Formio.GlobalFormio(this.projectUrl);\n      if (this.refs.dragDropText) {\n        this.refs.dragDropText.style.display = 'none';\n      }\n      if (this.refs.uploadProgressWrapper) {\n        this.refs.uploadProgressWrapper.style.display = 'inherit';\n      }\n      formio.uploadFile('url', file, file, '', function (event) {\n        if (_this5.refs.uploadProgress) {\n          var progress = Math.floor(event.loaded / event.total * 100);\n          _this5.refs.uploadProgress.style.width = \"\".concat(progress, \"%\");\n          if (progress > 98) {\n            _this5.refs.uploadProgress.innerHTML = _this5.t('Converting PDF. Please wait.');\n          } else {\n            _this5.refs.uploadProgress.innerHTML = \"\".concat(_this5.t('Uploading'), \" \").concat(progress, \"%\");\n          }\n        }\n      }, \"\".concat(this.projectUrl, \"/upload\"), {}, 'file').then(function (result) {\n        _lodash.default.set(_this5.webform.form, 'settings.pdf', {\n          id: result.data.file,\n          src: \"\".concat(result.data.filesServer).concat(result.data.path)\n        });\n        if (_this5.refs.dragDropText) {\n          _this5.refs.dragDropText.style.display = 'inherit';\n        }\n        if (_this5.refs.uploadProgressWrapper) {\n          _this5.refs.uploadProgressWrapper.style.display = 'none';\n        }\n        _this5.emit('pdfUploaded', result.data);\n        _this5.redraw();\n      }).catch(function (err) {\n        return _this5.setUploadError(err);\n      });\n    }\n  }, {\n    key: \"setUploadError\",\n    value: function setUploadError(message) {\n      if (!this.refs.uploadError) {\n        return;\n      }\n      this.refs.uploadError.style.display = message ? '' : 'none';\n      this.refs.uploadError.innerHTML = message;\n    }\n  }, {\n    key: \"createForm\",\n    value: function createForm(options) {\n      var _this6 = this;\n\n      // Instantiate the webform from the PDF class instead of Webform\n      options.skipInit = false;\n      options.hideLoader = true;\n      this.webform = new _PDF.default(this.element, options);\n      this.webform.on('attach', function () {\n        // If the dropzone exists but has been removed in a PDF rebuild, reinstate it\n        if (_this6.refs.iframeDropzone && !_toConsumableArray(_this6.refs.form.children).includes(_this6.refs.iframeDropzone)) {\n          _this6.prependTo(_this6.refs.iframeDropzone, _this6.refs.form);\n        }\n      });\n      return this.webform;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy(deleteFromGlobal) {\n      _get(_getPrototypeOf(PDFBuilder.prototype), \"destroy\", this).call(this, deleteFromGlobal);\n      this.webform.destroy(deleteFromGlobal);\n    } // d8b 8888888888                                                                              888\n    // Y8P 888                                                                                     888\n    //     888                                                                                     888\n    // 888 8888888 888d888 8888b.  88888b.d88b.   .d88b.        .d88b.  888  888  .d88b.  88888b.  888888 .d8888b\n    // 888 888     888P\"      \"88b 888 \"888 \"88b d8P  Y8b      d8P  Y8b 888  888 d8P  Y8b 888 \"88b 888    88K\n    // 888 888     888    .d888888 888  888  888 88888888      88888888 Y88  88P 88888888 888  888 888    \"Y8888b.\n    // 888 888     888    888  888 888  888  888 Y8b.          Y8b.      Y8bd8P  Y8b.     888  888 Y88b.       X88\n    // 888 888     888    \"Y888888 888  888  888  \"Y8888        \"Y8888    Y88P    \"Y8888  888  888  \"Y888  88888P'\n  }, {\n    key: \"getParentContainer\",\n    value: function getParentContainer(component) {\n      var container = [];\n      var originalComponent = null;\n      (0, _formUtils.eachComponent)(this.webform._form.components, function (comp, path, components) {\n        if (comp.id === component.component.id) {\n          container = components;\n          originalComponent = comp;\n          return true;\n        }\n      }, true);\n      return {\n        formioComponent: component.parent,\n        formioContainer: container,\n        originalComponent: originalComponent\n      };\n    }\n  }, {\n    key: \"initIframeEvents\",\n    value: function initIframeEvents() {\n      var _this7 = this;\n      this.webform.off('iframe-elementUpdate');\n      this.webform.off('iframe-componentUpdate');\n      this.webform.off('iframe-componentClick');\n      this.webform.on('iframe-elementUpdate', function (schema) {\n        var component = _this7.webform.getComponentById(schema.id);\n        if (component && component.component) {\n          var isNew = true;\n          component.component.overlay = {\n            page: schema.page,\n            left: schema.left,\n            top: schema.top,\n            height: schema.height,\n            width: schema.width\n          };\n          if (!_this7.options.noNewEdit && !component.component.noNewEdit) {\n            _this7.editComponent(component.component, _this7.getParentContainer(component), isNew);\n          }\n          _this7.emit('updateComponent', component.component);\n        }\n        return component;\n      });\n      this.webform.on('iframe-componentUpdate', function (schema) {\n        var component = _this7.webform.getComponentById(schema.id);\n        if (component && component.component) {\n          component.component.overlay = {\n            page: schema.overlay.page,\n            left: schema.overlay.left,\n            top: schema.overlay.top,\n            height: schema.overlay.height,\n            width: schema.overlay.width\n          };\n          _this7.emit('updateComponent', component.component);\n          _this7.emit('change', _this7.form);\n        }\n        return component;\n      });\n      this.webform.on('iframe-componentClick', function (schema) {\n        var component = _this7.webform.getComponentById(schema.id);\n        if (component) {\n          _this7.editComponent(component.component, _this7.getParentContainer(component));\n        }\n      }, true);\n    } // 8888888b.                                                                   888                   d8b\n    // 888  \"Y88b                                                                  888                   Y8P\n    // 888    888                                                                  888\n    // 888    888 888d888 .d88b.  88888b. 88888888  .d88b.  88888b.   .d88b.       888  .d88b.   .d88b.  888  .d8888b\n    // 888    888 888P\"  d88\"\"88b 888 \"88b   d88P  d88\"\"88b 888 \"88b d8P  Y8b      888 d88\"\"88b d88P\"88b 888 d88P\"\n    // 888    888 888    888  888 888  888  d88P   888  888 888  888 88888888      888 888  888 888  888 888 888\n    // 888  .d88P 888    Y88..88P 888 d88P d88P    Y88..88P 888  888 Y8b.          888 Y88..88P Y88b 888 888 Y88b.\n    // 8888888P\"  888     \"Y88P\"  88888P\" 88888888  \"Y88P\"  888  888  \"Y8888       888  \"Y88P\"   \"Y88888 888  \"Y8888P\n    //                            888                                                                888\n    //                            888                                                           Y8b d88P\n    //                            888                                                            \"Y88P\"\n  }, {\n    key: \"initDropzoneEvents\",\n    value: function initDropzoneEvents() {\n      if (!this.refs.iframeDropzone) {\n        return;\n      } // This is required per HTML spec in order for the drop event to fire\n\n      this.removeEventListener(this.refs.iframeDropzone, 'dragover');\n      this.removeEventListener(this.refs.iframeDropzone, 'drop');\n      this.addEventListener(this.refs.iframeDropzone, 'dragover', function (e) {\n        e.preventDefault();\n        return false;\n      });\n      this.addEventListener(this.refs.iframeDropzone, 'drop', this.onDropzoneDrop.bind(this));\n    }\n  }, {\n    key: \"updateDragAndDrop\",\n    value: function updateDragAndDrop() {\n      if (!this.pdfLoaded) {\n        return;\n      }\n      this.initDropzoneEvents();\n      this.prepSidebarComponentsForDrag();\n    }\n  }, {\n    key: \"prepSidebarComponentsForDrag\",\n    value: function prepSidebarComponentsForDrag() {\n      var _this8 = this;\n      if (!this.refs['sidebar-container']) {\n        return;\n      }\n      this.refs['sidebar-container'].forEach(function (container) {\n        _toConsumableArray(container.children).forEach(function (el) {\n          el.draggable = true;\n          el.setAttribute('draggable', true);\n          _this8.removeEventListener(el, 'dragstart');\n          _this8.removeEventListener(el, 'dragend');\n          _this8.addEventListener(el, 'dragstart', _this8.onDragStart.bind(_this8), true);\n          _this8.addEventListener(el, 'dragend', _this8.onDragEnd.bind(_this8), true);\n          _this8.addEventListener(el, 'drag', function (e) {\n            e.target.style.cursor = 'none';\n          });\n        });\n      });\n    }\n  }, {\n    key: \"updateDropzoneDimensions\",\n    value: function updateDropzoneDimensions() {\n      if (!this.refs.iframeDropzone) {\n        return;\n      }\n      var iframeRect = (0, _utils.getElementRect)(this.webform.refs.iframeContainer);\n      this.refs.iframeDropzone.style.height = iframeRect && iframeRect.height ? \"\".concat(iframeRect.height, \"px\") : '1000px';\n      this.refs.iframeDropzone.style.width = iframeRect && iframeRect.width ? \"\".concat(iframeRect.width, \"px\") : '100%';\n    }\n  }, {\n    key: \"onDragStart\",\n    value: function onDragStart(e) {\n      // Taking the current offset of a dragged item relative to the cursor\n      var _e$offsetX = e.offsetX,\n        offsetX = _e$offsetX === void 0 ? 0 : _e$offsetX,\n        _e$offsetY = e.offsetY,\n        offsetY = _e$offsetY === void 0 ? 0 : _e$offsetY;\n      this.itemOffsetX = offsetX;\n      this.itemOffsetY = offsetY;\n      e.dataTransfer.setData('text', '');\n      this.updateDropzoneDimensions();\n      this.addClass(this.refs.iframeDropzone, 'enabled');\n    }\n  }, {\n    key: \"onDropzoneDrop\",\n    value: function onDropzoneDrop(e) {\n      this.dropEvent = e;\n      e.preventDefault();\n      return false;\n    }\n  }, {\n    key: \"onDragEnd\",\n    value: function onDragEnd(e) {\n      // IMPORTANT - must retrieve offsets BEFORE disabling the dropzone - offsets will\n      // reflect absolute positioning if accessed after the target element is hidden\n      var layerX = this.dropEvent ? this.dropEvent.layerX : null;\n      var layerY = this.dropEvent ? this.dropEvent.layerY : null;\n      var WIDTH = 100;\n      var HEIGHT = 20; // Always disable the dropzone on drag end\n\n      this.removeClass(this.refs.iframeDropzone, 'enabled'); // If there hasn't been a drop event on the dropzone, we're done\n\n      if (!this.dropEvent) {\n        return;\n      }\n      var element = e.target;\n      var type = element.getAttribute('data-type');\n      var key = element.getAttribute('data-key');\n      var group = element.getAttribute('data-group');\n      var schema = (0, _utils.fastCloneDeep)(this.schemas[type]);\n      if (key && group) {\n        var info = this.getComponentInfo(key, group);\n        _lodash.default.merge(schema, info);\n      } // Set a unique key for this component.\n\n      _builder.default.uniquify([this.webform._form], schema);\n      this.webform._form.components.push(schema);\n      schema.overlay = {\n        top: layerY - this.itemOffsetY + HEIGHT,\n        left: layerX - this.itemOffsetX,\n        width: WIDTH,\n        height: HEIGHT\n      };\n      this.webform.addComponent(schema, {}, null, true);\n      this.webform.postMessage({\n        name: 'addElement',\n        data: schema\n      });\n      this.emit('addComponent', schema, this.webform, schema.key, this.webform.component.components.length, !this.options.noNewEdit && !schema.noNewEdit); // Delete the stored drop event now that it's been handled\n\n      this.dropEvent = null;\n      e.target.style.cursor = 'default';\n    }\n  }, {\n    key: \"highlightInvalidComponents\",\n    value: function highlightInvalidComponents() {\n      var _this9 = this;\n      var repeatablePaths = this.findRepeatablePaths(); // update elements which path was duplicated if any pathes have been changed\n\n      if (!_lodash.default.isEqual(this.repeatablePaths, repeatablePaths)) {\n        (0, _formUtils.eachComponent)(this.webform.getComponents(), function (comp, path) {\n          if (_this9.repeatablePaths.includes(path)) {\n            _this9.webform.postMessage({\n              name: 'updateElement',\n              data: comp.component\n            });\n          }\n        });\n        this.repeatablePaths = repeatablePaths;\n      }\n      if (!repeatablePaths.length) {\n        return;\n      }\n      (0, _formUtils.eachComponent)(this.webform.getComponents(), function (comp, path) {\n        if (_this9.repeatablePaths.includes(path)) {\n          _this9.webform.postMessage({\n            name: 'showBuilderErrors',\n            data: {\n              compId: comp.component.id,\n              errorMessage: \"API Key is not unique: \".concat(comp.key)\n            }\n          });\n        }\n      });\n    }\n  }]);\n  return PDFBuilder;\n}(_WebformBuilder2.default);\nexports.default = PDFBuilder;","map":{"version":3,"names":["_typeof","obj","Symbol","iterator","constructor","prototype","require","Object","defineProperty","exports","value","default","_lodash","_interopRequireDefault","_nativePromiseOnly","_Formio","_WebformBuilder2","_utils","_formUtils","_builder","_PDF","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","toString","call","slice","name","Array","from","test","iter","isArray","len","length","i","arr2","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","_get","Reflect","get","bind","property","receiver","base","_superPropBase","desc","getOwnPropertyDescriptor","arguments","apply","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","PDFBuilder","_WebformBuilder","_super","_this","element","options","HTMLElement","skipInit","display","dragDropEnabled","pdf","title","weight","components","textfield","number","password","email","phoneNumber","currency","checkbox","signature","select","textarea","datetime","file","htmlelement","signrequestsignature","basic","advanced","layout","data","premium","resource","has","webform","form","projectUrl","GlobalFormio","getProjectUrl","init","attachMode","createForm","render","_this2","renderTemplate","sidebar","scrollEnabled","sideBarScroll","groupOrder","groupId","concat","id","groups","map","groupKey","group","subgroups","hasPDF","attach","_this3","loadRefs","addEventListener","refs","event","preventDefault","setUploadError","fileDrop","_element","className","upload","dataTransfer","files","fileBrowse","hiddenFileInputElement","trigger","click","resolve","then","iframeDropzone","afterAttach","_this4","on","component","postMessage","initIframeEvents","updateDropzoneDimensions","addClass","pdfLoaded","updateDragAndDrop","removeClass","_this5","formio","dragDropText","style","uploadProgressWrapper","uploadFile","uploadProgress","progress","Math","floor","loaded","total","width","innerHTML","t","set","src","filesServer","path","emit","redraw","catch","err","message","uploadError","_this6","hideLoader","children","includes","prependTo","destroy","deleteFromGlobal","getParentContainer","container","originalComponent","eachComponent","_form","comp","formioComponent","parent","formioContainer","_this7","off","schema","getComponentById","isNew","overlay","page","left","top","height","noNewEdit","editComponent","initDropzoneEvents","removeEventListener","onDropzoneDrop","prepSidebarComponentsForDrag","_this8","forEach","el","draggable","setAttribute","onDragStart","onDragEnd","cursor","iframeRect","getElementRect","iframeContainer","_e$offsetX","offsetX","_e$offsetY","offsetY","itemOffsetX","itemOffsetY","setData","dropEvent","layerX","layerY","WIDTH","HEIGHT","type","getAttribute","fastCloneDeep","schemas","info","getComponentInfo","merge","uniquify","push","addComponent","highlightInvalidComponents","_this9","repeatablePaths","findRepeatablePaths","isEqual","getComponents","compId","errorMessage"],"sources":["D:/task/node_modules/formiojs/PDFBuilder.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.reflect.get.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nrequire(\"core-js/modules/es.string.includes.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nvar _Formio = require(\"./Formio\");\n\nvar _WebformBuilder2 = _interopRequireDefault(require(\"./WebformBuilder\"));\n\nvar _utils = require(\"./utils/utils\");\n\nvar _formUtils = require(\"./utils/formUtils\");\n\nvar _builder = _interopRequireDefault(require(\"./utils/builder\"));\n\nvar _PDF = _interopRequireDefault(require(\"./PDF\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar PDFBuilder = /*#__PURE__*/function (_WebformBuilder) {\n  _inherits(PDFBuilder, _WebformBuilder);\n\n  var _super = _createSuper(PDFBuilder);\n\n  function PDFBuilder() {\n    var _this;\n\n    _classCallCheck(this, PDFBuilder);\n\n    var element, options;\n\n    if (arguments[0] instanceof HTMLElement || arguments[1]) {\n      element = arguments[0];\n      options = arguments[1];\n    } else {\n      options = arguments[0];\n    } // Force superclass to skip the automatic init; we'll trigger it manually\n\n\n    options.skipInit = true;\n    options.display = 'pdf';\n\n    if (element) {\n      _this = _super.call(this, element, options);\n    } else {\n      _this = _super.call(this, options);\n    }\n\n    _this.dragDropEnabled = false;\n    return _possibleConstructorReturn(_this);\n  }\n\n  _createClass(PDFBuilder, [{\n    key: \"defaultGroups\",\n    get: function get() {\n      return {\n        pdf: {\n          title: 'PDF Fields',\n          weight: 0,\n          default: true,\n          components: {\n            textfield: true,\n            number: true,\n            password: true,\n            email: true,\n            phoneNumber: true,\n            currency: true,\n            checkbox: true,\n            signature: true,\n            select: true,\n            textarea: true,\n            datetime: true,\n            file: true,\n            htmlelement: true,\n            signrequestsignature: true\n          }\n        },\n        basic: false,\n        advanced: false,\n        layout: false,\n        data: false,\n        premium: false,\n        resource: false\n      };\n    }\n  }, {\n    key: \"hasPDF\",\n    get: function get() {\n      return _lodash.default.has(this.webform.form, 'settings.pdf');\n    }\n  }, {\n    key: \"projectUrl\",\n    get: function get() {\n      return this.options.projectUrl || _Formio.GlobalFormio.getProjectUrl();\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.options.attachMode = 'builder';\n      this.webform = this.webform || this.createForm(this.options);\n      this.webform.init();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var result = this.renderTemplate('pdfBuilder', {\n        sidebar: this.renderTemplate('builderSidebar', {\n          scrollEnabled: this.sideBarScroll,\n          groupOrder: this.groupOrder,\n          groupId: \"builder-sidebar-\".concat(this.id),\n          groups: this.groupOrder.map(function (groupKey) {\n            return _this2.renderTemplate('builderSidebarGroup', {\n              group: _this2.groups[groupKey],\n              groupKey: groupKey,\n              groupId: \"builder-sidebar-\".concat(_this2.id),\n              subgroups: _this2.groups[groupKey].subgroups.map(function (group) {\n                return _this2.renderTemplate('builderSidebarGroup', {\n                  group: group,\n                  groupKey: group.key,\n                  groupId: \"group-container-\".concat(groupKey),\n                  subgroups: []\n                });\n              })\n            });\n          })\n        }),\n        form: this.hasPDF ? this.webform.render() : this.renderTemplate('pdfBuilderUpload', {})\n      });\n      return result;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this3 = this;\n\n      // PDF Upload\n      if (!this.hasPDF) {\n        this.loadRefs(element, {\n          'fileDrop': 'single',\n          'fileBrowse': 'single',\n          'hiddenFileInputElement': 'single',\n          'uploadError': 'single',\n          'uploadProgress': 'single',\n          'uploadProgressWrapper': 'single',\n          'dragDropText': 'single'\n        });\n        this.addEventListener(this.refs['pdf-upload-button'], 'click', function (event) {\n          event.preventDefault();\n        }); // Init the upload error.\n\n        if (!this.projectUrl) {\n          this.setUploadError('Form options.projectUrl not set. Please set the \"projectUrl\" property of the options for this form or use Formio.setProjectUrl(). This setting is necessary to upload a pdf background.');\n        } else {\n          this.setUploadError();\n        }\n\n        if (this.refs.fileDrop) {\n          var _element = this;\n\n          this.addEventListener(this.refs.fileDrop, 'dragover', function (event) {\n            this.className = 'fileSelector fileDragOver';\n            event.preventDefault();\n          });\n          this.addEventListener(this.refs.fileDrop, 'dragleave', function (event) {\n            this.className = 'fileSelector';\n            event.preventDefault();\n          });\n          this.addEventListener(this.refs.fileDrop, 'drop', function (event) {\n            this.className = 'fileSelector';\n            event.preventDefault();\n\n            _element.upload(event.dataTransfer.files[0]);\n\n            return false;\n          });\n        }\n\n        if (this.refs.fileBrowse && this.refs.hiddenFileInputElement) {\n          this.addEventListener(this.refs.fileBrowse, 'click', function (event) {\n            event.preventDefault(); // There is no direct way to trigger a file dialog. To work around this, create an input of type file and trigger\n            // a click event on it.\n\n            if (typeof _this3.refs.hiddenFileInputElement.trigger === 'function') {\n              _this3.refs.hiddenFileInputElement.trigger('click');\n            } else {\n              _this3.refs.hiddenFileInputElement.click();\n            }\n          });\n          this.addEventListener(this.refs.hiddenFileInputElement, 'change', function () {\n            if (!_this3.refs.hiddenFileInputElement.value) {\n              return;\n            }\n\n            _this3.upload(_this3.refs.hiddenFileInputElement.files[0]);\n\n            _this3.refs.hiddenFileInputElement.value = '';\n          });\n        }\n\n        return _nativePromiseOnly.default.resolve();\n      } // Normal PDF Builder\n\n\n      return _get(_getPrototypeOf(PDFBuilder.prototype), \"attach\", this).call(this, element).then(function () {\n        _this3.loadRefs(_this3.element, {\n          iframeDropzone: 'single',\n          'sidebar-container': 'multiple',\n          'sidebar': 'single'\n        });\n\n        _this3.afterAttach();\n\n        return _this3.element;\n      });\n    }\n  }, {\n    key: \"afterAttach\",\n    value: function afterAttach() {\n      var _this4 = this;\n\n      this.on('saveComponent', function (component) {\n        _this4.webform.postMessage({\n          name: 'updateElement',\n          data: component\n        });\n      });\n      this.on('removeComponent', function (component) {\n        _this4.webform.postMessage({\n          name: 'removeElement',\n          data: component\n        });\n      });\n      this.initIframeEvents();\n      this.updateDropzoneDimensions();\n      var sidebar = this.refs.sidebar;\n\n      if (sidebar) {\n        this.addClass(sidebar, 'disabled');\n        this.webform.on('iframe-ready', function () {\n          _this4.pdfLoaded = true;\n\n          _this4.updateDragAndDrop();\n\n          _this4.removeClass(sidebar, 'disabled');\n        }, true);\n      }\n    }\n  }, {\n    key: \"upload\",\n    value: function upload(file) {\n      var _this5 = this;\n\n      var formio = new _Formio.GlobalFormio(this.projectUrl);\n\n      if (this.refs.dragDropText) {\n        this.refs.dragDropText.style.display = 'none';\n      }\n\n      if (this.refs.uploadProgressWrapper) {\n        this.refs.uploadProgressWrapper.style.display = 'inherit';\n      }\n\n      formio.uploadFile('url', file, file, '', function (event) {\n        if (_this5.refs.uploadProgress) {\n          var progress = Math.floor(event.loaded / event.total * 100);\n          _this5.refs.uploadProgress.style.width = \"\".concat(progress, \"%\");\n\n          if (progress > 98) {\n            _this5.refs.uploadProgress.innerHTML = _this5.t('Converting PDF. Please wait.');\n          } else {\n            _this5.refs.uploadProgress.innerHTML = \"\".concat(_this5.t('Uploading'), \" \").concat(progress, \"%\");\n          }\n        }\n      }, \"\".concat(this.projectUrl, \"/upload\"), {}, 'file').then(function (result) {\n        _lodash.default.set(_this5.webform.form, 'settings.pdf', {\n          id: result.data.file,\n          src: \"\".concat(result.data.filesServer).concat(result.data.path)\n        });\n\n        if (_this5.refs.dragDropText) {\n          _this5.refs.dragDropText.style.display = 'inherit';\n        }\n\n        if (_this5.refs.uploadProgressWrapper) {\n          _this5.refs.uploadProgressWrapper.style.display = 'none';\n        }\n\n        _this5.emit('pdfUploaded', result.data);\n\n        _this5.redraw();\n      }).catch(function (err) {\n        return _this5.setUploadError(err);\n      });\n    }\n  }, {\n    key: \"setUploadError\",\n    value: function setUploadError(message) {\n      if (!this.refs.uploadError) {\n        return;\n      }\n\n      this.refs.uploadError.style.display = message ? '' : 'none';\n      this.refs.uploadError.innerHTML = message;\n    }\n  }, {\n    key: \"createForm\",\n    value: function createForm(options) {\n      var _this6 = this;\n\n      // Instantiate the webform from the PDF class instead of Webform\n      options.skipInit = false;\n      options.hideLoader = true;\n      this.webform = new _PDF.default(this.element, options);\n      this.webform.on('attach', function () {\n        // If the dropzone exists but has been removed in a PDF rebuild, reinstate it\n        if (_this6.refs.iframeDropzone && !_toConsumableArray(_this6.refs.form.children).includes(_this6.refs.iframeDropzone)) {\n          _this6.prependTo(_this6.refs.iframeDropzone, _this6.refs.form);\n        }\n      });\n      return this.webform;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy(deleteFromGlobal) {\n      _get(_getPrototypeOf(PDFBuilder.prototype), \"destroy\", this).call(this, deleteFromGlobal);\n\n      this.webform.destroy(deleteFromGlobal);\n    } // d8b 8888888888                                                                              888\n    // Y8P 888                                                                                     888\n    //     888                                                                                     888\n    // 888 8888888 888d888 8888b.  88888b.d88b.   .d88b.        .d88b.  888  888  .d88b.  88888b.  888888 .d8888b\n    // 888 888     888P\"      \"88b 888 \"888 \"88b d8P  Y8b      d8P  Y8b 888  888 d8P  Y8b 888 \"88b 888    88K\n    // 888 888     888    .d888888 888  888  888 88888888      88888888 Y88  88P 88888888 888  888 888    \"Y8888b.\n    // 888 888     888    888  888 888  888  888 Y8b.          Y8b.      Y8bd8P  Y8b.     888  888 Y88b.       X88\n    // 888 888     888    \"Y888888 888  888  888  \"Y8888        \"Y8888    Y88P    \"Y8888  888  888  \"Y888  88888P'\n\n  }, {\n    key: \"getParentContainer\",\n    value: function getParentContainer(component) {\n      var container = [];\n      var originalComponent = null;\n      (0, _formUtils.eachComponent)(this.webform._form.components, function (comp, path, components) {\n        if (comp.id === component.component.id) {\n          container = components;\n          originalComponent = comp;\n          return true;\n        }\n      }, true);\n      return {\n        formioComponent: component.parent,\n        formioContainer: container,\n        originalComponent: originalComponent\n      };\n    }\n  }, {\n    key: \"initIframeEvents\",\n    value: function initIframeEvents() {\n      var _this7 = this;\n\n      this.webform.off('iframe-elementUpdate');\n      this.webform.off('iframe-componentUpdate');\n      this.webform.off('iframe-componentClick');\n      this.webform.on('iframe-elementUpdate', function (schema) {\n        var component = _this7.webform.getComponentById(schema.id);\n\n        if (component && component.component) {\n          var isNew = true;\n          component.component.overlay = {\n            page: schema.page,\n            left: schema.left,\n            top: schema.top,\n            height: schema.height,\n            width: schema.width\n          };\n\n          if (!_this7.options.noNewEdit && !component.component.noNewEdit) {\n            _this7.editComponent(component.component, _this7.getParentContainer(component), isNew);\n          }\n\n          _this7.emit('updateComponent', component.component);\n        }\n\n        return component;\n      });\n      this.webform.on('iframe-componentUpdate', function (schema) {\n        var component = _this7.webform.getComponentById(schema.id);\n\n        if (component && component.component) {\n          component.component.overlay = {\n            page: schema.overlay.page,\n            left: schema.overlay.left,\n            top: schema.overlay.top,\n            height: schema.overlay.height,\n            width: schema.overlay.width\n          };\n\n          _this7.emit('updateComponent', component.component);\n\n          _this7.emit('change', _this7.form);\n        }\n\n        return component;\n      });\n      this.webform.on('iframe-componentClick', function (schema) {\n        var component = _this7.webform.getComponentById(schema.id);\n\n        if (component) {\n          _this7.editComponent(component.component, _this7.getParentContainer(component));\n        }\n      }, true);\n    } // 8888888b.                                                                   888                   d8b\n    // 888  \"Y88b                                                                  888                   Y8P\n    // 888    888                                                                  888\n    // 888    888 888d888 .d88b.  88888b. 88888888  .d88b.  88888b.   .d88b.       888  .d88b.   .d88b.  888  .d8888b\n    // 888    888 888P\"  d88\"\"88b 888 \"88b   d88P  d88\"\"88b 888 \"88b d8P  Y8b      888 d88\"\"88b d88P\"88b 888 d88P\"\n    // 888    888 888    888  888 888  888  d88P   888  888 888  888 88888888      888 888  888 888  888 888 888\n    // 888  .d88P 888    Y88..88P 888 d88P d88P    Y88..88P 888  888 Y8b.          888 Y88..88P Y88b 888 888 Y88b.\n    // 8888888P\"  888     \"Y88P\"  88888P\" 88888888  \"Y88P\"  888  888  \"Y8888       888  \"Y88P\"   \"Y88888 888  \"Y8888P\n    //                            888                                                                888\n    //                            888                                                           Y8b d88P\n    //                            888                                                            \"Y88P\"\n\n  }, {\n    key: \"initDropzoneEvents\",\n    value: function initDropzoneEvents() {\n      if (!this.refs.iframeDropzone) {\n        return;\n      } // This is required per HTML spec in order for the drop event to fire\n\n\n      this.removeEventListener(this.refs.iframeDropzone, 'dragover');\n      this.removeEventListener(this.refs.iframeDropzone, 'drop');\n      this.addEventListener(this.refs.iframeDropzone, 'dragover', function (e) {\n        e.preventDefault();\n        return false;\n      });\n      this.addEventListener(this.refs.iframeDropzone, 'drop', this.onDropzoneDrop.bind(this));\n    }\n  }, {\n    key: \"updateDragAndDrop\",\n    value: function updateDragAndDrop() {\n      if (!this.pdfLoaded) {\n        return;\n      }\n\n      this.initDropzoneEvents();\n      this.prepSidebarComponentsForDrag();\n    }\n  }, {\n    key: \"prepSidebarComponentsForDrag\",\n    value: function prepSidebarComponentsForDrag() {\n      var _this8 = this;\n\n      if (!this.refs['sidebar-container']) {\n        return;\n      }\n\n      this.refs['sidebar-container'].forEach(function (container) {\n        _toConsumableArray(container.children).forEach(function (el) {\n          el.draggable = true;\n          el.setAttribute('draggable', true);\n\n          _this8.removeEventListener(el, 'dragstart');\n\n          _this8.removeEventListener(el, 'dragend');\n\n          _this8.addEventListener(el, 'dragstart', _this8.onDragStart.bind(_this8), true);\n\n          _this8.addEventListener(el, 'dragend', _this8.onDragEnd.bind(_this8), true);\n\n          _this8.addEventListener(el, 'drag', function (e) {\n            e.target.style.cursor = 'none';\n          });\n        });\n      });\n    }\n  }, {\n    key: \"updateDropzoneDimensions\",\n    value: function updateDropzoneDimensions() {\n      if (!this.refs.iframeDropzone) {\n        return;\n      }\n\n      var iframeRect = (0, _utils.getElementRect)(this.webform.refs.iframeContainer);\n      this.refs.iframeDropzone.style.height = iframeRect && iframeRect.height ? \"\".concat(iframeRect.height, \"px\") : '1000px';\n      this.refs.iframeDropzone.style.width = iframeRect && iframeRect.width ? \"\".concat(iframeRect.width, \"px\") : '100%';\n    }\n  }, {\n    key: \"onDragStart\",\n    value: function onDragStart(e) {\n      // Taking the current offset of a dragged item relative to the cursor\n      var _e$offsetX = e.offsetX,\n          offsetX = _e$offsetX === void 0 ? 0 : _e$offsetX,\n          _e$offsetY = e.offsetY,\n          offsetY = _e$offsetY === void 0 ? 0 : _e$offsetY;\n      this.itemOffsetX = offsetX;\n      this.itemOffsetY = offsetY;\n      e.dataTransfer.setData('text', '');\n      this.updateDropzoneDimensions();\n      this.addClass(this.refs.iframeDropzone, 'enabled');\n    }\n  }, {\n    key: \"onDropzoneDrop\",\n    value: function onDropzoneDrop(e) {\n      this.dropEvent = e;\n      e.preventDefault();\n      return false;\n    }\n  }, {\n    key: \"onDragEnd\",\n    value: function onDragEnd(e) {\n      // IMPORTANT - must retrieve offsets BEFORE disabling the dropzone - offsets will\n      // reflect absolute positioning if accessed after the target element is hidden\n      var layerX = this.dropEvent ? this.dropEvent.layerX : null;\n      var layerY = this.dropEvent ? this.dropEvent.layerY : null;\n      var WIDTH = 100;\n      var HEIGHT = 20; // Always disable the dropzone on drag end\n\n      this.removeClass(this.refs.iframeDropzone, 'enabled'); // If there hasn't been a drop event on the dropzone, we're done\n\n      if (!this.dropEvent) {\n        return;\n      }\n\n      var element = e.target;\n      var type = element.getAttribute('data-type');\n      var key = element.getAttribute('data-key');\n      var group = element.getAttribute('data-group');\n      var schema = (0, _utils.fastCloneDeep)(this.schemas[type]);\n\n      if (key && group) {\n        var info = this.getComponentInfo(key, group);\n\n        _lodash.default.merge(schema, info);\n      } // Set a unique key for this component.\n\n\n      _builder.default.uniquify([this.webform._form], schema);\n\n      this.webform._form.components.push(schema);\n\n      schema.overlay = {\n        top: layerY - this.itemOffsetY + HEIGHT,\n        left: layerX - this.itemOffsetX,\n        width: WIDTH,\n        height: HEIGHT\n      };\n      this.webform.addComponent(schema, {}, null, true);\n      this.webform.postMessage({\n        name: 'addElement',\n        data: schema\n      });\n      this.emit('addComponent', schema, this.webform, schema.key, this.webform.component.components.length, !this.options.noNewEdit && !schema.noNewEdit); // Delete the stored drop event now that it's been handled\n\n      this.dropEvent = null;\n      e.target.style.cursor = 'default';\n    }\n  }, {\n    key: \"highlightInvalidComponents\",\n    value: function highlightInvalidComponents() {\n      var _this9 = this;\n\n      var repeatablePaths = this.findRepeatablePaths(); // update elements which path was duplicated if any pathes have been changed\n\n      if (!_lodash.default.isEqual(this.repeatablePaths, repeatablePaths)) {\n        (0, _formUtils.eachComponent)(this.webform.getComponents(), function (comp, path) {\n          if (_this9.repeatablePaths.includes(path)) {\n            _this9.webform.postMessage({\n              name: 'updateElement',\n              data: comp.component\n            });\n          }\n        });\n        this.repeatablePaths = repeatablePaths;\n      }\n\n      if (!repeatablePaths.length) {\n        return;\n      }\n\n      (0, _formUtils.eachComponent)(this.webform.getComponents(), function (comp, path) {\n        if (_this9.repeatablePaths.includes(path)) {\n          _this9.webform.postMessage({\n            name: 'showBuilderErrors',\n            data: {\n              compId: comp.component.id,\n              errorMessage: \"API Key is not unique: \".concat(comp.key)\n            }\n          });\n        }\n      });\n    }\n  }]);\n\n  return PDFBuilder;\n}(_WebformBuilder2.default);\n\nexports.default = PDFBuilder;"],"mappings":"AAAA,YAAY;;AAEZ,SAASA,OAAO,CAACC,GAAG,EAAE;EAAE,yBAAyB;;EAAE,OAAOD,OAAO,GAAG,UAAU,IAAI,OAAOE,MAAM,IAAI,QAAQ,IAAI,OAAOA,MAAM,CAACC,QAAQ,GAAG,UAAUF,GAAG,EAAE;IAAE,OAAO,OAAOA,GAAG;EAAE,CAAC,GAAG,UAAUA,GAAG,EAAE;IAAE,OAAOA,GAAG,IAAI,UAAU,IAAI,OAAOC,MAAM,IAAID,GAAG,CAACG,WAAW,KAAKF,MAAM,IAAID,GAAG,KAAKC,MAAM,CAACG,SAAS,GAAG,QAAQ,GAAG,OAAOJ,GAAG;EAAE,CAAC,EAAED,OAAO,CAACC,GAAG,CAAC;AAAE;AAE/UK,OAAO,CAAC,yCAAyC,CAAC;AAElDA,OAAO,CAAC,mCAAmC,CAAC;AAE5CA,OAAO,CAAC,0DAA0D,CAAC;AAEnEA,OAAO,CAAC,8BAA8B,CAAC;AAEvCA,OAAO,CAAC,0CAA0C,CAAC;AAEnDA,OAAO,CAAC,uCAAuC,CAAC;AAEhDA,OAAO,CAAC,sCAAsC,CAAC;AAE/CA,OAAO,CAAC,uCAAuC,CAAC;AAEhDA,OAAO,CAAC,iDAAiD,CAAC;AAE1DA,OAAO,CAAC,kCAAkC,CAAC;AAE3CA,OAAO,CAAC,mCAAmC,CAAC;AAI5CA,OAAO,CAAC,mCAAmC,CAAC;AAE5CC,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACE,OAAO,GAAG,KAAK,CAAC;AAExBL,OAAO,CAAC,iCAAiC,CAAC;AAE1CA,OAAO,CAAC,oCAAoC,CAAC;AAE7CA,OAAO,CAAC,sCAAsC,CAAC;AAE/CA,OAAO,CAAC,uCAAuC,CAAC;AAEhDA,OAAO,CAAC,wCAAwC,CAAC;AAEjDA,OAAO,CAAC,iDAAiD,CAAC;AAE1DA,OAAO,CAAC,+CAA+C,CAAC;AAExD,IAAIM,OAAO,GAAGC,sBAAsB,CAACP,OAAO,CAAC,QAAQ,CAAC,CAAC;AAEvD,IAAIQ,kBAAkB,GAAGD,sBAAsB,CAACP,OAAO,CAAC,qBAAqB,CAAC,CAAC;AAE/E,IAAIS,OAAO,GAAGT,OAAO,CAAC,UAAU,CAAC;AAEjC,IAAIU,gBAAgB,GAAGH,sBAAsB,CAACP,OAAO,CAAC,kBAAkB,CAAC,CAAC;AAE1E,IAAIW,MAAM,GAAGX,OAAO,CAAC,eAAe,CAAC;AAErC,IAAIY,UAAU,GAAGZ,OAAO,CAAC,mBAAmB,CAAC;AAE7C,IAAIa,QAAQ,GAAGN,sBAAsB,CAACP,OAAO,CAAC,iBAAiB,CAAC,CAAC;AAEjE,IAAIc,IAAI,GAAGP,sBAAsB,CAACP,OAAO,CAAC,OAAO,CAAC,CAAC;AAEnD,SAASO,sBAAsB,CAACZ,GAAG,EAAE;EAAE,OAAOA,GAAG,IAAIA,GAAG,CAACoB,UAAU,GAAGpB,GAAG,GAAG;IAAEU,OAAO,EAAEV;EAAI,CAAC;AAAE;AAE9F,SAASqB,kBAAkB,CAACC,GAAG,EAAE;EAAE,OAAOC,kBAAkB,CAACD,GAAG,CAAC,IAAIE,gBAAgB,CAACF,GAAG,CAAC,IAAIG,2BAA2B,CAACH,GAAG,CAAC,IAAII,kBAAkB,EAAE;AAAE;AAExJ,SAASA,kBAAkB,GAAG;EAAE,MAAM,IAAIC,SAAS,CAAC,sIAAsI,CAAC;AAAE;AAE7L,SAASF,2BAA2B,CAACG,CAAC,EAAEC,MAAM,EAAE;EAAE,IAAI,CAACD,CAAC,EAAE;EAAQ,IAAI,OAAOA,CAAC,KAAK,QAAQ,EAAE,OAAOE,iBAAiB,CAACF,CAAC,EAAEC,MAAM,CAAC;EAAE,IAAIE,CAAC,GAAGzB,MAAM,CAACF,SAAS,CAAC4B,QAAQ,CAACC,IAAI,CAACL,CAAC,CAAC,CAACM,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EAAE,IAAIH,CAAC,KAAK,QAAQ,IAAIH,CAAC,CAACzB,WAAW,EAAE4B,CAAC,GAAGH,CAAC,CAACzB,WAAW,CAACgC,IAAI;EAAE,IAAIJ,CAAC,KAAK,KAAK,IAAIA,CAAC,KAAK,KAAK,EAAE,OAAOK,KAAK,CAACC,IAAI,CAACT,CAAC,CAAC;EAAE,IAAIG,CAAC,KAAK,WAAW,IAAI,0CAA0C,CAACO,IAAI,CAACP,CAAC,CAAC,EAAE,OAAOD,iBAAiB,CAACF,CAAC,EAAEC,MAAM,CAAC;AAAE;AAE/Z,SAASL,gBAAgB,CAACe,IAAI,EAAE;EAAE,IAAI,OAAOtC,MAAM,KAAK,WAAW,IAAIsC,IAAI,CAACtC,MAAM,CAACC,QAAQ,CAAC,IAAI,IAAI,IAAIqC,IAAI,CAAC,YAAY,CAAC,IAAI,IAAI,EAAE,OAAOH,KAAK,CAACC,IAAI,CAACE,IAAI,CAAC;AAAE;AAE7J,SAAShB,kBAAkB,CAACD,GAAG,EAAE;EAAE,IAAIc,KAAK,CAACI,OAAO,CAAClB,GAAG,CAAC,EAAE,OAAOQ,iBAAiB,CAACR,GAAG,CAAC;AAAE;AAE1F,SAASQ,iBAAiB,CAACR,GAAG,EAAEmB,GAAG,EAAE;EAAE,IAAIA,GAAG,IAAI,IAAI,IAAIA,GAAG,GAAGnB,GAAG,CAACoB,MAAM,EAAED,GAAG,GAAGnB,GAAG,CAACoB,MAAM;EAAE,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEC,IAAI,GAAG,IAAIR,KAAK,CAACK,GAAG,CAAC,EAAEE,CAAC,GAAGF,GAAG,EAAEE,CAAC,EAAE,EAAE;IAAEC,IAAI,CAACD,CAAC,CAAC,GAAGrB,GAAG,CAACqB,CAAC,CAAC;EAAE;EAAE,OAAOC,IAAI;AAAE;AAEtL,SAASC,eAAe,CAACC,QAAQ,EAAEC,WAAW,EAAE;EAAE,IAAI,EAAED,QAAQ,YAAYC,WAAW,CAAC,EAAE;IAAE,MAAM,IAAIpB,SAAS,CAAC,mCAAmC,CAAC;EAAE;AAAE;AAExJ,SAASqB,iBAAiB,CAACC,MAAM,EAAEC,KAAK,EAAE;EAAE,KAAK,IAAIP,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGO,KAAK,CAACR,MAAM,EAAEC,CAAC,EAAE,EAAE;IAAE,IAAIQ,UAAU,GAAGD,KAAK,CAACP,CAAC,CAAC;IAAEQ,UAAU,CAACC,UAAU,GAAGD,UAAU,CAACC,UAAU,IAAI,KAAK;IAAED,UAAU,CAACE,YAAY,GAAG,IAAI;IAAE,IAAI,OAAO,IAAIF,UAAU,EAAEA,UAAU,CAACG,QAAQ,GAAG,IAAI;IAAEhD,MAAM,CAACC,cAAc,CAAC0C,MAAM,EAAEE,UAAU,CAACI,GAAG,EAAEJ,UAAU,CAAC;EAAE;AAAE;AAE5T,SAASK,YAAY,CAACT,WAAW,EAAEU,UAAU,EAAEC,WAAW,EAAE;EAAE,IAAID,UAAU,EAAET,iBAAiB,CAACD,WAAW,CAAC3C,SAAS,EAAEqD,UAAU,CAAC;EAAE,IAAIC,WAAW,EAAEV,iBAAiB,CAACD,WAAW,EAAEW,WAAW,CAAC;EAAEpD,MAAM,CAACC,cAAc,CAACwC,WAAW,EAAE,WAAW,EAAE;IAAEO,QAAQ,EAAE;EAAM,CAAC,CAAC;EAAE,OAAOP,WAAW;AAAE;AAE5R,SAASY,IAAI,GAAG;EAAE,IAAI,OAAOC,OAAO,KAAK,WAAW,IAAIA,OAAO,CAACC,GAAG,EAAE;IAAEF,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI,EAAE;EAAE,CAAC,MAAM;IAAEH,IAAI,GAAG,SAASA,IAAI,CAACV,MAAM,EAAEc,QAAQ,EAAEC,QAAQ,EAAE;MAAE,IAAIC,IAAI,GAAGC,cAAc,CAACjB,MAAM,EAAEc,QAAQ,CAAC;MAAE,IAAI,CAACE,IAAI,EAAE;MAAQ,IAAIE,IAAI,GAAG7D,MAAM,CAAC8D,wBAAwB,CAACH,IAAI,EAAEF,QAAQ,CAAC;MAAE,IAAII,IAAI,CAACN,GAAG,EAAE;QAAE,OAAOM,IAAI,CAACN,GAAG,CAAC5B,IAAI,CAACoC,SAAS,CAAC3B,MAAM,GAAG,CAAC,GAAGO,MAAM,GAAGe,QAAQ,CAAC;MAAE;MAAE,OAAOG,IAAI,CAAC1D,KAAK;IAAE,CAAC;EAAE;EAAE,OAAOkD,IAAI,CAACW,KAAK,CAAC,IAAI,EAAED,SAAS,CAAC;AAAE;AAExa,SAASH,cAAc,CAACK,MAAM,EAAER,QAAQ,EAAE;EAAE,OAAO,CAACzD,MAAM,CAACF,SAAS,CAACoE,cAAc,CAACvC,IAAI,CAACsC,MAAM,EAAER,QAAQ,CAAC,EAAE;IAAEQ,MAAM,GAAGE,eAAe,CAACF,MAAM,CAAC;IAAE,IAAIA,MAAM,KAAK,IAAI,EAAE;EAAO;EAAE,OAAOA,MAAM;AAAE;AAE7L,SAASG,SAAS,CAACC,QAAQ,EAAEC,UAAU,EAAE;EAAE,IAAI,OAAOA,UAAU,KAAK,UAAU,IAAIA,UAAU,KAAK,IAAI,EAAE;IAAE,MAAM,IAAIjD,SAAS,CAAC,oDAAoD,CAAC;EAAE;EAAEgD,QAAQ,CAACvE,SAAS,GAAGE,MAAM,CAACuE,MAAM,CAACD,UAAU,IAAIA,UAAU,CAACxE,SAAS,EAAE;IAAED,WAAW,EAAE;MAAEM,KAAK,EAAEkE,QAAQ;MAAErB,QAAQ,EAAE,IAAI;MAAED,YAAY,EAAE;IAAK;EAAE,CAAC,CAAC;EAAE/C,MAAM,CAACC,cAAc,CAACoE,QAAQ,EAAE,WAAW,EAAE;IAAErB,QAAQ,EAAE;EAAM,CAAC,CAAC;EAAE,IAAIsB,UAAU,EAAEE,eAAe,CAACH,QAAQ,EAAEC,UAAU,CAAC;AAAE;AAEnc,SAASE,eAAe,CAAClD,CAAC,EAAEmD,CAAC,EAAE;EAAED,eAAe,GAAGxE,MAAM,CAAC0E,cAAc,GAAG1E,MAAM,CAAC0E,cAAc,CAAClB,IAAI,EAAE,GAAG,SAASgB,eAAe,CAAClD,CAAC,EAAEmD,CAAC,EAAE;IAAEnD,CAAC,CAACqD,SAAS,GAAGF,CAAC;IAAE,OAAOnD,CAAC;EAAE,CAAC;EAAE,OAAOkD,eAAe,CAAClD,CAAC,EAAEmD,CAAC,CAAC;AAAE;AAEvM,SAASG,YAAY,CAACC,OAAO,EAAE;EAAE,IAAIC,yBAAyB,GAAGC,yBAAyB,EAAE;EAAE,OAAO,SAASC,oBAAoB,GAAG;IAAE,IAAIC,KAAK,GAAGd,eAAe,CAACU,OAAO,CAAC;MAAEK,MAAM;IAAE,IAAIJ,yBAAyB,EAAE;MAAE,IAAIK,SAAS,GAAGhB,eAAe,CAAC,IAAI,CAAC,CAACtE,WAAW;MAAEqF,MAAM,GAAG5B,OAAO,CAAC8B,SAAS,CAACH,KAAK,EAAElB,SAAS,EAAEoB,SAAS,CAAC;IAAE,CAAC,MAAM;MAAED,MAAM,GAAGD,KAAK,CAACjB,KAAK,CAAC,IAAI,EAAED,SAAS,CAAC;IAAE;IAAE,OAAOsB,0BAA0B,CAAC,IAAI,EAAEH,MAAM,CAAC;EAAE,CAAC;AAAE;AAExa,SAASG,0BAA0B,CAACC,IAAI,EAAE3D,IAAI,EAAE;EAAE,IAAIA,IAAI,KAAKlC,OAAO,CAACkC,IAAI,CAAC,KAAK,QAAQ,IAAI,OAAOA,IAAI,KAAK,UAAU,CAAC,EAAE;IAAE,OAAOA,IAAI;EAAE,CAAC,MAAM,IAAIA,IAAI,KAAK,KAAK,CAAC,EAAE;IAAE,MAAM,IAAIN,SAAS,CAAC,0DAA0D,CAAC;EAAE;EAAE,OAAOkE,sBAAsB,CAACD,IAAI,CAAC;AAAE;AAE/R,SAASC,sBAAsB,CAACD,IAAI,EAAE;EAAE,IAAIA,IAAI,KAAK,KAAK,CAAC,EAAE;IAAE,MAAM,IAAIE,cAAc,CAAC,2DAA2D,CAAC;EAAE;EAAE,OAAOF,IAAI;AAAE;AAErK,SAASP,yBAAyB,GAAG;EAAE,IAAI,OAAOzB,OAAO,KAAK,WAAW,IAAI,CAACA,OAAO,CAAC8B,SAAS,EAAE,OAAO,KAAK;EAAE,IAAI9B,OAAO,CAAC8B,SAAS,CAACK,IAAI,EAAE,OAAO,KAAK;EAAE,IAAI,OAAOC,KAAK,KAAK,UAAU,EAAE,OAAO,IAAI;EAAE,IAAI;IAAEC,OAAO,CAAC7F,SAAS,CAAC8F,OAAO,CAACjE,IAAI,CAAC2B,OAAO,CAAC8B,SAAS,CAACO,OAAO,EAAE,EAAE,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC;IAAE,OAAO,IAAI;EAAE,CAAC,CAAC,OAAOE,CAAC,EAAE;IAAE,OAAO,KAAK;EAAE;AAAE;AAExU,SAAS1B,eAAe,CAAC7C,CAAC,EAAE;EAAE6C,eAAe,GAAGnE,MAAM,CAAC0E,cAAc,GAAG1E,MAAM,CAAC8F,cAAc,CAACtC,IAAI,EAAE,GAAG,SAASW,eAAe,CAAC7C,CAAC,EAAE;IAAE,OAAOA,CAAC,CAACqD,SAAS,IAAI3E,MAAM,CAAC8F,cAAc,CAACxE,CAAC,CAAC;EAAE,CAAC;EAAE,OAAO6C,eAAe,CAAC7C,CAAC,CAAC;AAAE;AAEnN,IAAIyE,UAAU,GAAG,aAAa,UAAUC,eAAe,EAAE;EACvD5B,SAAS,CAAC2B,UAAU,EAAEC,eAAe,CAAC;EAEtC,IAAIC,MAAM,GAAGrB,YAAY,CAACmB,UAAU,CAAC;EAErC,SAASA,UAAU,GAAG;IACpB,IAAIG,KAAK;IAET3D,eAAe,CAAC,IAAI,EAAEwD,UAAU,CAAC;IAEjC,IAAII,OAAO,EAAEC,OAAO;IAEpB,IAAIrC,SAAS,CAAC,CAAC,CAAC,YAAYsC,WAAW,IAAItC,SAAS,CAAC,CAAC,CAAC,EAAE;MACvDoC,OAAO,GAAGpC,SAAS,CAAC,CAAC,CAAC;MACtBqC,OAAO,GAAGrC,SAAS,CAAC,CAAC,CAAC;IACxB,CAAC,MAAM;MACLqC,OAAO,GAAGrC,SAAS,CAAC,CAAC,CAAC;IACxB,CAAC,CAAC;;IAGFqC,OAAO,CAACE,QAAQ,GAAG,IAAI;IACvBF,OAAO,CAACG,OAAO,GAAG,KAAK;IAEvB,IAAIJ,OAAO,EAAE;MACXD,KAAK,GAAGD,MAAM,CAACtE,IAAI,CAAC,IAAI,EAAEwE,OAAO,EAAEC,OAAO,CAAC;IAC7C,CAAC,MAAM;MACLF,KAAK,GAAGD,MAAM,CAACtE,IAAI,CAAC,IAAI,EAAEyE,OAAO,CAAC;IACpC;IAEAF,KAAK,CAACM,eAAe,GAAG,KAAK;IAC7B,OAAOnB,0BAA0B,CAACa,KAAK,CAAC;EAC1C;EAEAhD,YAAY,CAAC6C,UAAU,EAAE,CAAC;IACxB9C,GAAG,EAAE,eAAe;IACpBM,GAAG,EAAE,SAASA,GAAG,GAAG;MAClB,OAAO;QACLkD,GAAG,EAAE;UACHC,KAAK,EAAE,YAAY;UACnBC,MAAM,EAAE,CAAC;UACTvG,OAAO,EAAE,IAAI;UACbwG,UAAU,EAAE;YACVC,SAAS,EAAE,IAAI;YACfC,MAAM,EAAE,IAAI;YACZC,QAAQ,EAAE,IAAI;YACdC,KAAK,EAAE,IAAI;YACXC,WAAW,EAAE,IAAI;YACjBC,QAAQ,EAAE,IAAI;YACdC,QAAQ,EAAE,IAAI;YACdC,SAAS,EAAE,IAAI;YACfC,MAAM,EAAE,IAAI;YACZC,QAAQ,EAAE,IAAI;YACdC,QAAQ,EAAE,IAAI;YACdC,IAAI,EAAE,IAAI;YACVC,WAAW,EAAE,IAAI;YACjBC,oBAAoB,EAAE;UACxB;QACF,CAAC;QACDC,KAAK,EAAE,KAAK;QACZC,QAAQ,EAAE,KAAK;QACfC,MAAM,EAAE,KAAK;QACbC,IAAI,EAAE,KAAK;QACXC,OAAO,EAAE,KAAK;QACdC,QAAQ,EAAE;MACZ,CAAC;IACH;EACF,CAAC,EAAE;IACD/E,GAAG,EAAE,QAAQ;IACbM,GAAG,EAAE,SAASA,GAAG,GAAG;MAClB,OAAOlD,OAAO,CAACD,OAAO,CAAC6H,GAAG,CAAC,IAAI,CAACC,OAAO,CAACC,IAAI,EAAE,cAAc,CAAC;IAC/D;EACF,CAAC,EAAE;IACDlF,GAAG,EAAE,YAAY;IACjBM,GAAG,EAAE,SAASA,GAAG,GAAG;MAClB,OAAO,IAAI,CAAC6C,OAAO,CAACgC,UAAU,IAAI5H,OAAO,CAAC6H,YAAY,CAACC,aAAa,EAAE;IACxE;EACF,CAAC,EAAE;IACDrF,GAAG,EAAE,MAAM;IACX9C,KAAK,EAAE,SAASoI,IAAI,GAAG;MACrB,IAAI,CAACnC,OAAO,CAACoC,UAAU,GAAG,SAAS;MACnC,IAAI,CAACN,OAAO,GAAG,IAAI,CAACA,OAAO,IAAI,IAAI,CAACO,UAAU,CAAC,IAAI,CAACrC,OAAO,CAAC;MAC5D,IAAI,CAAC8B,OAAO,CAACK,IAAI,EAAE;IACrB;EACF,CAAC,EAAE;IACDtF,GAAG,EAAE,QAAQ;IACb9C,KAAK,EAAE,SAASuI,MAAM,GAAG;MACvB,IAAIC,MAAM,GAAG,IAAI;MAEjB,IAAIzD,MAAM,GAAG,IAAI,CAAC0D,cAAc,CAAC,YAAY,EAAE;QAC7CC,OAAO,EAAE,IAAI,CAACD,cAAc,CAAC,gBAAgB,EAAE;UAC7CE,aAAa,EAAE,IAAI,CAACC,aAAa;UACjCC,UAAU,EAAE,IAAI,CAACA,UAAU;UAC3BC,OAAO,EAAE,kBAAkB,CAACC,MAAM,CAAC,IAAI,CAACC,EAAE,CAAC;UAC3CC,MAAM,EAAE,IAAI,CAACJ,UAAU,CAACK,GAAG,CAAC,UAAUC,QAAQ,EAAE;YAC9C,OAAOX,MAAM,CAACC,cAAc,CAAC,qBAAqB,EAAE;cAClDW,KAAK,EAAEZ,MAAM,CAACS,MAAM,CAACE,QAAQ,CAAC;cAC9BA,QAAQ,EAAEA,QAAQ;cAClBL,OAAO,EAAE,kBAAkB,CAACC,MAAM,CAACP,MAAM,CAACQ,EAAE,CAAC;cAC7CK,SAAS,EAAEb,MAAM,CAACS,MAAM,CAACE,QAAQ,CAAC,CAACE,SAAS,CAACH,GAAG,CAAC,UAAUE,KAAK,EAAE;gBAChE,OAAOZ,MAAM,CAACC,cAAc,CAAC,qBAAqB,EAAE;kBAClDW,KAAK,EAAEA,KAAK;kBACZD,QAAQ,EAAEC,KAAK,CAACtG,GAAG;kBACnBgG,OAAO,EAAE,kBAAkB,CAACC,MAAM,CAACI,QAAQ,CAAC;kBAC5CE,SAAS,EAAE;gBACb,CAAC,CAAC;cACJ,CAAC;YACH,CAAC,CAAC;UACJ,CAAC;QACH,CAAC,CAAC;QACFrB,IAAI,EAAE,IAAI,CAACsB,MAAM,GAAG,IAAI,CAACvB,OAAO,CAACQ,MAAM,EAAE,GAAG,IAAI,CAACE,cAAc,CAAC,kBAAkB,EAAE,CAAC,CAAC;MACxF,CAAC,CAAC;MACF,OAAO1D,MAAM;IACf;EACF,CAAC,EAAE;IACDjC,GAAG,EAAE,QAAQ;IACb9C,KAAK,EAAE,SAASuJ,MAAM,CAACvD,OAAO,EAAE;MAC9B,IAAIwD,MAAM,GAAG,IAAI;;MAEjB;MACA,IAAI,CAAC,IAAI,CAACF,MAAM,EAAE;QAChB,IAAI,CAACG,QAAQ,CAACzD,OAAO,EAAE;UACrB,UAAU,EAAE,QAAQ;UACpB,YAAY,EAAE,QAAQ;UACtB,wBAAwB,EAAE,QAAQ;UAClC,aAAa,EAAE,QAAQ;UACvB,gBAAgB,EAAE,QAAQ;UAC1B,uBAAuB,EAAE,QAAQ;UACjC,cAAc,EAAE;QAClB,CAAC,CAAC;QACF,IAAI,CAAC0D,gBAAgB,CAAC,IAAI,CAACC,IAAI,CAAC,mBAAmB,CAAC,EAAE,OAAO,EAAE,UAAUC,KAAK,EAAE;UAC9EA,KAAK,CAACC,cAAc,EAAE;QACxB,CAAC,CAAC,CAAC,CAAC;;QAEJ,IAAI,CAAC,IAAI,CAAC5B,UAAU,EAAE;UACpB,IAAI,CAAC6B,cAAc,CAAC,yLAAyL,CAAC;QAChN,CAAC,MAAM;UACL,IAAI,CAACA,cAAc,EAAE;QACvB;QAEA,IAAI,IAAI,CAACH,IAAI,CAACI,QAAQ,EAAE;UACtB,IAAIC,QAAQ,GAAG,IAAI;UAEnB,IAAI,CAACN,gBAAgB,CAAC,IAAI,CAACC,IAAI,CAACI,QAAQ,EAAE,UAAU,EAAE,UAAUH,KAAK,EAAE;YACrE,IAAI,CAACK,SAAS,GAAG,2BAA2B;YAC5CL,KAAK,CAACC,cAAc,EAAE;UACxB,CAAC,CAAC;UACF,IAAI,CAACH,gBAAgB,CAAC,IAAI,CAACC,IAAI,CAACI,QAAQ,EAAE,WAAW,EAAE,UAAUH,KAAK,EAAE;YACtE,IAAI,CAACK,SAAS,GAAG,cAAc;YAC/BL,KAAK,CAACC,cAAc,EAAE;UACxB,CAAC,CAAC;UACF,IAAI,CAACH,gBAAgB,CAAC,IAAI,CAACC,IAAI,CAACI,QAAQ,EAAE,MAAM,EAAE,UAAUH,KAAK,EAAE;YACjE,IAAI,CAACK,SAAS,GAAG,cAAc;YAC/BL,KAAK,CAACC,cAAc,EAAE;YAEtBG,QAAQ,CAACE,MAAM,CAACN,KAAK,CAACO,YAAY,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;YAE5C,OAAO,KAAK;UACd,CAAC,CAAC;QACJ;QAEA,IAAI,IAAI,CAACT,IAAI,CAACU,UAAU,IAAI,IAAI,CAACV,IAAI,CAACW,sBAAsB,EAAE;UAC5D,IAAI,CAACZ,gBAAgB,CAAC,IAAI,CAACC,IAAI,CAACU,UAAU,EAAE,OAAO,EAAE,UAAUT,KAAK,EAAE;YACpEA,KAAK,CAACC,cAAc,EAAE,CAAC,CAAC;YACxB;;YAEA,IAAI,OAAOL,MAAM,CAACG,IAAI,CAACW,sBAAsB,CAACC,OAAO,KAAK,UAAU,EAAE;cACpEf,MAAM,CAACG,IAAI,CAACW,sBAAsB,CAACC,OAAO,CAAC,OAAO,CAAC;YACrD,CAAC,MAAM;cACLf,MAAM,CAACG,IAAI,CAACW,sBAAsB,CAACE,KAAK,EAAE;YAC5C;UACF,CAAC,CAAC;UACF,IAAI,CAACd,gBAAgB,CAAC,IAAI,CAACC,IAAI,CAACW,sBAAsB,EAAE,QAAQ,EAAE,YAAY;YAC5E,IAAI,CAACd,MAAM,CAACG,IAAI,CAACW,sBAAsB,CAACtK,KAAK,EAAE;cAC7C;YACF;YAEAwJ,MAAM,CAACU,MAAM,CAACV,MAAM,CAACG,IAAI,CAACW,sBAAsB,CAACF,KAAK,CAAC,CAAC,CAAC,CAAC;YAE1DZ,MAAM,CAACG,IAAI,CAACW,sBAAsB,CAACtK,KAAK,GAAG,EAAE;UAC/C,CAAC,CAAC;QACJ;QAEA,OAAOI,kBAAkB,CAACH,OAAO,CAACwK,OAAO,EAAE;MAC7C,CAAC,CAAC;;MAGF,OAAOvH,IAAI,CAACc,eAAe,CAAC4B,UAAU,CAACjG,SAAS,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC6B,IAAI,CAAC,IAAI,EAAEwE,OAAO,CAAC,CAAC0E,IAAI,CAAC,YAAY;QACtGlB,MAAM,CAACC,QAAQ,CAACD,MAAM,CAACxD,OAAO,EAAE;UAC9B2E,cAAc,EAAE,QAAQ;UACxB,mBAAmB,EAAE,UAAU;UAC/B,SAAS,EAAE;QACb,CAAC,CAAC;QAEFnB,MAAM,CAACoB,WAAW,EAAE;QAEpB,OAAOpB,MAAM,CAACxD,OAAO;MACvB,CAAC,CAAC;IACJ;EACF,CAAC,EAAE;IACDlD,GAAG,EAAE,aAAa;IAClB9C,KAAK,EAAE,SAAS4K,WAAW,GAAG;MAC5B,IAAIC,MAAM,GAAG,IAAI;MAEjB,IAAI,CAACC,EAAE,CAAC,eAAe,EAAE,UAAUC,SAAS,EAAE;QAC5CF,MAAM,CAAC9C,OAAO,CAACiD,WAAW,CAAC;UACzBtJ,IAAI,EAAE,eAAe;UACrBiG,IAAI,EAAEoD;QACR,CAAC,CAAC;MACJ,CAAC,CAAC;MACF,IAAI,CAACD,EAAE,CAAC,iBAAiB,EAAE,UAAUC,SAAS,EAAE;QAC9CF,MAAM,CAAC9C,OAAO,CAACiD,WAAW,CAAC;UACzBtJ,IAAI,EAAE,eAAe;UACrBiG,IAAI,EAAEoD;QACR,CAAC,CAAC;MACJ,CAAC,CAAC;MACF,IAAI,CAACE,gBAAgB,EAAE;MACvB,IAAI,CAACC,wBAAwB,EAAE;MAC/B,IAAIxC,OAAO,GAAG,IAAI,CAACiB,IAAI,CAACjB,OAAO;MAE/B,IAAIA,OAAO,EAAE;QACX,IAAI,CAACyC,QAAQ,CAACzC,OAAO,EAAE,UAAU,CAAC;QAClC,IAAI,CAACX,OAAO,CAAC+C,EAAE,CAAC,cAAc,EAAE,YAAY;UAC1CD,MAAM,CAACO,SAAS,GAAG,IAAI;UAEvBP,MAAM,CAACQ,iBAAiB,EAAE;UAE1BR,MAAM,CAACS,WAAW,CAAC5C,OAAO,EAAE,UAAU,CAAC;QACzC,CAAC,EAAE,IAAI,CAAC;MACV;IACF;EACF,CAAC,EAAE;IACD5F,GAAG,EAAE,QAAQ;IACb9C,KAAK,EAAE,SAASkK,MAAM,CAAC7C,IAAI,EAAE;MAC3B,IAAIkE,MAAM,GAAG,IAAI;MAEjB,IAAIC,MAAM,GAAG,IAAInL,OAAO,CAAC6H,YAAY,CAAC,IAAI,CAACD,UAAU,CAAC;MAEtD,IAAI,IAAI,CAAC0B,IAAI,CAAC8B,YAAY,EAAE;QAC1B,IAAI,CAAC9B,IAAI,CAAC8B,YAAY,CAACC,KAAK,CAACtF,OAAO,GAAG,MAAM;MAC/C;MAEA,IAAI,IAAI,CAACuD,IAAI,CAACgC,qBAAqB,EAAE;QACnC,IAAI,CAAChC,IAAI,CAACgC,qBAAqB,CAACD,KAAK,CAACtF,OAAO,GAAG,SAAS;MAC3D;MAEAoF,MAAM,CAACI,UAAU,CAAC,KAAK,EAAEvE,IAAI,EAAEA,IAAI,EAAE,EAAE,EAAE,UAAUuC,KAAK,EAAE;QACxD,IAAI2B,MAAM,CAAC5B,IAAI,CAACkC,cAAc,EAAE;UAC9B,IAAIC,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACpC,KAAK,CAACqC,MAAM,GAAGrC,KAAK,CAACsC,KAAK,GAAG,GAAG,CAAC;UAC3DX,MAAM,CAAC5B,IAAI,CAACkC,cAAc,CAACH,KAAK,CAACS,KAAK,GAAG,EAAE,CAACpD,MAAM,CAAC+C,QAAQ,EAAE,GAAG,CAAC;UAEjE,IAAIA,QAAQ,GAAG,EAAE,EAAE;YACjBP,MAAM,CAAC5B,IAAI,CAACkC,cAAc,CAACO,SAAS,GAAGb,MAAM,CAACc,CAAC,CAAC,8BAA8B,CAAC;UACjF,CAAC,MAAM;YACLd,MAAM,CAAC5B,IAAI,CAACkC,cAAc,CAACO,SAAS,GAAG,EAAE,CAACrD,MAAM,CAACwC,MAAM,CAACc,CAAC,CAAC,WAAW,CAAC,EAAE,GAAG,CAAC,CAACtD,MAAM,CAAC+C,QAAQ,EAAE,GAAG,CAAC;UACpG;QACF;MACF,CAAC,EAAE,EAAE,CAAC/C,MAAM,CAAC,IAAI,CAACd,UAAU,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,CAACyC,IAAI,CAAC,UAAU3F,MAAM,EAAE;QAC3E7E,OAAO,CAACD,OAAO,CAACqM,GAAG,CAACf,MAAM,CAACxD,OAAO,CAACC,IAAI,EAAE,cAAc,EAAE;UACvDgB,EAAE,EAAEjE,MAAM,CAAC4C,IAAI,CAACN,IAAI;UACpBkF,GAAG,EAAE,EAAE,CAACxD,MAAM,CAAChE,MAAM,CAAC4C,IAAI,CAAC6E,WAAW,CAAC,CAACzD,MAAM,CAAChE,MAAM,CAAC4C,IAAI,CAAC8E,IAAI;QACjE,CAAC,CAAC;QAEF,IAAIlB,MAAM,CAAC5B,IAAI,CAAC8B,YAAY,EAAE;UAC5BF,MAAM,CAAC5B,IAAI,CAAC8B,YAAY,CAACC,KAAK,CAACtF,OAAO,GAAG,SAAS;QACpD;QAEA,IAAImF,MAAM,CAAC5B,IAAI,CAACgC,qBAAqB,EAAE;UACrCJ,MAAM,CAAC5B,IAAI,CAACgC,qBAAqB,CAACD,KAAK,CAACtF,OAAO,GAAG,MAAM;QAC1D;QAEAmF,MAAM,CAACmB,IAAI,CAAC,aAAa,EAAE3H,MAAM,CAAC4C,IAAI,CAAC;QAEvC4D,MAAM,CAACoB,MAAM,EAAE;MACjB,CAAC,CAAC,CAACC,KAAK,CAAC,UAAUC,GAAG,EAAE;QACtB,OAAOtB,MAAM,CAACzB,cAAc,CAAC+C,GAAG,CAAC;MACnC,CAAC,CAAC;IACJ;EACF,CAAC,EAAE;IACD/J,GAAG,EAAE,gBAAgB;IACrB9C,KAAK,EAAE,SAAS8J,cAAc,CAACgD,OAAO,EAAE;MACtC,IAAI,CAAC,IAAI,CAACnD,IAAI,CAACoD,WAAW,EAAE;QAC1B;MACF;MAEA,IAAI,CAACpD,IAAI,CAACoD,WAAW,CAACrB,KAAK,CAACtF,OAAO,GAAG0G,OAAO,GAAG,EAAE,GAAG,MAAM;MAC3D,IAAI,CAACnD,IAAI,CAACoD,WAAW,CAACX,SAAS,GAAGU,OAAO;IAC3C;EACF,CAAC,EAAE;IACDhK,GAAG,EAAE,YAAY;IACjB9C,KAAK,EAAE,SAASsI,UAAU,CAACrC,OAAO,EAAE;MAClC,IAAI+G,MAAM,GAAG,IAAI;;MAEjB;MACA/G,OAAO,CAACE,QAAQ,GAAG,KAAK;MACxBF,OAAO,CAACgH,UAAU,GAAG,IAAI;MACzB,IAAI,CAAClF,OAAO,GAAG,IAAIrH,IAAI,CAACT,OAAO,CAAC,IAAI,CAAC+F,OAAO,EAAEC,OAAO,CAAC;MACtD,IAAI,CAAC8B,OAAO,CAAC+C,EAAE,CAAC,QAAQ,EAAE,YAAY;QACpC;QACA,IAAIkC,MAAM,CAACrD,IAAI,CAACgB,cAAc,IAAI,CAAC/J,kBAAkB,CAACoM,MAAM,CAACrD,IAAI,CAAC3B,IAAI,CAACkF,QAAQ,CAAC,CAACC,QAAQ,CAACH,MAAM,CAACrD,IAAI,CAACgB,cAAc,CAAC,EAAE;UACrHqC,MAAM,CAACI,SAAS,CAACJ,MAAM,CAACrD,IAAI,CAACgB,cAAc,EAAEqC,MAAM,CAACrD,IAAI,CAAC3B,IAAI,CAAC;QAChE;MACF,CAAC,CAAC;MACF,OAAO,IAAI,CAACD,OAAO;IACrB;EACF,CAAC,EAAE;IACDjF,GAAG,EAAE,SAAS;IACd9C,KAAK,EAAE,SAASqN,OAAO,CAACC,gBAAgB,EAAE;MACxCpK,IAAI,CAACc,eAAe,CAAC4B,UAAU,CAACjG,SAAS,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC6B,IAAI,CAAC,IAAI,EAAE8L,gBAAgB,CAAC;MAEzF,IAAI,CAACvF,OAAO,CAACsF,OAAO,CAACC,gBAAgB,CAAC;IACxC,CAAC,CAAC;IACF;IACA;IACA;IACA;IACA;IACA;IACA;EAEF,CAAC,EAAE;IACDxK,GAAG,EAAE,oBAAoB;IACzB9C,KAAK,EAAE,SAASuN,kBAAkB,CAACxC,SAAS,EAAE;MAC5C,IAAIyC,SAAS,GAAG,EAAE;MAClB,IAAIC,iBAAiB,GAAG,IAAI;MAC5B,CAAC,CAAC,EAAEjN,UAAU,CAACkN,aAAa,EAAE,IAAI,CAAC3F,OAAO,CAAC4F,KAAK,CAAClH,UAAU,EAAE,UAAUmH,IAAI,EAAEnB,IAAI,EAAEhG,UAAU,EAAE;QAC7F,IAAImH,IAAI,CAAC5E,EAAE,KAAK+B,SAAS,CAACA,SAAS,CAAC/B,EAAE,EAAE;UACtCwE,SAAS,GAAG/G,UAAU;UACtBgH,iBAAiB,GAAGG,IAAI;UACxB,OAAO,IAAI;QACb;MACF,CAAC,EAAE,IAAI,CAAC;MACR,OAAO;QACLC,eAAe,EAAE9C,SAAS,CAAC+C,MAAM;QACjCC,eAAe,EAAEP,SAAS;QAC1BC,iBAAiB,EAAEA;MACrB,CAAC;IACH;EACF,CAAC,EAAE;IACD3K,GAAG,EAAE,kBAAkB;IACvB9C,KAAK,EAAE,SAASiL,gBAAgB,GAAG;MACjC,IAAI+C,MAAM,GAAG,IAAI;MAEjB,IAAI,CAACjG,OAAO,CAACkG,GAAG,CAAC,sBAAsB,CAAC;MACxC,IAAI,CAAClG,OAAO,CAACkG,GAAG,CAAC,wBAAwB,CAAC;MAC1C,IAAI,CAAClG,OAAO,CAACkG,GAAG,CAAC,uBAAuB,CAAC;MACzC,IAAI,CAAClG,OAAO,CAAC+C,EAAE,CAAC,sBAAsB,EAAE,UAAUoD,MAAM,EAAE;QACxD,IAAInD,SAAS,GAAGiD,MAAM,CAACjG,OAAO,CAACoG,gBAAgB,CAACD,MAAM,CAAClF,EAAE,CAAC;QAE1D,IAAI+B,SAAS,IAAIA,SAAS,CAACA,SAAS,EAAE;UACpC,IAAIqD,KAAK,GAAG,IAAI;UAChBrD,SAAS,CAACA,SAAS,CAACsD,OAAO,GAAG;YAC5BC,IAAI,EAAEJ,MAAM,CAACI,IAAI;YACjBC,IAAI,EAAEL,MAAM,CAACK,IAAI;YACjBC,GAAG,EAAEN,MAAM,CAACM,GAAG;YACfC,MAAM,EAAEP,MAAM,CAACO,MAAM;YACrBtC,KAAK,EAAE+B,MAAM,CAAC/B;UAChB,CAAC;UAED,IAAI,CAAC6B,MAAM,CAAC/H,OAAO,CAACyI,SAAS,IAAI,CAAC3D,SAAS,CAACA,SAAS,CAAC2D,SAAS,EAAE;YAC/DV,MAAM,CAACW,aAAa,CAAC5D,SAAS,CAACA,SAAS,EAAEiD,MAAM,CAACT,kBAAkB,CAACxC,SAAS,CAAC,EAAEqD,KAAK,CAAC;UACxF;UAEAJ,MAAM,CAACtB,IAAI,CAAC,iBAAiB,EAAE3B,SAAS,CAACA,SAAS,CAAC;QACrD;QAEA,OAAOA,SAAS;MAClB,CAAC,CAAC;MACF,IAAI,CAAChD,OAAO,CAAC+C,EAAE,CAAC,wBAAwB,EAAE,UAAUoD,MAAM,EAAE;QAC1D,IAAInD,SAAS,GAAGiD,MAAM,CAACjG,OAAO,CAACoG,gBAAgB,CAACD,MAAM,CAAClF,EAAE,CAAC;QAE1D,IAAI+B,SAAS,IAAIA,SAAS,CAACA,SAAS,EAAE;UACpCA,SAAS,CAACA,SAAS,CAACsD,OAAO,GAAG;YAC5BC,IAAI,EAAEJ,MAAM,CAACG,OAAO,CAACC,IAAI;YACzBC,IAAI,EAAEL,MAAM,CAACG,OAAO,CAACE,IAAI;YACzBC,GAAG,EAAEN,MAAM,CAACG,OAAO,CAACG,GAAG;YACvBC,MAAM,EAAEP,MAAM,CAACG,OAAO,CAACI,MAAM;YAC7BtC,KAAK,EAAE+B,MAAM,CAACG,OAAO,CAAClC;UACxB,CAAC;UAED6B,MAAM,CAACtB,IAAI,CAAC,iBAAiB,EAAE3B,SAAS,CAACA,SAAS,CAAC;UAEnDiD,MAAM,CAACtB,IAAI,CAAC,QAAQ,EAAEsB,MAAM,CAAChG,IAAI,CAAC;QACpC;QAEA,OAAO+C,SAAS;MAClB,CAAC,CAAC;MACF,IAAI,CAAChD,OAAO,CAAC+C,EAAE,CAAC,uBAAuB,EAAE,UAAUoD,MAAM,EAAE;QACzD,IAAInD,SAAS,GAAGiD,MAAM,CAACjG,OAAO,CAACoG,gBAAgB,CAACD,MAAM,CAAClF,EAAE,CAAC;QAE1D,IAAI+B,SAAS,EAAE;UACbiD,MAAM,CAACW,aAAa,CAAC5D,SAAS,CAACA,SAAS,EAAEiD,MAAM,CAACT,kBAAkB,CAACxC,SAAS,CAAC,CAAC;QACjF;MACF,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,CAAC;IACF;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAEF,CAAC,EAAE;IACDjI,GAAG,EAAE,oBAAoB;IACzB9C,KAAK,EAAE,SAAS4O,kBAAkB,GAAG;MACnC,IAAI,CAAC,IAAI,CAACjF,IAAI,CAACgB,cAAc,EAAE;QAC7B;MACF,CAAC,CAAC;;MAGF,IAAI,CAACkE,mBAAmB,CAAC,IAAI,CAAClF,IAAI,CAACgB,cAAc,EAAE,UAAU,CAAC;MAC9D,IAAI,CAACkE,mBAAmB,CAAC,IAAI,CAAClF,IAAI,CAACgB,cAAc,EAAE,MAAM,CAAC;MAC1D,IAAI,CAACjB,gBAAgB,CAAC,IAAI,CAACC,IAAI,CAACgB,cAAc,EAAE,UAAU,EAAE,UAAUjF,CAAC,EAAE;QACvEA,CAAC,CAACmE,cAAc,EAAE;QAClB,OAAO,KAAK;MACd,CAAC,CAAC;MACF,IAAI,CAACH,gBAAgB,CAAC,IAAI,CAACC,IAAI,CAACgB,cAAc,EAAE,MAAM,EAAE,IAAI,CAACmE,cAAc,CAACzL,IAAI,CAAC,IAAI,CAAC,CAAC;IACzF;EACF,CAAC,EAAE;IACDP,GAAG,EAAE,mBAAmB;IACxB9C,KAAK,EAAE,SAASqL,iBAAiB,GAAG;MAClC,IAAI,CAAC,IAAI,CAACD,SAAS,EAAE;QACnB;MACF;MAEA,IAAI,CAACwD,kBAAkB,EAAE;MACzB,IAAI,CAACG,4BAA4B,EAAE;IACrC;EACF,CAAC,EAAE;IACDjM,GAAG,EAAE,8BAA8B;IACnC9C,KAAK,EAAE,SAAS+O,4BAA4B,GAAG;MAC7C,IAAIC,MAAM,GAAG,IAAI;MAEjB,IAAI,CAAC,IAAI,CAACrF,IAAI,CAAC,mBAAmB,CAAC,EAAE;QACnC;MACF;MAEA,IAAI,CAACA,IAAI,CAAC,mBAAmB,CAAC,CAACsF,OAAO,CAAC,UAAUzB,SAAS,EAAE;QAC1D5M,kBAAkB,CAAC4M,SAAS,CAACN,QAAQ,CAAC,CAAC+B,OAAO,CAAC,UAAUC,EAAE,EAAE;UAC3DA,EAAE,CAACC,SAAS,GAAG,IAAI;UACnBD,EAAE,CAACE,YAAY,CAAC,WAAW,EAAE,IAAI,CAAC;UAElCJ,MAAM,CAACH,mBAAmB,CAACK,EAAE,EAAE,WAAW,CAAC;UAE3CF,MAAM,CAACH,mBAAmB,CAACK,EAAE,EAAE,SAAS,CAAC;UAEzCF,MAAM,CAACtF,gBAAgB,CAACwF,EAAE,EAAE,WAAW,EAAEF,MAAM,CAACK,WAAW,CAAChM,IAAI,CAAC2L,MAAM,CAAC,EAAE,IAAI,CAAC;UAE/EA,MAAM,CAACtF,gBAAgB,CAACwF,EAAE,EAAE,SAAS,EAAEF,MAAM,CAACM,SAAS,CAACjM,IAAI,CAAC2L,MAAM,CAAC,EAAE,IAAI,CAAC;UAE3EA,MAAM,CAACtF,gBAAgB,CAACwF,EAAE,EAAE,MAAM,EAAE,UAAUxJ,CAAC,EAAE;YAC/CA,CAAC,CAAClD,MAAM,CAACkJ,KAAK,CAAC6D,MAAM,GAAG,MAAM;UAChC,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;EACF,CAAC,EAAE;IACDzM,GAAG,EAAE,0BAA0B;IAC/B9C,KAAK,EAAE,SAASkL,wBAAwB,GAAG;MACzC,IAAI,CAAC,IAAI,CAACvB,IAAI,CAACgB,cAAc,EAAE;QAC7B;MACF;MAEA,IAAI6E,UAAU,GAAG,CAAC,CAAC,EAAEjP,MAAM,CAACkP,cAAc,EAAE,IAAI,CAAC1H,OAAO,CAAC4B,IAAI,CAAC+F,eAAe,CAAC;MAC9E,IAAI,CAAC/F,IAAI,CAACgB,cAAc,CAACe,KAAK,CAAC+C,MAAM,GAAGe,UAAU,IAAIA,UAAU,CAACf,MAAM,GAAG,EAAE,CAAC1F,MAAM,CAACyG,UAAU,CAACf,MAAM,EAAE,IAAI,CAAC,GAAG,QAAQ;MACvH,IAAI,CAAC9E,IAAI,CAACgB,cAAc,CAACe,KAAK,CAACS,KAAK,GAAGqD,UAAU,IAAIA,UAAU,CAACrD,KAAK,GAAG,EAAE,CAACpD,MAAM,CAACyG,UAAU,CAACrD,KAAK,EAAE,IAAI,CAAC,GAAG,MAAM;IACpH;EACF,CAAC,EAAE;IACDrJ,GAAG,EAAE,aAAa;IAClB9C,KAAK,EAAE,SAASqP,WAAW,CAAC3J,CAAC,EAAE;MAC7B;MACA,IAAIiK,UAAU,GAAGjK,CAAC,CAACkK,OAAO;QACtBA,OAAO,GAAGD,UAAU,KAAK,KAAK,CAAC,GAAG,CAAC,GAAGA,UAAU;QAChDE,UAAU,GAAGnK,CAAC,CAACoK,OAAO;QACtBA,OAAO,GAAGD,UAAU,KAAK,KAAK,CAAC,GAAG,CAAC,GAAGA,UAAU;MACpD,IAAI,CAACE,WAAW,GAAGH,OAAO;MAC1B,IAAI,CAACI,WAAW,GAAGF,OAAO;MAC1BpK,CAAC,CAACyE,YAAY,CAAC8F,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;MAClC,IAAI,CAAC/E,wBAAwB,EAAE;MAC/B,IAAI,CAACC,QAAQ,CAAC,IAAI,CAACxB,IAAI,CAACgB,cAAc,EAAE,SAAS,CAAC;IACpD;EACF,CAAC,EAAE;IACD7H,GAAG,EAAE,gBAAgB;IACrB9C,KAAK,EAAE,SAAS8O,cAAc,CAACpJ,CAAC,EAAE;MAChC,IAAI,CAACwK,SAAS,GAAGxK,CAAC;MAClBA,CAAC,CAACmE,cAAc,EAAE;MAClB,OAAO,KAAK;IACd;EACF,CAAC,EAAE;IACD/G,GAAG,EAAE,WAAW;IAChB9C,KAAK,EAAE,SAASsP,SAAS,CAAC5J,CAAC,EAAE;MAC3B;MACA;MACA,IAAIyK,MAAM,GAAG,IAAI,CAACD,SAAS,GAAG,IAAI,CAACA,SAAS,CAACC,MAAM,GAAG,IAAI;MAC1D,IAAIC,MAAM,GAAG,IAAI,CAACF,SAAS,GAAG,IAAI,CAACA,SAAS,CAACE,MAAM,GAAG,IAAI;MAC1D,IAAIC,KAAK,GAAG,GAAG;MACf,IAAIC,MAAM,GAAG,EAAE,CAAC,CAAC;;MAEjB,IAAI,CAAChF,WAAW,CAAC,IAAI,CAAC3B,IAAI,CAACgB,cAAc,EAAE,SAAS,CAAC,CAAC,CAAC;;MAEvD,IAAI,CAAC,IAAI,CAACuF,SAAS,EAAE;QACnB;MACF;MAEA,IAAIlK,OAAO,GAAGN,CAAC,CAAClD,MAAM;MACtB,IAAI+N,IAAI,GAAGvK,OAAO,CAACwK,YAAY,CAAC,WAAW,CAAC;MAC5C,IAAI1N,GAAG,GAAGkD,OAAO,CAACwK,YAAY,CAAC,UAAU,CAAC;MAC1C,IAAIpH,KAAK,GAAGpD,OAAO,CAACwK,YAAY,CAAC,YAAY,CAAC;MAC9C,IAAItC,MAAM,GAAG,CAAC,CAAC,EAAE3N,MAAM,CAACkQ,aAAa,EAAE,IAAI,CAACC,OAAO,CAACH,IAAI,CAAC,CAAC;MAE1D,IAAIzN,GAAG,IAAIsG,KAAK,EAAE;QAChB,IAAIuH,IAAI,GAAG,IAAI,CAACC,gBAAgB,CAAC9N,GAAG,EAAEsG,KAAK,CAAC;QAE5ClJ,OAAO,CAACD,OAAO,CAAC4Q,KAAK,CAAC3C,MAAM,EAAEyC,IAAI,CAAC;MACrC,CAAC,CAAC;;MAGFlQ,QAAQ,CAACR,OAAO,CAAC6Q,QAAQ,CAAC,CAAC,IAAI,CAAC/I,OAAO,CAAC4F,KAAK,CAAC,EAAEO,MAAM,CAAC;MAEvD,IAAI,CAACnG,OAAO,CAAC4F,KAAK,CAAClH,UAAU,CAACsK,IAAI,CAAC7C,MAAM,CAAC;MAE1CA,MAAM,CAACG,OAAO,GAAG;QACfG,GAAG,EAAE4B,MAAM,GAAG,IAAI,CAACJ,WAAW,GAAGM,MAAM;QACvC/B,IAAI,EAAE4B,MAAM,GAAG,IAAI,CAACJ,WAAW;QAC/B5D,KAAK,EAAEkE,KAAK;QACZ5B,MAAM,EAAE6B;MACV,CAAC;MACD,IAAI,CAACvI,OAAO,CAACiJ,YAAY,CAAC9C,MAAM,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC;MACjD,IAAI,CAACnG,OAAO,CAACiD,WAAW,CAAC;QACvBtJ,IAAI,EAAE,YAAY;QAClBiG,IAAI,EAAEuG;MACR,CAAC,CAAC;MACF,IAAI,CAACxB,IAAI,CAAC,cAAc,EAAEwB,MAAM,EAAE,IAAI,CAACnG,OAAO,EAAEmG,MAAM,CAACpL,GAAG,EAAE,IAAI,CAACiF,OAAO,CAACgD,SAAS,CAACtE,UAAU,CAACxE,MAAM,EAAE,CAAC,IAAI,CAACgE,OAAO,CAACyI,SAAS,IAAI,CAACR,MAAM,CAACQ,SAAS,CAAC,CAAC,CAAC;;MAErJ,IAAI,CAACwB,SAAS,GAAG,IAAI;MACrBxK,CAAC,CAAClD,MAAM,CAACkJ,KAAK,CAAC6D,MAAM,GAAG,SAAS;IACnC;EACF,CAAC,EAAE;IACDzM,GAAG,EAAE,4BAA4B;IACjC9C,KAAK,EAAE,SAASiR,0BAA0B,GAAG;MAC3C,IAAIC,MAAM,GAAG,IAAI;MAEjB,IAAIC,eAAe,GAAG,IAAI,CAACC,mBAAmB,EAAE,CAAC,CAAC;;MAElD,IAAI,CAAClR,OAAO,CAACD,OAAO,CAACoR,OAAO,CAAC,IAAI,CAACF,eAAe,EAAEA,eAAe,CAAC,EAAE;QACnE,CAAC,CAAC,EAAE3Q,UAAU,CAACkN,aAAa,EAAE,IAAI,CAAC3F,OAAO,CAACuJ,aAAa,EAAE,EAAE,UAAU1D,IAAI,EAAEnB,IAAI,EAAE;UAChF,IAAIyE,MAAM,CAACC,eAAe,CAAChE,QAAQ,CAACV,IAAI,CAAC,EAAE;YACzCyE,MAAM,CAACnJ,OAAO,CAACiD,WAAW,CAAC;cACzBtJ,IAAI,EAAE,eAAe;cACrBiG,IAAI,EAAEiG,IAAI,CAAC7C;YACb,CAAC,CAAC;UACJ;QACF,CAAC,CAAC;QACF,IAAI,CAACoG,eAAe,GAAGA,eAAe;MACxC;MAEA,IAAI,CAACA,eAAe,CAAClP,MAAM,EAAE;QAC3B;MACF;MAEA,CAAC,CAAC,EAAEzB,UAAU,CAACkN,aAAa,EAAE,IAAI,CAAC3F,OAAO,CAACuJ,aAAa,EAAE,EAAE,UAAU1D,IAAI,EAAEnB,IAAI,EAAE;QAChF,IAAIyE,MAAM,CAACC,eAAe,CAAChE,QAAQ,CAACV,IAAI,CAAC,EAAE;UACzCyE,MAAM,CAACnJ,OAAO,CAACiD,WAAW,CAAC;YACzBtJ,IAAI,EAAE,mBAAmB;YACzBiG,IAAI,EAAE;cACJ4J,MAAM,EAAE3D,IAAI,CAAC7C,SAAS,CAAC/B,EAAE;cACzBwI,YAAY,EAAE,yBAAyB,CAACzI,MAAM,CAAC6E,IAAI,CAAC9K,GAAG;YACzD;UACF,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;IACJ;EACF,CAAC,CAAC,CAAC;EAEH,OAAO8C,UAAU;AACnB,CAAC,CAACtF,gBAAgB,CAACL,OAAO,CAAC;AAE3BF,OAAO,CAACE,OAAO,GAAG2F,UAAU"},"metadata":{},"sourceType":"script"}