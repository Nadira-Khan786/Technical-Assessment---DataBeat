{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.concat.js\");\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nvar url = function url(formio) {\n  var xhrRequest = function xhrRequest(url, name, query, data, options, progressCallback, abortCallback) {\n    return new _nativePromiseOnly.default(function (resolve, reject) {\n      var xhr = new XMLHttpRequest();\n      var json = typeof data === 'string';\n      var fd = new FormData();\n      if (typeof progressCallback === 'function') {\n        xhr.upload.onprogress = progressCallback;\n      }\n      if (typeof abortCallback === 'function') {\n        abortCallback(function () {\n          return xhr.abort();\n        });\n      }\n      if (!json) {\n        for (var key in data) {\n          fd.append(key, data[key]);\n        }\n      }\n      xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          // Need to test if xhr.response is decoded or not.\n          var respData = {};\n          try {\n            respData = typeof xhr.response === 'string' ? JSON.parse(xhr.response) : {};\n            respData = respData && respData.data ? respData.data : respData;\n          } catch (err) {\n            respData = {};\n          } // Get the url of the file.\n\n          var respUrl = respData.hasOwnProperty('url') ? respData.url : \"\".concat(xhr.responseURL, \"/\").concat(name); // If they provide relative url, then prepend the url.\n\n          if (respUrl && respUrl[0] === '/') {\n            respUrl = \"\".concat(url).concat(respUrl);\n          }\n          resolve({\n            url: respUrl,\n            data: respData\n          });\n        } else {\n          reject(xhr.response || 'Unable to upload file');\n        }\n      };\n      xhr.onerror = function () {\n        return reject(xhr);\n      };\n      xhr.onabort = function () {\n        return reject(xhr);\n      };\n      var requestUrl = url + (url.indexOf('?') > -1 ? '&' : '?');\n      for (var _key in query) {\n        requestUrl += \"\".concat(_key, \"=\").concat(query[_key], \"&\");\n      }\n      if (requestUrl[requestUrl.length - 1] === '&') {\n        requestUrl = requestUrl.substr(0, requestUrl.length - 1);\n      }\n      xhr.open('POST', requestUrl);\n      if (json) {\n        xhr.setRequestHeader('Content-Type', 'application/json');\n      }\n      var token = formio.getToken();\n      if (token) {\n        xhr.setRequestHeader('x-jwt-token', token);\n      } //Overrides previous request props\n\n      if (options) {\n        var parsedOptions = typeof options === 'string' ? JSON.parse(options) : options;\n        for (var prop in parsedOptions) {\n          xhr[prop] = parsedOptions[prop];\n        }\n      }\n      xhr.send(json ? data : fd);\n    });\n  };\n  return {\n    title: 'Url',\n    name: 'url',\n    uploadFile: function uploadFile(file, name, dir, progressCallback, url, options, fileKey, groupPermissions, groupId, abortCallback) {\n      var uploadRequest = function uploadRequest(form) {\n        var _xhrRequest;\n        return xhrRequest(url, name, {\n          baseUrl: encodeURIComponent(formio.projectUrl),\n          project: form ? form.project : '',\n          form: form ? form._id : ''\n        }, (_xhrRequest = {}, _defineProperty(_xhrRequest, fileKey, file), _defineProperty(_xhrRequest, \"name\", name), _defineProperty(_xhrRequest, \"dir\", dir), _xhrRequest), options, progressCallback, abortCallback).then(function (response) {\n          // Store the project and form url along with the metadata.\n          response.data = response.data || {};\n          response.data.baseUrl = formio.projectUrl;\n          response.data.project = form ? form.project : '';\n          response.data.form = form ? form._id : '';\n          return {\n            storage: 'url',\n            name: name,\n            url: response.url,\n            size: file.size,\n            type: file.type,\n            data: response.data\n          };\n        });\n      };\n      if (file.private && formio.formId) {\n        return formio.loadForm().then(function (form) {\n          return uploadRequest(form);\n        });\n      } else {\n        return uploadRequest();\n      }\n    },\n    deleteFile: function deleteFile(fileInfo) {\n      return new _nativePromiseOnly.default(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('DELETE', fileInfo.url, true);\n        xhr.onload = function () {\n          if (xhr.status >= 200 && xhr.status < 300) {\n            resolve('File deleted');\n          } else {\n            reject(xhr.response || 'Unable to delete file');\n          }\n        };\n        xhr.send(null);\n      });\n    },\n    downloadFile: function downloadFile(file) {\n      if (file.private) {\n        if (formio.submissionId && file.data) {\n          file.data.submission = formio.submissionId;\n        }\n        return xhrRequest(file.url, file.name, {}, JSON.stringify(file)).then(function (response) {\n          return response.data;\n        });\n      } // Return the original as there is nothing to do.\n\n      return _nativePromiseOnly.default.resolve(file);\n    }\n  };\n};\nurl.title = 'Url';\nvar _default = url;\nexports.default = _default;","map":{"version":3,"names":["Object","defineProperty","exports","value","default","require","_nativePromiseOnly","_interopRequireDefault","obj","__esModule","_defineProperty","key","enumerable","configurable","writable","url","formio","xhrRequest","name","query","data","options","progressCallback","abortCallback","resolve","reject","xhr","XMLHttpRequest","json","fd","FormData","upload","onprogress","abort","append","onload","status","respData","response","JSON","parse","err","respUrl","hasOwnProperty","concat","responseURL","onerror","onabort","requestUrl","indexOf","_key","length","substr","open","setRequestHeader","token","getToken","parsedOptions","prop","send","title","uploadFile","file","dir","fileKey","groupPermissions","groupId","uploadRequest","form","_xhrRequest","baseUrl","encodeURIComponent","projectUrl","project","_id","then","storage","size","type","private","formId","loadForm","deleteFile","fileInfo","downloadFile","submissionId","submission","stringify","_default"],"sources":["D:/task/node_modules/formiojs/providers/storage/url.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar url = function url(formio) {\n  var xhrRequest = function xhrRequest(url, name, query, data, options, progressCallback, abortCallback) {\n    return new _nativePromiseOnly.default(function (resolve, reject) {\n      var xhr = new XMLHttpRequest();\n      var json = typeof data === 'string';\n      var fd = new FormData();\n\n      if (typeof progressCallback === 'function') {\n        xhr.upload.onprogress = progressCallback;\n      }\n\n      if (typeof abortCallback === 'function') {\n        abortCallback(function () {\n          return xhr.abort();\n        });\n      }\n\n      if (!json) {\n        for (var key in data) {\n          fd.append(key, data[key]);\n        }\n      }\n\n      xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          // Need to test if xhr.response is decoded or not.\n          var respData = {};\n\n          try {\n            respData = typeof xhr.response === 'string' ? JSON.parse(xhr.response) : {};\n            respData = respData && respData.data ? respData.data : respData;\n          } catch (err) {\n            respData = {};\n          } // Get the url of the file.\n\n\n          var respUrl = respData.hasOwnProperty('url') ? respData.url : \"\".concat(xhr.responseURL, \"/\").concat(name); // If they provide relative url, then prepend the url.\n\n          if (respUrl && respUrl[0] === '/') {\n            respUrl = \"\".concat(url).concat(respUrl);\n          }\n\n          resolve({\n            url: respUrl,\n            data: respData\n          });\n        } else {\n          reject(xhr.response || 'Unable to upload file');\n        }\n      };\n\n      xhr.onerror = function () {\n        return reject(xhr);\n      };\n\n      xhr.onabort = function () {\n        return reject(xhr);\n      };\n\n      var requestUrl = url + (url.indexOf('?') > -1 ? '&' : '?');\n\n      for (var _key in query) {\n        requestUrl += \"\".concat(_key, \"=\").concat(query[_key], \"&\");\n      }\n\n      if (requestUrl[requestUrl.length - 1] === '&') {\n        requestUrl = requestUrl.substr(0, requestUrl.length - 1);\n      }\n\n      xhr.open('POST', requestUrl);\n\n      if (json) {\n        xhr.setRequestHeader('Content-Type', 'application/json');\n      }\n\n      var token = formio.getToken();\n\n      if (token) {\n        xhr.setRequestHeader('x-jwt-token', token);\n      } //Overrides previous request props\n\n\n      if (options) {\n        var parsedOptions = typeof options === 'string' ? JSON.parse(options) : options;\n\n        for (var prop in parsedOptions) {\n          xhr[prop] = parsedOptions[prop];\n        }\n      }\n\n      xhr.send(json ? data : fd);\n    });\n  };\n\n  return {\n    title: 'Url',\n    name: 'url',\n    uploadFile: function uploadFile(file, name, dir, progressCallback, url, options, fileKey, groupPermissions, groupId, abortCallback) {\n      var uploadRequest = function uploadRequest(form) {\n        var _xhrRequest;\n\n        return xhrRequest(url, name, {\n          baseUrl: encodeURIComponent(formio.projectUrl),\n          project: form ? form.project : '',\n          form: form ? form._id : ''\n        }, (_xhrRequest = {}, _defineProperty(_xhrRequest, fileKey, file), _defineProperty(_xhrRequest, \"name\", name), _defineProperty(_xhrRequest, \"dir\", dir), _xhrRequest), options, progressCallback, abortCallback).then(function (response) {\n          // Store the project and form url along with the metadata.\n          response.data = response.data || {};\n          response.data.baseUrl = formio.projectUrl;\n          response.data.project = form ? form.project : '';\n          response.data.form = form ? form._id : '';\n          return {\n            storage: 'url',\n            name: name,\n            url: response.url,\n            size: file.size,\n            type: file.type,\n            data: response.data\n          };\n        });\n      };\n\n      if (file.private && formio.formId) {\n        return formio.loadForm().then(function (form) {\n          return uploadRequest(form);\n        });\n      } else {\n        return uploadRequest();\n      }\n    },\n    deleteFile: function deleteFile(fileInfo) {\n      return new _nativePromiseOnly.default(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('DELETE', fileInfo.url, true);\n\n        xhr.onload = function () {\n          if (xhr.status >= 200 && xhr.status < 300) {\n            resolve('File deleted');\n          } else {\n            reject(xhr.response || 'Unable to delete file');\n          }\n        };\n\n        xhr.send(null);\n      });\n    },\n    downloadFile: function downloadFile(file) {\n      if (file.private) {\n        if (formio.submissionId && file.data) {\n          file.data.submission = formio.submissionId;\n        }\n\n        return xhrRequest(file.url, file.name, {}, JSON.stringify(file)).then(function (response) {\n          return response.data;\n        });\n      } // Return the original as there is nothing to do.\n\n\n      return _nativePromiseOnly.default.resolve(file);\n    }\n  };\n};\n\nurl.title = 'Url';\nvar _default = url;\nexports.default = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}