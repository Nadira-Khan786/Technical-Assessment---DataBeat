{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nrequire(\"core-js/modules/es.reflect.construct.js\");\nrequire(\"core-js/modules/es.reflect.get.js\");\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\nrequire(\"core-js/modules/es.symbol.js\");\nrequire(\"core-js/modules/es.symbol.description.js\");\nrequire(\"core-js/modules/es.symbol.iterator.js\");\nrequire(\"core-js/modules/es.array.iterator.js\");\nrequire(\"core-js/modules/es.string.iterator.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.regexp.constructor.js\");\nrequire(\"core-js/modules/es.regexp.exec.js\");\nrequire(\"core-js/modules/es.regexp.to-string.js\");\nrequire(\"core-js/modules/es.string.replace.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\nvar _TextField = _interopRequireDefault(require(\"../textfield/TextField\"));\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\nvar _utils = require(\"../../utils/utils\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nvar TextAreaComponent = /*#__PURE__*/function (_TextFieldComponent) {\n  _inherits(TextAreaComponent, _TextFieldComponent);\n  var _super = _createSuper(TextAreaComponent);\n  function TextAreaComponent() {\n    _classCallCheck(this, TextAreaComponent);\n    return _super.apply(this, arguments);\n  }\n  _createClass(TextAreaComponent, [{\n    key: \"init\",\n    value: function init() {\n      _get(_getPrototypeOf(TextAreaComponent.prototype), \"init\", this).call(this);\n      this.editors = [];\n      this.editorsReady = [];\n      this.updateSizes = []; // Never submit on enter for text areas.\n\n      this.options.submitOnEnter = false;\n    }\n  }, {\n    key: \"defaultSchema\",\n    get: function get() {\n      return TextAreaComponent.schema();\n    }\n  }, {\n    key: \"inputInfo\",\n    get: function get() {\n      var info = _get(_getPrototypeOf(TextAreaComponent.prototype), \"inputInfo\", this);\n      info.type = this.component.wysiwyg ? 'div' : 'textarea';\n      if (this.component.rows) {\n        info.attr.rows = this.component.rows;\n      }\n      return info;\n    }\n  }, {\n    key: \"validateMultiple\",\n    value: function validateMultiple() {\n      return !this.isJsonValue;\n    }\n  }, {\n    key: \"renderElement\",\n    value: function renderElement(value, index) {\n      var info = this.inputInfo;\n      info.attr = info.attr || {};\n      info.content = value;\n      if ((this.options.readOnly || this.disabled) && !this.isHtmlRenderMode()) {\n        var elementStyle = this.info.attr.style || '';\n        var children = \"<div ref=\\\"input\\\" class=\\\"formio-editor-read-only-content\\\" \".concat(elementStyle ? \"style='\".concat(elementStyle, \"'\") : '', \"></div>\");\n        return this.renderTemplate('well', {\n          children: children,\n          nestedKey: this.key,\n          value: value\n        });\n      }\n      return this.renderTemplate('input', {\n        prefix: this.prefix,\n        suffix: this.suffix,\n        input: info,\n        value: value,\n        index: index\n      });\n    }\n  }, {\n    key: \"autoExpand\",\n    get: function get() {\n      return this.component.autoExpand;\n    }\n    /**\n     * Updates the editor value.\n     *\n     * @param newValue\n     */\n  }, {\n    key: \"updateEditorValue\",\n    value: function updateEditorValue(index, newValue) {\n      newValue = this.getConvertedValue(this.trimBlanks(newValue));\n      var dataValue = this.dataValue;\n      if (this.component.multiple && Array.isArray(dataValue)) {\n        var newArray = _lodash.default.clone(dataValue);\n        newArray[index] = newValue;\n        newValue = newArray;\n      }\n      if (!_lodash.default.isEqual(newValue, dataValue) && (!_lodash.default.isEmpty(newValue) || !_lodash.default.isEmpty(dataValue))) {\n        this.updateValue(newValue, {\n          modified: !this.autoModified\n        }, index);\n      }\n      this.autoModified = false;\n    }\n  }, {\n    key: \"attachElement\",\n    value: function attachElement(element, index) {\n      var _this2 = this;\n      if (this.autoExpand && (this.isPlain || this.options.readOnly || this.options.htmlView)) {\n        if (element.nodeName === 'TEXTAREA') {\n          this.addAutoExpanding(element, index);\n        }\n      }\n      if (this.options.readOnly) {\n        return element;\n      }\n      if (this.component.wysiwyg && !this.component.editor) {\n        this.component.editor = 'ckeditor';\n      }\n      var settings = _lodash.default.isEmpty(this.component.wysiwyg) ? this.wysiwygDefault[this.component.editor] || this.wysiwygDefault.default : this.component.wysiwyg; // Keep track of when this editor is ready.\n\n      this.editorsReady[index] = new _nativePromiseOnly.default(function (editorReady) {\n        // Attempt to add a wysiwyg editor. In order to add one, it must be included on the global scope.\n        switch (_this2.component.editor) {\n          case 'ace':\n            if (!settings) {\n              settings = {};\n            }\n            settings.mode = _this2.component.as ? \"ace/mode/\".concat(_this2.component.as) : 'ace/mode/javascript';\n            _this2.addAce(element, settings, function (newValue) {\n              return _this2.updateEditorValue(index, newValue);\n            }).then(function (ace) {\n              _this2.editors[index] = ace;\n              var dataValue = _this2.dataValue;\n              dataValue = _this2.component.multiple && Array.isArray(dataValue) ? dataValue[index] : dataValue;\n              ace.setValue(_this2.setConvertedValue(dataValue, index));\n              editorReady(ace);\n              return ace;\n            }).catch(function (err) {\n              return console.warn(err);\n            });\n            break;\n          case 'quill':\n            // Normalize the configurations for quill.\n            if (settings.hasOwnProperty('toolbarGroups') || settings.hasOwnProperty('toolbar')) {\n              console.warn('The WYSIWYG settings are configured for CKEditor. For this renderer, you will need to use configurations for the Quill Editor. See https://quilljs.com/docs/configuration for more information.');\n              settings = _this2.wysiwygDefault.quill;\n            } // Add the quill editor.\n\n            _this2.addQuill(element, settings, function () {\n              return _this2.updateEditorValue(index, _this2.editors[index].root.innerHTML);\n            }).then(function (quill) {\n              _this2.editors[index] = quill;\n              if (_this2.component.isUploadEnabled) {\n                var _this = _this2;\n                quill.getModule('uploader').options.handler = function () {\n                  var _this$imageHandler;\n                  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                    args[_key] = arguments[_key];\n                  }\n\n                  //we need initial 'this' because quill calls this method with its own context and we need some inner quill methods exposed in it\n                  //we also need current component instance as we use some fields and methods from it as well\n                  (_this$imageHandler = _this.imageHandler).call.apply(_this$imageHandler, [_this, this].concat(args));\n                };\n              }\n              quill.root.spellcheck = _this2.component.spellcheck;\n              if (_this2.options.readOnly || _this2.disabled) {\n                quill.disable();\n              }\n              var dataValue = _this2.dataValue;\n              dataValue = _this2.component.multiple && Array.isArray(dataValue) ? dataValue[index] : dataValue;\n              quill.setContents(quill.clipboard.convert({\n                html: _this2.setConvertedValue(dataValue, index)\n              }));\n              editorReady(quill);\n              return quill;\n            }).catch(function (err) {\n              return console.warn(err);\n            });\n            break;\n          case 'ckeditor':\n            settings = settings || {};\n            settings.rows = _this2.component.rows;\n            _this2.addCKE(element, settings, function (newValue) {\n              return _this2.updateEditorValue(index, newValue);\n            }).then(function (editor) {\n              _this2.editors[index] = editor;\n              var dataValue = _this2.dataValue;\n              dataValue = _this2.component.multiple && Array.isArray(dataValue) ? dataValue[index] : dataValue;\n              var value = _this2.setConvertedValue(dataValue, index);\n              var isReadOnly = _this2.options.readOnly || _this2.disabled; // Use ckeditor 4 in IE browser\n\n              if ((0, _utils.getBrowserInfo)().ie) {\n                editor.on('instanceReady', function () {\n                  editor.setReadOnly(isReadOnly);\n                  editor.setData(value);\n                });\n              } else {\n                var numRows = parseInt(_this2.component.rows, 10);\n                if (_lodash.default.isFinite(numRows) && _lodash.default.has(editor, 'ui.view.editable.editableElement')) {\n                  // Default height is 21px with 10px margin + a 14px top margin.\n                  var editorHeight = numRows * 31 + 14;\n                  editor.ui.view.editable.editableElement.style.height = \"\".concat(editorHeight, \"px\");\n                }\n                editor.isReadOnly = isReadOnly;\n                editor.data.set(value);\n              }\n              editorReady(editor);\n              return editor;\n            });\n            break;\n          default:\n            _get(_getPrototypeOf(TextAreaComponent.prototype), \"attachElement\", _this2).call(_this2, element, index);\n            break;\n        }\n      });\n      return element;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var attached = _get(_getPrototypeOf(TextAreaComponent.prototype), \"attach\", this).call(this, element); // Make sure we restore the value after attaching since wysiwygs and readonly texts need an additional set.\n\n      this.restoreValue();\n      return attached;\n    }\n  }, {\n    key: \"imageHandler\",\n    value: function imageHandler(moduleInstance, range, files) {\n      var _this3 = this;\n      var quillInstance = moduleInstance.quill;\n      if (!files || !files.length) {\n        console.warn('No files selected');\n        return;\n      }\n      quillInstance.enable(false);\n      var _this$component = this.component,\n        uploadStorage = _this$component.uploadStorage,\n        uploadUrl = _this$component.uploadUrl,\n        uploadOptions = _this$component.uploadOptions,\n        uploadDir = _this$component.uploadDir,\n        fileKey = _this$component.fileKey;\n      var requestData;\n      this.fileService.uploadFile(uploadStorage, files[0], (0, _utils.uniqueName)(files[0].name), uploadDir || '',\n      //should pass empty string if undefined\n      null, uploadUrl, uploadOptions, fileKey).then(function (result) {\n        requestData = result;\n        return _this3.fileService.downloadFile(result);\n      }).then(function (result) {\n        quillInstance.enable(true);\n        var Delta = Quill.import('delta');\n        quillInstance.updateContents(new Delta().retain(range.index).delete(range.length).insert({\n          image: result.url\n        }, {\n          alt: JSON.stringify(requestData)\n        }), Quill.sources.USER);\n      }).catch(function (error) {\n        console.warn('Quill image upload failed');\n        console.warn(error);\n        quillInstance.enable(true);\n      });\n    }\n  }, {\n    key: \"isPlain\",\n    get: function get() {\n      return !this.component.wysiwyg && !this.component.editor;\n    }\n  }, {\n    key: \"htmlView\",\n    get: function get() {\n      return this.options.readOnly && (this.component.editor || this.component.wysiwyg);\n    }\n  }, {\n    key: \"setValueAt\",\n    value: function setValueAt(index, value) {\n      var _this4 = this;\n      var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      _get(_getPrototypeOf(TextAreaComponent.prototype), \"setValueAt\", this).call(this, index, value, flags);\n      if (this.editorsReady[index]) {\n        var setEditorsValue = function setEditorsValue(flags) {\n          return function (editor) {\n            if (!flags.skipWysiwyg) {\n              _this4.autoModified = true;\n              switch (_this4.component.editor) {\n                case 'ace':\n                  editor.setValue(_this4.setConvertedValue(value, index));\n                  break;\n                case 'quill':\n                  if (_this4.component.isUploadEnabled) {\n                    _this4.setAsyncConvertedValue(value).then(function (result) {\n                      var content = editor.clipboard.convert({\n                        html: result\n                      });\n                      editor.setContents(content);\n                    });\n                  } else {\n                    var convertedValue = _this4.setConvertedValue(value, index);\n                    var content = editor.clipboard.convert({\n                      html: convertedValue\n                    });\n                    editor.setContents(content);\n                  }\n                  break;\n                case 'ckeditor':\n                  editor.data.set(_this4.setConvertedValue(value, index));\n                  break;\n              }\n            }\n          };\n        };\n        this.editorsReady[index].then(setEditorsValue(_lodash.default.clone(flags)));\n      }\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      var _this5 = this;\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (this.isPlain || this.options.readOnly || this.disabled) {\n        value = this.component.multiple && Array.isArray(value) ? value.map(function (val, index) {\n          return _this5.setConvertedValue(val, index);\n        }) : this.setConvertedValue(value);\n        return _get(_getPrototypeOf(TextAreaComponent.prototype), \"setValue\", this).call(this, value, flags);\n      }\n      flags.skipWysiwyg = _lodash.default.isEqual(value, this.getValue());\n      return _get(_getPrototypeOf(TextAreaComponent.prototype), \"setValue\", this).call(this, value, flags);\n    }\n  }, {\n    key: \"setContent\",\n    value: function setContent(element, content, forceSanitize) {\n      _get(_getPrototypeOf(TextAreaComponent.prototype), \"setContent\", this).call(this, element, content, forceSanitize, {\n        addAttr: ['allow', 'allowfullscreen', 'frameborder', 'scrolling'],\n        addTags: ['iframe']\n      });\n    }\n  }, {\n    key: \"setReadOnlyValue\",\n    value: function setReadOnlyValue(value, index) {\n      index = index || 0;\n      if (this.options.readOnly || this.disabled) {\n        if (this.refs.input && this.refs.input[index]) {\n          if (this.component.inputFormat === 'plain') {\n            this.refs.input[index].innerText = this.interpolate(value, {}, {\n              noeval: true\n            });\n          } else {\n            this.setContent(this.refs.input[index], this.interpolate(value, {}, {\n              noeval: true\n            }), this.shouldSanitizeValue);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"isJsonValue\",\n    get: function get() {\n      return this.component.as && this.component.as === 'json';\n    }\n  }, {\n    key: \"setConvertedValue\",\n    value: function setConvertedValue(value, index) {\n      if (this.isJsonValue && !_lodash.default.isNil(value)) {\n        try {\n          value = JSON.stringify(value, null, 2);\n        } catch (err) {\n          console.warn(err);\n        }\n      }\n      if (!_lodash.default.isString(value)) {\n        value = '';\n      }\n      this.setReadOnlyValue(value, index);\n      return value;\n    }\n  }, {\n    key: \"setAsyncConvertedValue\",\n    value: function setAsyncConvertedValue(value) {\n      if (this.isJsonValue && value) {\n        try {\n          value = JSON.stringify(value, null, 2);\n        } catch (err) {\n          console.warn(err);\n        }\n      }\n      if (!_lodash.default.isString(value)) {\n        value = '';\n      }\n      var htmlDoc = new DOMParser().parseFromString(value, 'text/html');\n      var images = htmlDoc.getElementsByTagName('img');\n      if (images.length) {\n        return this.setImagesUrl(images).then(function () {\n          value = htmlDoc.getElementsByTagName('body')[0].innerHTML;\n          return value;\n        });\n      } else {\n        return _nativePromiseOnly.default.resolve(value);\n      }\n    }\n  }, {\n    key: \"setImagesUrl\",\n    value: function setImagesUrl(images) {\n      var _this6 = this;\n      return _nativePromiseOnly.default.all(_lodash.default.map(images, function (image) {\n        var requestData;\n        try {\n          requestData = JSON.parse(image.getAttribute('alt'));\n        } catch (error) {\n          console.warn(error);\n        }\n        return _this6.fileService.downloadFile(requestData).then(function (result) {\n          image.setAttribute('src', result.url);\n        });\n      }));\n    }\n  }, {\n    key: \"addAutoExpanding\",\n    value: function addAutoExpanding(textarea, index) {\n      var heightOffset = null;\n      var previousHeight = null;\n      var changeOverflow = function changeOverflow(value) {\n        var width = textarea.style.width;\n        textarea.style.width = '0px';\n        textarea.offsetWidth;\n        textarea.style.width = width;\n        textarea.style.overflowY = value;\n      };\n      var preventParentScroll = function preventParentScroll(element, changeSize) {\n        var nodeScrolls = [];\n        while (element && element.parentNode && element.parentNode instanceof Element) {\n          if (element.parentNode.scrollTop) {\n            nodeScrolls.push({\n              node: element.parentNode,\n              scrollTop: element.parentNode.scrollTop\n            });\n          }\n          element = element.parentNode;\n        }\n        changeSize();\n        nodeScrolls.forEach(function (nodeScroll) {\n          nodeScroll.node.scrollTop = nodeScroll.scrollTop;\n        });\n      };\n      var resize = function resize() {\n        if (textarea.scrollHeight === 0) {\n          return;\n        }\n        preventParentScroll(textarea, function () {\n          textarea.style.height = '';\n          textarea.style.height = \"\".concat(textarea.scrollHeight + heightOffset, \"px\");\n        });\n      };\n      var update = _lodash.default.debounce(function () {\n        resize();\n        var styleHeight = Math.round(parseFloat(textarea.style.height));\n        var computed = window.getComputedStyle(textarea, null);\n        var currentHeight = textarea.offsetHeight;\n        if (currentHeight < styleHeight && computed.overflowY === 'hidden') {\n          changeOverflow('scroll');\n        } else if (computed.overflowY !== 'hidden') {\n          changeOverflow('hidden');\n        }\n        resize();\n        currentHeight = textarea.offsetHeight;\n        if (previousHeight !== currentHeight) {\n          previousHeight = currentHeight;\n          update();\n        }\n      }, 200);\n      var computedStyle = window.getComputedStyle(textarea, null);\n      textarea.style.resize = 'none';\n      heightOffset = parseFloat(computedStyle.borderTopWidth) + parseFloat(computedStyle.borderBottomWidth) || 0;\n      if (window) {\n        this.addEventListener(window, 'resize', update);\n      }\n      this.addEventListener(textarea, 'input', update);\n      this.on('initialized', update);\n      this.updateSizes[index] = update;\n      update();\n    }\n  }, {\n    key: \"trimBlanks\",\n    value: function trimBlanks(value) {\n      if (!value || this.isPlain) {\n        return value;\n      }\n      var trimBlanks = function trimBlanks(value) {\n        var nbsp = '<p>&nbsp;</p>';\n        var br = '<p><br></p>';\n        var brNbsp = '<p><br>&nbsp;</p>';\n        var regExp = new RegExp(\"^\".concat(nbsp, \"|\").concat(nbsp, \"$|^\").concat(br, \"|\").concat(br, \"$|^\").concat(brNbsp, \"|\").concat(brNbsp, \"$\"), 'g');\n        return typeof value === 'string' ? value.replace(regExp, '') : value;\n      };\n      if (Array.isArray(value)) {\n        value.forEach(function (input, index) {\n          value[index] = trimBlanks(input);\n        });\n      } else {\n        value = trimBlanks(value);\n      }\n      return value;\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(flags, fromRoot) {\n      var changed = _get(_getPrototypeOf(TextAreaComponent.prototype), \"onChange\", this).call(this, flags, fromRoot);\n      this.updateSizes.forEach(function (updateSize) {\n        return updateSize();\n      });\n      return changed;\n    }\n  }, {\n    key: \"hasChanged\",\n    value: function hasChanged(newValue, oldValue) {\n      return _get(_getPrototypeOf(TextAreaComponent.prototype), \"hasChanged\", this).call(this, this.trimBlanks(newValue), this.trimBlanks(oldValue));\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.dataValue;\n      return _get(_getPrototypeOf(TextAreaComponent.prototype), \"isEmpty\", this).call(this, this.trimBlanks(value));\n    }\n  }, {\n    key: \"defaultValue\",\n    get: function get() {\n      var defaultValue = _get(_getPrototypeOf(TextAreaComponent.prototype), \"defaultValue\", this);\n      if (this.component.editor === 'quill' && !defaultValue) {\n        defaultValue = '<p><br></p>';\n      }\n      return defaultValue;\n    }\n  }, {\n    key: \"getConvertedValue\",\n    value: function getConvertedValue(value) {\n      if (this.isJsonValue && value) {\n        try {\n          value = JSON.parse(value);\n        } catch (err) {// console.warn(err);\n        }\n      }\n      return value;\n    }\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      var _this7 = this;\n\n      // Destroy all editors.\n      this.editors.forEach(function (editor) {\n        if (editor.destroy) {\n          editor.destroy();\n        }\n      });\n      this.editors = [];\n      this.editorsReady = [];\n      this.updateSizes.forEach(function (updateSize) {\n        return _this7.removeEventListener(window, 'resize', updateSize);\n      });\n      this.updateSizes = [];\n      _get(_getPrototypeOf(TextAreaComponent.prototype), \"detach\", this).call(this);\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      if (this.isPlain) {\n        return this.getConvertedValue(_get(_getPrototypeOf(TextAreaComponent.prototype), \"getValue\", this).call(this));\n      }\n      return this.dataValue;\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      _get(_getPrototypeOf(TextAreaComponent.prototype), \"focus\", this).call(this);\n      switch (this.component.editor) {\n        case 'ckeditor':\n          {\n            var _this$editors$0$editi, _this$editors$0$editi2;\n            if ((_this$editors$0$editi = this.editors[0].editing) !== null && _this$editors$0$editi !== void 0 && (_this$editors$0$editi2 = _this$editors$0$editi.view) !== null && _this$editors$0$editi2 !== void 0 && _this$editors$0$editi2.focus) {\n              this.editors[0].editing.view.focus();\n            }\n            this.element.scrollIntoView();\n            break;\n          }\n        case 'ace':\n          {\n            this.editors[0].focus();\n            this.element.scrollIntoView();\n            break;\n          }\n        case 'quill':\n          {\n            this.editors[0].focus();\n            break;\n          }\n      }\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len2 = arguments.length, extend = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        extend[_key2] = arguments[_key2];\n      }\n      return _TextField.default.schema.apply(_TextField.default, [{\n        type: 'textarea',\n        label: 'Text Area',\n        key: 'textArea',\n        rows: 3,\n        wysiwyg: false,\n        editor: '',\n        fixedSize: true,\n        inputFormat: 'html',\n        validate: {\n          minWords: '',\n          maxWords: ''\n        }\n      }].concat(extend));\n    }\n  }, {\n    key: \"builderInfo\",\n    get: function get() {\n      return {\n        title: 'Text Area',\n        group: 'basic',\n        icon: 'font',\n        documentation: '/userguide/forms/form-components#text-area',\n        weight: 20,\n        schema: TextAreaComponent.schema()\n      };\n    }\n  }]);\n  return TextAreaComponent;\n}(_TextField.default);\nexports.default = TextAreaComponent;","map":{"version":3,"names":["_typeof","obj","Symbol","iterator","constructor","prototype","require","Object","defineProperty","exports","value","default","_TextField","_interopRequireDefault","_lodash","_nativePromiseOnly","_utils","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","_get","Reflect","get","bind","property","receiver","base","_superPropBase","desc","getOwnPropertyDescriptor","call","arguments","apply","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","TextAreaComponent","_TextFieldComponent","_super","init","editors","editorsReady","updateSizes","options","submitOnEnter","schema","info","type","component","wysiwyg","rows","attr","validateMultiple","isJsonValue","renderElement","index","inputInfo","content","readOnly","disabled","isHtmlRenderMode","elementStyle","style","children","concat","renderTemplate","nestedKey","prefix","suffix","input","autoExpand","updateEditorValue","newValue","getConvertedValue","trimBlanks","dataValue","multiple","Array","isArray","newArray","clone","isEqual","isEmpty","updateValue","modified","autoModified","attachElement","element","_this2","isPlain","htmlView","nodeName","addAutoExpanding","editor","settings","wysiwygDefault","editorReady","mode","as","addAce","then","ace","setValue","setConvertedValue","catch","err","console","warn","quill","addQuill","root","innerHTML","isUploadEnabled","_this","getModule","handler","_this$imageHandler","_len","args","_key","imageHandler","spellcheck","disable","setContents","clipboard","convert","html","addCKE","isReadOnly","getBrowserInfo","ie","on","setReadOnly","setData","numRows","parseInt","isFinite","has","editorHeight","ui","view","editable","editableElement","height","data","set","attach","attached","restoreValue","moduleInstance","range","files","_this3","quillInstance","enable","_this$component","uploadStorage","uploadUrl","uploadOptions","uploadDir","fileKey","requestData","fileService","uploadFile","uniqueName","name","downloadFile","Delta","Quill","import","updateContents","retain","delete","insert","image","url","alt","JSON","stringify","sources","USER","error","setValueAt","_this4","flags","undefined","setEditorsValue","skipWysiwyg","setAsyncConvertedValue","convertedValue","_this5","map","val","getValue","setContent","forceSanitize","addAttr","addTags","setReadOnlyValue","refs","inputFormat","innerText","interpolate","noeval","shouldSanitizeValue","isNil","isString","htmlDoc","DOMParser","parseFromString","images","getElementsByTagName","setImagesUrl","resolve","_this6","all","parse","getAttribute","setAttribute","textarea","heightOffset","previousHeight","changeOverflow","width","offsetWidth","overflowY","preventParentScroll","changeSize","nodeScrolls","parentNode","Element","scrollTop","push","node","forEach","nodeScroll","resize","scrollHeight","update","debounce","styleHeight","Math","round","parseFloat","computed","window","getComputedStyle","currentHeight","offsetHeight","computedStyle","borderTopWidth","borderBottomWidth","addEventListener","nbsp","br","brNbsp","regExp","RegExp","replace","onChange","fromRoot","changed","updateSize","hasChanged","oldValue","defaultValue","detach","_this7","destroy","removeEventListener","focus","_this$editors$0$editi","_this$editors$0$editi2","editing","scrollIntoView","_len2","extend","_key2","label","fixedSize","validate","minWords","maxWords","title","group","icon","documentation","weight"],"sources":["D:/task/node_modules/formiojs/components/textarea/TextArea.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.reflect.get.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.regexp.constructor.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.regexp.to-string.js\");\n\nrequire(\"core-js/modules/es.string.replace.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nvar _TextField = _interopRequireDefault(require(\"../textfield/TextField\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nvar _utils = require(\"../../utils/utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar TextAreaComponent = /*#__PURE__*/function (_TextFieldComponent) {\n  _inherits(TextAreaComponent, _TextFieldComponent);\n\n  var _super = _createSuper(TextAreaComponent);\n\n  function TextAreaComponent() {\n    _classCallCheck(this, TextAreaComponent);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(TextAreaComponent, [{\n    key: \"init\",\n    value: function init() {\n      _get(_getPrototypeOf(TextAreaComponent.prototype), \"init\", this).call(this);\n\n      this.editors = [];\n      this.editorsReady = [];\n      this.updateSizes = []; // Never submit on enter for text areas.\n\n      this.options.submitOnEnter = false;\n    }\n  }, {\n    key: \"defaultSchema\",\n    get: function get() {\n      return TextAreaComponent.schema();\n    }\n  }, {\n    key: \"inputInfo\",\n    get: function get() {\n      var info = _get(_getPrototypeOf(TextAreaComponent.prototype), \"inputInfo\", this);\n\n      info.type = this.component.wysiwyg ? 'div' : 'textarea';\n\n      if (this.component.rows) {\n        info.attr.rows = this.component.rows;\n      }\n\n      return info;\n    }\n  }, {\n    key: \"validateMultiple\",\n    value: function validateMultiple() {\n      return !this.isJsonValue;\n    }\n  }, {\n    key: \"renderElement\",\n    value: function renderElement(value, index) {\n      var info = this.inputInfo;\n      info.attr = info.attr || {};\n      info.content = value;\n\n      if ((this.options.readOnly || this.disabled) && !this.isHtmlRenderMode()) {\n        var elementStyle = this.info.attr.style || '';\n        var children = \"<div ref=\\\"input\\\" class=\\\"formio-editor-read-only-content\\\" \".concat(elementStyle ? \"style='\".concat(elementStyle, \"'\") : '', \"></div>\");\n        return this.renderTemplate('well', {\n          children: children,\n          nestedKey: this.key,\n          value: value\n        });\n      }\n\n      return this.renderTemplate('input', {\n        prefix: this.prefix,\n        suffix: this.suffix,\n        input: info,\n        value: value,\n        index: index\n      });\n    }\n  }, {\n    key: \"autoExpand\",\n    get: function get() {\n      return this.component.autoExpand;\n    }\n    /**\n     * Updates the editor value.\n     *\n     * @param newValue\n     */\n\n  }, {\n    key: \"updateEditorValue\",\n    value: function updateEditorValue(index, newValue) {\n      newValue = this.getConvertedValue(this.trimBlanks(newValue));\n      var dataValue = this.dataValue;\n\n      if (this.component.multiple && Array.isArray(dataValue)) {\n        var newArray = _lodash.default.clone(dataValue);\n\n        newArray[index] = newValue;\n        newValue = newArray;\n      }\n\n      if (!_lodash.default.isEqual(newValue, dataValue) && (!_lodash.default.isEmpty(newValue) || !_lodash.default.isEmpty(dataValue))) {\n        this.updateValue(newValue, {\n          modified: !this.autoModified\n        }, index);\n      }\n\n      this.autoModified = false;\n    }\n  }, {\n    key: \"attachElement\",\n    value: function attachElement(element, index) {\n      var _this2 = this;\n\n      if (this.autoExpand && (this.isPlain || this.options.readOnly || this.options.htmlView)) {\n        if (element.nodeName === 'TEXTAREA') {\n          this.addAutoExpanding(element, index);\n        }\n      }\n\n      if (this.options.readOnly) {\n        return element;\n      }\n\n      if (this.component.wysiwyg && !this.component.editor) {\n        this.component.editor = 'ckeditor';\n      }\n\n      var settings = _lodash.default.isEmpty(this.component.wysiwyg) ? this.wysiwygDefault[this.component.editor] || this.wysiwygDefault.default : this.component.wysiwyg; // Keep track of when this editor is ready.\n\n      this.editorsReady[index] = new _nativePromiseOnly.default(function (editorReady) {\n        // Attempt to add a wysiwyg editor. In order to add one, it must be included on the global scope.\n        switch (_this2.component.editor) {\n          case 'ace':\n            if (!settings) {\n              settings = {};\n            }\n\n            settings.mode = _this2.component.as ? \"ace/mode/\".concat(_this2.component.as) : 'ace/mode/javascript';\n\n            _this2.addAce(element, settings, function (newValue) {\n              return _this2.updateEditorValue(index, newValue);\n            }).then(function (ace) {\n              _this2.editors[index] = ace;\n              var dataValue = _this2.dataValue;\n              dataValue = _this2.component.multiple && Array.isArray(dataValue) ? dataValue[index] : dataValue;\n              ace.setValue(_this2.setConvertedValue(dataValue, index));\n              editorReady(ace);\n              return ace;\n            }).catch(function (err) {\n              return console.warn(err);\n            });\n\n            break;\n\n          case 'quill':\n            // Normalize the configurations for quill.\n            if (settings.hasOwnProperty('toolbarGroups') || settings.hasOwnProperty('toolbar')) {\n              console.warn('The WYSIWYG settings are configured for CKEditor. For this renderer, you will need to use configurations for the Quill Editor. See https://quilljs.com/docs/configuration for more information.');\n              settings = _this2.wysiwygDefault.quill;\n            } // Add the quill editor.\n\n\n            _this2.addQuill(element, settings, function () {\n              return _this2.updateEditorValue(index, _this2.editors[index].root.innerHTML);\n            }).then(function (quill) {\n              _this2.editors[index] = quill;\n\n              if (_this2.component.isUploadEnabled) {\n                var _this = _this2;\n\n                quill.getModule('uploader').options.handler = function () {\n                  var _this$imageHandler;\n\n                  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                    args[_key] = arguments[_key];\n                  }\n\n                  //we need initial 'this' because quill calls this method with its own context and we need some inner quill methods exposed in it\n                  //we also need current component instance as we use some fields and methods from it as well\n                  (_this$imageHandler = _this.imageHandler).call.apply(_this$imageHandler, [_this, this].concat(args));\n                };\n              }\n\n              quill.root.spellcheck = _this2.component.spellcheck;\n\n              if (_this2.options.readOnly || _this2.disabled) {\n                quill.disable();\n              }\n\n              var dataValue = _this2.dataValue;\n              dataValue = _this2.component.multiple && Array.isArray(dataValue) ? dataValue[index] : dataValue;\n              quill.setContents(quill.clipboard.convert({\n                html: _this2.setConvertedValue(dataValue, index)\n              }));\n              editorReady(quill);\n              return quill;\n            }).catch(function (err) {\n              return console.warn(err);\n            });\n\n            break;\n\n          case 'ckeditor':\n            settings = settings || {};\n            settings.rows = _this2.component.rows;\n\n            _this2.addCKE(element, settings, function (newValue) {\n              return _this2.updateEditorValue(index, newValue);\n            }).then(function (editor) {\n              _this2.editors[index] = editor;\n              var dataValue = _this2.dataValue;\n              dataValue = _this2.component.multiple && Array.isArray(dataValue) ? dataValue[index] : dataValue;\n\n              var value = _this2.setConvertedValue(dataValue, index);\n\n              var isReadOnly = _this2.options.readOnly || _this2.disabled; // Use ckeditor 4 in IE browser\n\n              if ((0, _utils.getBrowserInfo)().ie) {\n                editor.on('instanceReady', function () {\n                  editor.setReadOnly(isReadOnly);\n                  editor.setData(value);\n                });\n              } else {\n                var numRows = parseInt(_this2.component.rows, 10);\n\n                if (_lodash.default.isFinite(numRows) && _lodash.default.has(editor, 'ui.view.editable.editableElement')) {\n                  // Default height is 21px with 10px margin + a 14px top margin.\n                  var editorHeight = numRows * 31 + 14;\n                  editor.ui.view.editable.editableElement.style.height = \"\".concat(editorHeight, \"px\");\n                }\n\n                editor.isReadOnly = isReadOnly;\n                editor.data.set(value);\n              }\n\n              editorReady(editor);\n              return editor;\n            });\n\n            break;\n\n          default:\n            _get(_getPrototypeOf(TextAreaComponent.prototype), \"attachElement\", _this2).call(_this2, element, index);\n\n            break;\n        }\n      });\n      return element;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var attached = _get(_getPrototypeOf(TextAreaComponent.prototype), \"attach\", this).call(this, element); // Make sure we restore the value after attaching since wysiwygs and readonly texts need an additional set.\n\n\n      this.restoreValue();\n      return attached;\n    }\n  }, {\n    key: \"imageHandler\",\n    value: function imageHandler(moduleInstance, range, files) {\n      var _this3 = this;\n\n      var quillInstance = moduleInstance.quill;\n\n      if (!files || !files.length) {\n        console.warn('No files selected');\n        return;\n      }\n\n      quillInstance.enable(false);\n      var _this$component = this.component,\n          uploadStorage = _this$component.uploadStorage,\n          uploadUrl = _this$component.uploadUrl,\n          uploadOptions = _this$component.uploadOptions,\n          uploadDir = _this$component.uploadDir,\n          fileKey = _this$component.fileKey;\n      var requestData;\n      this.fileService.uploadFile(uploadStorage, files[0], (0, _utils.uniqueName)(files[0].name), uploadDir || '', //should pass empty string if undefined\n      null, uploadUrl, uploadOptions, fileKey).then(function (result) {\n        requestData = result;\n        return _this3.fileService.downloadFile(result);\n      }).then(function (result) {\n        quillInstance.enable(true);\n        var Delta = Quill.import('delta');\n        quillInstance.updateContents(new Delta().retain(range.index).delete(range.length).insert({\n          image: result.url\n        }, {\n          alt: JSON.stringify(requestData)\n        }), Quill.sources.USER);\n      }).catch(function (error) {\n        console.warn('Quill image upload failed');\n        console.warn(error);\n        quillInstance.enable(true);\n      });\n    }\n  }, {\n    key: \"isPlain\",\n    get: function get() {\n      return !this.component.wysiwyg && !this.component.editor;\n    }\n  }, {\n    key: \"htmlView\",\n    get: function get() {\n      return this.options.readOnly && (this.component.editor || this.component.wysiwyg);\n    }\n  }, {\n    key: \"setValueAt\",\n    value: function setValueAt(index, value) {\n      var _this4 = this;\n\n      var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      _get(_getPrototypeOf(TextAreaComponent.prototype), \"setValueAt\", this).call(this, index, value, flags);\n\n      if (this.editorsReady[index]) {\n        var setEditorsValue = function setEditorsValue(flags) {\n          return function (editor) {\n            if (!flags.skipWysiwyg) {\n              _this4.autoModified = true;\n\n              switch (_this4.component.editor) {\n                case 'ace':\n                  editor.setValue(_this4.setConvertedValue(value, index));\n                  break;\n\n                case 'quill':\n                  if (_this4.component.isUploadEnabled) {\n                    _this4.setAsyncConvertedValue(value).then(function (result) {\n                      var content = editor.clipboard.convert({\n                        html: result\n                      });\n                      editor.setContents(content);\n                    });\n                  } else {\n                    var convertedValue = _this4.setConvertedValue(value, index);\n\n                    var content = editor.clipboard.convert({\n                      html: convertedValue\n                    });\n                    editor.setContents(content);\n                  }\n\n                  break;\n\n                case 'ckeditor':\n                  editor.data.set(_this4.setConvertedValue(value, index));\n                  break;\n              }\n            }\n          };\n        };\n\n        this.editorsReady[index].then(setEditorsValue(_lodash.default.clone(flags)));\n      }\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      var _this5 = this;\n\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (this.isPlain || this.options.readOnly || this.disabled) {\n        value = this.component.multiple && Array.isArray(value) ? value.map(function (val, index) {\n          return _this5.setConvertedValue(val, index);\n        }) : this.setConvertedValue(value);\n        return _get(_getPrototypeOf(TextAreaComponent.prototype), \"setValue\", this).call(this, value, flags);\n      }\n\n      flags.skipWysiwyg = _lodash.default.isEqual(value, this.getValue());\n      return _get(_getPrototypeOf(TextAreaComponent.prototype), \"setValue\", this).call(this, value, flags);\n    }\n  }, {\n    key: \"setContent\",\n    value: function setContent(element, content, forceSanitize) {\n      _get(_getPrototypeOf(TextAreaComponent.prototype), \"setContent\", this).call(this, element, content, forceSanitize, {\n        addAttr: ['allow', 'allowfullscreen', 'frameborder', 'scrolling'],\n        addTags: ['iframe']\n      });\n    }\n  }, {\n    key: \"setReadOnlyValue\",\n    value: function setReadOnlyValue(value, index) {\n      index = index || 0;\n\n      if (this.options.readOnly || this.disabled) {\n        if (this.refs.input && this.refs.input[index]) {\n          if (this.component.inputFormat === 'plain') {\n            this.refs.input[index].innerText = this.interpolate(value, {}, {\n              noeval: true\n            });\n          } else {\n            this.setContent(this.refs.input[index], this.interpolate(value, {}, {\n              noeval: true\n            }), this.shouldSanitizeValue);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"isJsonValue\",\n    get: function get() {\n      return this.component.as && this.component.as === 'json';\n    }\n  }, {\n    key: \"setConvertedValue\",\n    value: function setConvertedValue(value, index) {\n      if (this.isJsonValue && !_lodash.default.isNil(value)) {\n        try {\n          value = JSON.stringify(value, null, 2);\n        } catch (err) {\n          console.warn(err);\n        }\n      }\n\n      if (!_lodash.default.isString(value)) {\n        value = '';\n      }\n\n      this.setReadOnlyValue(value, index);\n      return value;\n    }\n  }, {\n    key: \"setAsyncConvertedValue\",\n    value: function setAsyncConvertedValue(value) {\n      if (this.isJsonValue && value) {\n        try {\n          value = JSON.stringify(value, null, 2);\n        } catch (err) {\n          console.warn(err);\n        }\n      }\n\n      if (!_lodash.default.isString(value)) {\n        value = '';\n      }\n\n      var htmlDoc = new DOMParser().parseFromString(value, 'text/html');\n      var images = htmlDoc.getElementsByTagName('img');\n\n      if (images.length) {\n        return this.setImagesUrl(images).then(function () {\n          value = htmlDoc.getElementsByTagName('body')[0].innerHTML;\n          return value;\n        });\n      } else {\n        return _nativePromiseOnly.default.resolve(value);\n      }\n    }\n  }, {\n    key: \"setImagesUrl\",\n    value: function setImagesUrl(images) {\n      var _this6 = this;\n\n      return _nativePromiseOnly.default.all(_lodash.default.map(images, function (image) {\n        var requestData;\n\n        try {\n          requestData = JSON.parse(image.getAttribute('alt'));\n        } catch (error) {\n          console.warn(error);\n        }\n\n        return _this6.fileService.downloadFile(requestData).then(function (result) {\n          image.setAttribute('src', result.url);\n        });\n      }));\n    }\n  }, {\n    key: \"addAutoExpanding\",\n    value: function addAutoExpanding(textarea, index) {\n      var heightOffset = null;\n      var previousHeight = null;\n\n      var changeOverflow = function changeOverflow(value) {\n        var width = textarea.style.width;\n        textarea.style.width = '0px';\n        textarea.offsetWidth;\n        textarea.style.width = width;\n        textarea.style.overflowY = value;\n      };\n\n      var preventParentScroll = function preventParentScroll(element, changeSize) {\n        var nodeScrolls = [];\n\n        while (element && element.parentNode && element.parentNode instanceof Element) {\n          if (element.parentNode.scrollTop) {\n            nodeScrolls.push({\n              node: element.parentNode,\n              scrollTop: element.parentNode.scrollTop\n            });\n          }\n\n          element = element.parentNode;\n        }\n\n        changeSize();\n        nodeScrolls.forEach(function (nodeScroll) {\n          nodeScroll.node.scrollTop = nodeScroll.scrollTop;\n        });\n      };\n\n      var resize = function resize() {\n        if (textarea.scrollHeight === 0) {\n          return;\n        }\n\n        preventParentScroll(textarea, function () {\n          textarea.style.height = '';\n          textarea.style.height = \"\".concat(textarea.scrollHeight + heightOffset, \"px\");\n        });\n      };\n\n      var update = _lodash.default.debounce(function () {\n        resize();\n        var styleHeight = Math.round(parseFloat(textarea.style.height));\n        var computed = window.getComputedStyle(textarea, null);\n        var currentHeight = textarea.offsetHeight;\n\n        if (currentHeight < styleHeight && computed.overflowY === 'hidden') {\n          changeOverflow('scroll');\n        } else if (computed.overflowY !== 'hidden') {\n          changeOverflow('hidden');\n        }\n\n        resize();\n        currentHeight = textarea.offsetHeight;\n\n        if (previousHeight !== currentHeight) {\n          previousHeight = currentHeight;\n          update();\n        }\n      }, 200);\n\n      var computedStyle = window.getComputedStyle(textarea, null);\n      textarea.style.resize = 'none';\n      heightOffset = parseFloat(computedStyle.borderTopWidth) + parseFloat(computedStyle.borderBottomWidth) || 0;\n\n      if (window) {\n        this.addEventListener(window, 'resize', update);\n      }\n\n      this.addEventListener(textarea, 'input', update);\n      this.on('initialized', update);\n      this.updateSizes[index] = update;\n      update();\n    }\n  }, {\n    key: \"trimBlanks\",\n    value: function trimBlanks(value) {\n      if (!value || this.isPlain) {\n        return value;\n      }\n\n      var trimBlanks = function trimBlanks(value) {\n        var nbsp = '<p>&nbsp;</p>';\n        var br = '<p><br></p>';\n        var brNbsp = '<p><br>&nbsp;</p>';\n        var regExp = new RegExp(\"^\".concat(nbsp, \"|\").concat(nbsp, \"$|^\").concat(br, \"|\").concat(br, \"$|^\").concat(brNbsp, \"|\").concat(brNbsp, \"$\"), 'g');\n        return typeof value === 'string' ? value.replace(regExp, '') : value;\n      };\n\n      if (Array.isArray(value)) {\n        value.forEach(function (input, index) {\n          value[index] = trimBlanks(input);\n        });\n      } else {\n        value = trimBlanks(value);\n      }\n\n      return value;\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(flags, fromRoot) {\n      var changed = _get(_getPrototypeOf(TextAreaComponent.prototype), \"onChange\", this).call(this, flags, fromRoot);\n\n      this.updateSizes.forEach(function (updateSize) {\n        return updateSize();\n      });\n      return changed;\n    }\n  }, {\n    key: \"hasChanged\",\n    value: function hasChanged(newValue, oldValue) {\n      return _get(_getPrototypeOf(TextAreaComponent.prototype), \"hasChanged\", this).call(this, this.trimBlanks(newValue), this.trimBlanks(oldValue));\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.dataValue;\n      return _get(_getPrototypeOf(TextAreaComponent.prototype), \"isEmpty\", this).call(this, this.trimBlanks(value));\n    }\n  }, {\n    key: \"defaultValue\",\n    get: function get() {\n      var defaultValue = _get(_getPrototypeOf(TextAreaComponent.prototype), \"defaultValue\", this);\n\n      if (this.component.editor === 'quill' && !defaultValue) {\n        defaultValue = '<p><br></p>';\n      }\n\n      return defaultValue;\n    }\n  }, {\n    key: \"getConvertedValue\",\n    value: function getConvertedValue(value) {\n      if (this.isJsonValue && value) {\n        try {\n          value = JSON.parse(value);\n        } catch (err) {// console.warn(err);\n        }\n      }\n\n      return value;\n    }\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      var _this7 = this;\n\n      // Destroy all editors.\n      this.editors.forEach(function (editor) {\n        if (editor.destroy) {\n          editor.destroy();\n        }\n      });\n      this.editors = [];\n      this.editorsReady = [];\n      this.updateSizes.forEach(function (updateSize) {\n        return _this7.removeEventListener(window, 'resize', updateSize);\n      });\n      this.updateSizes = [];\n\n      _get(_getPrototypeOf(TextAreaComponent.prototype), \"detach\", this).call(this);\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      if (this.isPlain) {\n        return this.getConvertedValue(_get(_getPrototypeOf(TextAreaComponent.prototype), \"getValue\", this).call(this));\n      }\n\n      return this.dataValue;\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      _get(_getPrototypeOf(TextAreaComponent.prototype), \"focus\", this).call(this);\n\n      switch (this.component.editor) {\n        case 'ckeditor':\n          {\n            var _this$editors$0$editi, _this$editors$0$editi2;\n\n            if ((_this$editors$0$editi = this.editors[0].editing) !== null && _this$editors$0$editi !== void 0 && (_this$editors$0$editi2 = _this$editors$0$editi.view) !== null && _this$editors$0$editi2 !== void 0 && _this$editors$0$editi2.focus) {\n              this.editors[0].editing.view.focus();\n            }\n\n            this.element.scrollIntoView();\n            break;\n          }\n\n        case 'ace':\n          {\n            this.editors[0].focus();\n            this.element.scrollIntoView();\n            break;\n          }\n\n        case 'quill':\n          {\n            this.editors[0].focus();\n            break;\n          }\n      }\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len2 = arguments.length, extend = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        extend[_key2] = arguments[_key2];\n      }\n\n      return _TextField.default.schema.apply(_TextField.default, [{\n        type: 'textarea',\n        label: 'Text Area',\n        key: 'textArea',\n        rows: 3,\n        wysiwyg: false,\n        editor: '',\n        fixedSize: true,\n        inputFormat: 'html',\n        validate: {\n          minWords: '',\n          maxWords: ''\n        }\n      }].concat(extend));\n    }\n  }, {\n    key: \"builderInfo\",\n    get: function get() {\n      return {\n        title: 'Text Area',\n        group: 'basic',\n        icon: 'font',\n        documentation: '/userguide/forms/form-components#text-area',\n        weight: 20,\n        schema: TextAreaComponent.schema()\n      };\n    }\n  }]);\n\n  return TextAreaComponent;\n}(_TextField.default);\n\nexports.default = TextAreaComponent;"],"mappings":"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"},"metadata":{},"sourceType":"script"}