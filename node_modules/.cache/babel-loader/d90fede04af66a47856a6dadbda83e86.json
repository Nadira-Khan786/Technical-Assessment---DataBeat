{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.symbol.js\");\nrequire(\"core-js/modules/es.symbol.description.js\");\nrequire(\"core-js/modules/es.symbol.iterator.js\");\nrequire(\"core-js/modules/es.string.iterator.js\");\nrequire(\"core-js/modules/es.array.from.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  evaluate: true,\n  getRandomComponentId: true,\n  getPropertyValue: true,\n  getElementRect: true,\n  boolValue: true,\n  isMongoId: true,\n  checkCalculated: true,\n  checkSimpleConditional: true,\n  checkCustomConditional: true,\n  checkJsonConditional: true,\n  checkCondition: true,\n  checkTrigger: true,\n  setActionProperty: true,\n  unescapeHTML: true,\n  convertStringToHTMLElement: true,\n  uniqueName: true,\n  guid: true,\n  getDateSetting: true,\n  isValidDate: true,\n  currentTimezone: true,\n  offsetDate: true,\n  zonesLoaded: true,\n  shouldLoadZones: true,\n  loadZones: true,\n  momentDate: true,\n  formatDate: true,\n  formatOffset: true,\n  getLocaleDateFormatInfo: true,\n  convertFormatToFlatpickr: true,\n  convertFormatToMoment: true,\n  convertFormatToMask: true,\n  getInputMask: true,\n  unmaskValue: true,\n  matchInputMask: true,\n  getNumberSeparators: true,\n  getNumberDecimalLimit: true,\n  getCurrencyAffixes: true,\n  fieldData: true,\n  delay: true,\n  iterateKey: true,\n  uniqueKey: true,\n  bootstrapVersion: true,\n  unfold: true,\n  firstNonNil: true,\n  withSwitch: true,\n  observeOverload: true,\n  getContextComponents: true,\n  getContextButtons: true,\n  translateHTMLTemplate: true,\n  sanitize: true,\n  fastCloneDeep: true,\n  interpolate: true,\n  isInputComponent: true,\n  getArrayFromComponentPath: true,\n  hasInvalidComponent: true,\n  getStringFromComponentPath: true,\n  round: true,\n  getIEBrowserVersion: true,\n  getBrowserInfo: true,\n  getComponentPathWithoutIndicies: true,\n  getComponentPath: true,\n  getDataParentComponent: true,\n  isPromise: true,\n  isInsideScopingComponent: true,\n  getFocusableElements: true,\n  _: true,\n  jsonLogic: true,\n  moment: true,\n  Evaluator: true\n};\nObject.defineProperty(exports, \"Evaluator\", {\n  enumerable: true,\n  get: function get() {\n    return _Evaluator.default;\n  }\n});\nObject.defineProperty(exports, \"_\", {\n  enumerable: true,\n  get: function get() {\n    return _lodash.default;\n  }\n});\nexports.boolValue = boolValue;\nexports.bootstrapVersion = bootstrapVersion;\nexports.checkCalculated = checkCalculated;\nexports.checkCondition = checkCondition;\nexports.checkCustomConditional = checkCustomConditional;\nexports.checkJsonConditional = checkJsonConditional;\nexports.checkSimpleConditional = checkSimpleConditional;\nexports.checkTrigger = checkTrigger;\nexports.convertFormatToFlatpickr = convertFormatToFlatpickr;\nexports.convertFormatToMask = convertFormatToMask;\nexports.convertFormatToMoment = convertFormatToMoment;\nexports.convertStringToHTMLElement = convertStringToHTMLElement;\nexports.currentTimezone = currentTimezone;\nexports.delay = delay;\nexports.evaluate = evaluate;\nexports.fastCloneDeep = fastCloneDeep;\nexports.fieldData = fieldData;\nexports.firstNonNil = void 0;\nexports.formatDate = formatDate;\nexports.formatOffset = formatOffset;\nexports.getArrayFromComponentPath = getArrayFromComponentPath;\nexports.getBrowserInfo = getBrowserInfo;\nexports.getComponentPath = getComponentPath;\nexports.getComponentPathWithoutIndicies = getComponentPathWithoutIndicies;\nexports.getContextButtons = getContextButtons;\nexports.getContextComponents = getContextComponents;\nexports.getCurrencyAffixes = getCurrencyAffixes;\nexports.getDataParentComponent = getDataParentComponent;\nexports.getDateSetting = getDateSetting;\nexports.getElementRect = getElementRect;\nexports.getFocusableElements = getFocusableElements;\nexports.getIEBrowserVersion = getIEBrowserVersion;\nexports.getInputMask = getInputMask;\nexports.getLocaleDateFormatInfo = getLocaleDateFormatInfo;\nexports.getNumberDecimalLimit = getNumberDecimalLimit;\nexports.getNumberSeparators = getNumberSeparators;\nexports.getPropertyValue = getPropertyValue;\nexports.getRandomComponentId = getRandomComponentId;\nexports.getStringFromComponentPath = getStringFromComponentPath;\nexports.guid = guid;\nexports.hasInvalidComponent = hasInvalidComponent;\nexports.interpolate = void 0;\nexports.isInputComponent = isInputComponent;\nexports.isInsideScopingComponent = isInsideScopingComponent;\nexports.isMongoId = isMongoId;\nexports.isPromise = isPromise;\nexports.isValidDate = isValidDate;\nexports.iterateKey = iterateKey;\nObject.defineProperty(exports, \"jsonLogic\", {\n  enumerable: true,\n  get: function get() {\n    return _jsonLogicJs.default;\n  }\n});\nexports.loadZones = loadZones;\nexports.matchInputMask = matchInputMask;\nObject.defineProperty(exports, \"moment\", {\n  enumerable: true,\n  get: function get() {\n    return _momentTimezone.default;\n  }\n});\nexports.momentDate = momentDate;\nexports.observeOverload = observeOverload;\nexports.offsetDate = offsetDate;\nexports.round = round;\nexports.sanitize = sanitize;\nexports.setActionProperty = setActionProperty;\nexports.shouldLoadZones = shouldLoadZones;\nexports.translateHTMLTemplate = translateHTMLTemplate;\nexports.unescapeHTML = unescapeHTML;\nexports.unfold = unfold;\nexports.uniqueKey = uniqueKey;\nexports.uniqueName = uniqueName;\nexports.unmaskValue = unmaskValue;\nexports.withSwitch = withSwitch;\nexports.zonesLoaded = zonesLoaded;\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/es.regexp.exec.js\");\nrequire(\"core-js/modules/es.string.replace.js\");\nrequire(\"core-js/modules/es.array.iterator.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nrequire(\"core-js/modules/es.regexp.to-string.js\");\nrequire(\"core-js/modules/es.string.match.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.string.starts-with.js\");\nrequire(\"core-js/modules/es.string.split.js\");\nrequire(\"core-js/modules/es.array.slice.js\");\nrequire(\"core-js/modules/es.object.assign.js\");\nrequire(\"core-js/modules/es.regexp.constructor.js\");\nrequire(\"core-js/modules/es.number.constructor.js\");\nrequire(\"core-js/modules/es.array.find.js\");\nrequire(\"core-js/modules/es.string.trim.js\");\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\nvar _fetchPonyfill2 = _interopRequireDefault(require(\"fetch-ponyfill\"));\nvar _jsonLogicJs = _interopRequireDefault(require(\"json-logic-js\"));\nvar _momentTimezone = _interopRequireDefault(require(\"moment-timezone/moment-timezone\"));\nvar _jstimezonedetect = _interopRequireDefault(require(\"jstimezonedetect\"));\nvar _operators = require(\"./jsonlogic/operators\");\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\nvar _dompurify = _interopRequireDefault(require(\"dompurify\"));\nvar _formUtils = require(\"./formUtils\");\nObject.keys(_formUtils).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _formUtils[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _formUtils[key];\n    }\n  });\n});\nvar _Evaluator = _interopRequireDefault(require(\"./Evaluator\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nvar interpolate = _Evaluator.default.interpolate;\nexports.interpolate = interpolate;\nvar _fetchPonyfill = (0, _fetchPonyfill2.default)({\n    Promise: _nativePromiseOnly.default\n  }),\n  fetch = _fetchPonyfill.fetch;\n\n// Configure JsonLogic\n_operators.lodashOperators.forEach(function (name) {\n  return _jsonLogicJs.default.add_operation(\"_\".concat(name), _lodash.default[name]);\n}); // Retrieve Any Date\n\n_jsonLogicJs.default.add_operation('getDate', function (date) {\n  return (0, _momentTimezone.default)(date).toISOString();\n}); // Set Relative Minimum Date\n\n_jsonLogicJs.default.add_operation('relativeMinDate', function (relativeMinDate) {\n  return (0, _momentTimezone.default)().subtract(relativeMinDate, 'days').toISOString();\n}); // Set Relative Maximum Date\n\n_jsonLogicJs.default.add_operation('relativeMaxDate', function (relativeMaxDate) {\n  return (0, _momentTimezone.default)().add(relativeMaxDate, 'days').toISOString();\n});\nfunction setPathToComponentAndPerentSchema(component) {\n  component.path = getComponentPath(component);\n  var dataParent = getDataParentComponent(component);\n  if (dataParent && _typeof(dataParent) === 'object') {\n    dataParent.path = getComponentPath(dataParent);\n  }\n}\n/**\n * Evaluate a method.\n *\n * @param func\n * @param args\n * @return {*}\n */\n\nfunction evaluate(func, args, ret, tokenize) {\n  var returnVal = null;\n  var component = args.component ? args.component : {\n    key: 'unknown'\n  };\n  if (!args.form && args.instance) {\n    args.form = _lodash.default.get(args.instance, 'root._form', {});\n  }\n  var componentKey = component.key;\n  if (typeof func === 'string') {\n    if (ret) {\n      func += \";return \".concat(ret);\n    }\n    if (tokenize) {\n      // Replace all {{ }} references with actual data.\n      func = func.replace(/({{\\s+(.*)\\s+}})/, function (match, $1, $2) {\n        if ($2.indexOf('data.') === 0) {\n          return _lodash.default.get(args.data, $2.replace('data.', ''));\n        } else if ($2.indexOf('row.') === 0) {\n          return _lodash.default.get(args.row, $2.replace('row.', ''));\n        } // Support legacy...\n\n        return _lodash.default.get(args.data, $2);\n      });\n    }\n    try {\n      func = _Evaluator.default.evaluator(func, args);\n      args = _lodash.default.values(args);\n    } catch (err) {\n      console.warn(\"An error occured within the custom function for \".concat(componentKey), err);\n      returnVal = null;\n      func = false;\n    }\n  }\n  if (typeof func === 'function') {\n    try {\n      returnVal = _Evaluator.default.evaluate(func, args);\n    } catch (err) {\n      returnVal = null;\n      console.warn(\"An error occured within custom function for \".concat(componentKey), err);\n    }\n  } else if (_typeof(func) === 'object') {\n    try {\n      returnVal = _jsonLogicJs.default.apply(func, args);\n    } catch (err) {\n      returnVal = null;\n      console.warn(\"An error occured within custom function for \".concat(componentKey), err);\n    }\n  } else if (func) {\n    console.warn(\"Unknown function type for \".concat(componentKey));\n  }\n  return returnVal;\n}\nfunction getRandomComponentId() {\n  return \"e\".concat(Math.random().toString(36).substring(7));\n}\n/**\n * Get a property value of an element.\n *\n * @param style\n * @param prop\n * @return {number}\n */\n\nfunction getPropertyValue(style, prop) {\n  var value = style.getPropertyValue(prop);\n  value = value ? value.replace(/[^0-9.]/g, '') : '0';\n  return parseFloat(value);\n}\n/**\n * Get an elements bounding rectagle.\n *\n * @param element\n * @return {{x: string, y: string, width: string, height: string}}\n */\n\nfunction getElementRect(element) {\n  var style = window.getComputedStyle(element, null);\n  return {\n    x: getPropertyValue(style, 'left'),\n    y: getPropertyValue(style, 'top'),\n    width: getPropertyValue(style, 'width'),\n    height: getPropertyValue(style, 'height')\n  };\n}\n/**\n * Determines the boolean value of a setting.\n *\n * @param value\n * @return {boolean}\n */\n\nfunction boolValue(value) {\n  if (_lodash.default.isBoolean(value)) {\n    return value;\n  } else if (_lodash.default.isString(value)) {\n    return value.toLowerCase() === 'true';\n  } else {\n    return !!value;\n  }\n}\n/**\n * Check to see if an ID is a mongoID.\n * @param text\n * @return {Array|{index: number, input: string}|Boolean|*}\n */\n\nfunction isMongoId(text) {\n  return text.toString().match(/^[0-9a-fA-F]{24}$/);\n}\n/**\n * Checks the calculated value for a provided component and data.\n *\n * @param {Object} component\n *   The component to check for the calculated value.\n * @param {Object} submission\n *   A submission object.\n * @param data\n *   The full submission data.\n */\n\nfunction checkCalculated(component, submission, rowData) {\n  // Process calculated value stuff if present.\n  if (component.calculateValue) {\n    _lodash.default.set(rowData, component.key, evaluate(component.calculateValue, {\n      value: undefined,\n      data: submission ? submission.data : rowData,\n      row: rowData,\n      util: this,\n      component: component\n    }, 'value'));\n  }\n}\n/**\n * Check if a simple conditional evaluates to true.\n *\n * @param condition\n * @param condition\n * @param row\n * @param data\n * @returns {boolean}\n */\n\nfunction checkSimpleConditional(component, condition, row, data) {\n  var value = null;\n  if (row) {\n    value = (0, _formUtils.getValue)({\n      data: row\n    }, condition.when);\n  }\n  if (data && _lodash.default.isNil(value)) {\n    value = (0, _formUtils.getValue)({\n      data: data\n    }, condition.when);\n  } // FOR-400 - Fix issue where falsey values were being evaluated as show=true\n\n  if (_lodash.default.isNil(value)) {\n    value = '';\n  }\n  var eq = String(condition.eq);\n  var show = String(condition.show); // Special check for selectboxes component.\n\n  if (_lodash.default.isObject(value) && _lodash.default.has(value, condition.eq)) {\n    return String(value[condition.eq]) === show;\n  } // FOR-179 - Check for multiple values.\n\n  if (Array.isArray(value) && value.map(String).includes(eq)) {\n    return show === 'true';\n  }\n  return String(value) === eq === (show === 'true');\n}\n/**\n * Check custom javascript conditional.\n *\n * @param component\n * @param custom\n * @param row\n * @param data\n * @returns {*}\n */\n\nfunction checkCustomConditional(component, custom, row, data, form, variable, onError, instance) {\n  if (typeof custom === 'string') {\n    custom = \"var \".concat(variable, \" = true; \").concat(custom, \"; return \").concat(variable, \";\");\n  }\n  var value = instance && instance.evaluate ? instance.evaluate(custom, {\n    row: row,\n    data: data,\n    form: form\n  }) : evaluate(custom, {\n    row: row,\n    data: data,\n    form: form\n  });\n  if (value === null) {\n    return onError;\n  }\n  return value;\n}\nfunction checkJsonConditional(component, json, row, data, form, onError) {\n  try {\n    return _jsonLogicJs.default.apply(json, {\n      data: data,\n      row: row,\n      form: form,\n      _: _lodash.default\n    });\n  } catch (err) {\n    console.warn(\"An error occurred in jsonLogic advanced condition for \".concat(component.key), err);\n    return onError;\n  }\n}\nfunction getRow(component, row, instance, conditional) {\n  var _condition$when;\n  var condition = conditional || component.conditional; // If no component's instance passed (happens only in 6.x server), calculate its path based on the schema\n\n  if (!instance) {\n    instance = _lodash.default.cloneDeep(component);\n    setPathToComponentAndPerentSchema(instance);\n  }\n  var dataParent = getDataParentComponent(instance);\n  var parentPath = dataParent ? getComponentPath(dataParent) : null;\n  if (dataParent && (_condition$when = condition.when) !== null && _condition$when !== void 0 && _condition$when.startsWith(parentPath)) {\n    var newRow = {};\n    _lodash.default.set(newRow, parentPath, row);\n    row = newRow;\n  }\n  return row;\n}\n/**\n * Checks the conditions for a provided component and data.\n *\n * @param component\n *   The component to check for the condition.\n * @param row\n *   The data within a row\n * @param data\n *   The full submission data.\n *\n * @returns {boolean}\n */\n\nfunction checkCondition(component, row, data, form, instance) {\n  var customConditional = component.customConditional,\n    conditional = component.conditional;\n  if (customConditional) {\n    return checkCustomConditional(component, customConditional, row, data, form, 'show', true, instance);\n  } else if (conditional && conditional.when) {\n    row = getRow(component, row, instance);\n    return checkSimpleConditional(component, conditional, row, data);\n  } else if (conditional && conditional.json) {\n    return checkJsonConditional(component, conditional.json, row, data, form, true);\n  } // Default to show.\n\n  return true;\n}\n/**\n * Test a trigger on a component.\n *\n * @param component\n * @param action\n * @param data\n * @param row\n * @returns {mixed}\n */\n\nfunction checkTrigger(component, trigger, row, data, form, instance) {\n  // If trigger is empty, don't fire it\n  if (!trigger[trigger.type]) {\n    return false;\n  }\n  switch (trigger.type) {\n    case 'simple':\n      row = getRow(component, row, instance, trigger.simple);\n      return checkSimpleConditional(component, trigger.simple, row, data);\n    case 'javascript':\n      return checkCustomConditional(component, trigger.javascript, row, data, form, 'result', false, instance);\n    case 'json':\n      return checkJsonConditional(component, trigger.json, row, data, form, false);\n  } // If none of the types matched, don't fire the trigger.\n\n  return false;\n}\nfunction setActionProperty(component, action, result, row, data, instance) {\n  var property = action.property.value;\n  switch (action.property.type) {\n    case 'boolean':\n      {\n        var currentValue = _lodash.default.get(component, property, false).toString();\n        var newValue = action.state.toString();\n        if (currentValue !== newValue) {\n          _lodash.default.set(component, property, newValue === 'true');\n        }\n        break;\n      }\n    case 'string':\n      {\n        var evalData = {\n          data: data,\n          row: row,\n          component: component,\n          result: result\n        };\n        var textValue = action.property.component ? action[action.property.component] : action.text;\n        var _currentValue = _lodash.default.get(component, property, '');\n        var _newValue = instance && instance.interpolate ? instance.interpolate(textValue, evalData) : _Evaluator.default.interpolate(textValue, evalData);\n        if (_newValue !== _currentValue) {\n          _lodash.default.set(component, property, _newValue);\n        }\n        break;\n      }\n  }\n  return component;\n}\n/**\n * Unescape HTML characters like &lt, &gt, &amp and etc.\n * @param str\n * @returns {string}\n */\n\nfunction unescapeHTML(str) {\n  if (typeof window === 'undefined' || !('DOMParser' in window)) {\n    return str;\n  }\n  var doc = new window.DOMParser().parseFromString(str, 'text/html');\n  return doc.documentElement.textContent;\n}\n/**\n * Make HTML element from string\n * @param str\n * @param selector\n * @returns {HTMLElement}\n */\n\nfunction convertStringToHTMLElement(str, selector) {\n  var doc = new window.DOMParser().parseFromString(str, 'text/html');\n  return doc.body.querySelector(selector);\n}\n/**\n * Make a filename guaranteed to be unique.\n * @param name\n * @param template\n * @param evalContext\n * @returns {string}\n */\n\nfunction uniqueName(name, template, evalContext) {\n  template = template || '{{fileName}}-{{guid}}'; //include guid in template anyway, to prevent overwriting issue if filename matches existing file\n\n  if (!template.includes('{{guid}}')) {\n    template = \"\".concat(template, \"-{{guid}}\");\n  }\n  var parts = name.split('.');\n  var fileName = parts.slice(0, parts.length - 1).join('.');\n  var extension = parts.length > 1 ? \".\".concat(_lodash.default.last(parts)) : ''; //allow only 100 characters from original name to avoid issues with filename length restrictions\n\n  fileName = fileName.substr(0, 100);\n  evalContext = Object.assign(evalContext || {}, {\n    fileName: fileName,\n    guid: guid()\n  }); //only letters, numbers, dots, dashes, underscores and spaces are allowed. Anything else will be replaced with dash\n\n  var uniqueName = \"\".concat(_Evaluator.default.interpolate(template, evalContext)).concat(extension).replace(/[^0-9a-zA-Z.\\-_ ]/g, '-');\n  return uniqueName;\n}\nfunction guid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0;\n    var v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n/**\n * Return a translated date setting.\n *\n * @param date\n * @return {(null|Date)}\n */\n\nfunction getDateSetting(date) {\n  if (_lodash.default.isNil(date) || _lodash.default.isNaN(date) || date === '') {\n    return null;\n  }\n  if (date instanceof Date) {\n    return date;\n  } else if (typeof date.toDate === 'function') {\n    return date.isValid() ? date.toDate() : null;\n  }\n  var dateSetting = typeof date !== 'string' || date.indexOf('moment(') === -1 ? (0, _momentTimezone.default)(date) : null;\n  if (dateSetting && dateSetting.isValid()) {\n    return dateSetting.toDate();\n  }\n  dateSetting = null;\n  try {\n    var value = _Evaluator.default.evaluator(\"return \".concat(date, \";\"), 'moment')(_momentTimezone.default);\n    if (typeof value === 'string') {\n      dateSetting = (0, _momentTimezone.default)(value);\n    } else if (typeof value.toDate === 'function') {\n      dateSetting = (0, _momentTimezone.default)(value.toDate().toUTCString());\n    } else if (value instanceof Date) {\n      dateSetting = (0, _momentTimezone.default)(value);\n    }\n  } catch (e) {\n    return null;\n  }\n  if (!dateSetting) {\n    return null;\n  } // Ensure this is a date.\n\n  if (!dateSetting.isValid()) {\n    return null;\n  }\n  return dateSetting.toDate();\n}\nfunction isValidDate(date) {\n  return _lodash.default.isDate(date) && !_lodash.default.isNaN(date.getDate());\n}\n/**\n * Get the current timezone string.\n *\n * @return {string}\n */\n\nfunction currentTimezone() {\n  if (_momentTimezone.default.currentTimezone) {\n    return _momentTimezone.default.currentTimezone;\n  }\n  _momentTimezone.default.currentTimezone = _jstimezonedetect.default.determine().name();\n  return _momentTimezone.default.currentTimezone;\n}\n/**\n * Get an offset date provided a date object and timezone object.\n *\n * @param date\n * @param timezone\n * @return {Date}\n */\n\nfunction offsetDate(date, timezone) {\n  if (timezone === 'UTC') {\n    return {\n      date: new Date(date.getTime() + date.getTimezoneOffset() * 60000),\n      abbr: 'UTC'\n    };\n  }\n  var dateMoment = (0, _momentTimezone.default)(date).tz(timezone);\n  return {\n    date: new Date(date.getTime() + (dateMoment.utcOffset() + date.getTimezoneOffset()) * 60000),\n    abbr: dateMoment.format('z')\n  };\n}\n/**\n * Returns if the zones are loaded.\n *\n * @return {boolean}\n */\n\nfunction zonesLoaded() {\n  return _momentTimezone.default.zonesLoaded;\n}\n/**\n * Returns if we should load the zones.\n *\n * @param timezone\n * @return {boolean}\n */\n\nfunction shouldLoadZones(timezone) {\n  if (timezone === currentTimezone() || timezone === 'UTC') {\n    return false;\n  }\n  return true;\n}\n/**\n * Externally load the timezone data.\n *\n * @return {Promise<any> | *}\n */\n\nfunction loadZones(url, timezone) {\n  if (timezone && !shouldLoadZones(timezone)) {\n    // Return non-resolving promise.\n    return new _nativePromiseOnly.default(_lodash.default.noop);\n  }\n  if (_momentTimezone.default.zonesPromise) {\n    return _momentTimezone.default.zonesPromise;\n  }\n  return _momentTimezone.default.zonesPromise = fetch(url).then(function (resp) {\n    return resp.json().then(function (zones) {\n      _momentTimezone.default.tz.load(zones);\n      _momentTimezone.default.zonesLoaded = true; // Trigger a global event that the timezones have finished loading.\n\n      if (document && document.createEvent && document.body && document.body.dispatchEvent) {\n        var event = document.createEvent('Event');\n        event.initEvent('zonesLoaded', true, true);\n        document.body.dispatchEvent(event);\n      }\n    });\n  });\n}\n/**\n * Get the moment date object for translating dates with timezones.\n *\n * @param value\n * @param format\n * @param timezone\n * @return {*}\n */\n\nfunction momentDate(value, format, timezone) {\n  var momentDate = (0, _momentTimezone.default)(value);\n  if (!timezone) {\n    return momentDate;\n  }\n  if (timezone === 'UTC') {\n    timezone = 'Etc/UTC';\n  }\n  if ((timezone !== currentTimezone() || format && format.match(/\\s(z$|z\\s)/)) && _momentTimezone.default.zonesLoaded) {\n    return momentDate.tz(timezone);\n  }\n  return momentDate;\n}\n/**\n * Format a date provided a value, format, and timezone object.\n *\n * @param value\n * @param format\n * @param timezone\n * @return {string}\n */\n\nfunction formatDate(timezonesUrl, value, format, timezone, flatPickrInputFormat) {\n  var momentDate = (0, _momentTimezone.default)(value, flatPickrInputFormat || undefined);\n  if (timezone === currentTimezone()) {\n    // See if our format contains a \"z\" timezone character.\n    if (format.match(/\\s(z$|z\\s)/)) {\n      loadZones(timezonesUrl);\n      if (_momentTimezone.default.zonesLoaded) {\n        return momentDate.tz(timezone).format(convertFormatToMoment(format));\n      } else {\n        return momentDate.format(convertFormatToMoment(format.replace(/\\s(z$|z\\s)/, '')));\n      }\n    } // Return the standard format.\n\n    return momentDate.format(convertFormatToMoment(format));\n  }\n  if (timezone === 'UTC') {\n    var offset = offsetDate(momentDate.toDate(), 'UTC');\n    return \"\".concat((0, _momentTimezone.default)(offset.date).format(convertFormatToMoment(format)), \" UTC\");\n  } // Load the zones since we need timezone information.\n\n  loadZones(timezonesUrl);\n  if (_momentTimezone.default.zonesLoaded && timezone) {\n    return momentDate.tz(timezone).format(\"\".concat(convertFormatToMoment(format), \" z\"));\n  } else {\n    return momentDate.format(convertFormatToMoment(format));\n  }\n}\n/**\n * Pass a format function to format within a timezone.\n *\n * @param formatFn\n * @param date\n * @param format\n * @param timezone\n * @return {string}\n */\n\nfunction formatOffset(timezonesUrl, formatFn, date, format, timezone) {\n  if (timezone === currentTimezone()) {\n    return formatFn(date, format);\n  }\n  if (timezone === 'UTC') {\n    return \"\".concat(formatFn(offsetDate(date, 'UTC').date, format), \" UTC\");\n  } // Load the zones since we need timezone information.\n\n  loadZones(timezonesUrl);\n  if (_momentTimezone.default.zonesLoaded) {\n    var offset = offsetDate(date, timezone);\n    return \"\".concat(formatFn(offset.date, format), \" \").concat(offset.abbr);\n  } else {\n    return formatFn(date, format);\n  }\n}\nfunction getLocaleDateFormatInfo(locale) {\n  var formatInfo = {};\n  var day = 21;\n  var exampleDate = new Date(2017, 11, day);\n  var localDateString = exampleDate.toLocaleDateString(locale);\n  formatInfo.dayFirst = localDateString.slice(0, 2) === day.toString();\n  return formatInfo;\n}\n/**\n * Convert the format from the angular-datepicker module to flatpickr format.\n * @param format\n * @return {string}\n */\n\nfunction convertFormatToFlatpickr(format) {\n  return format // Remove the Z timezone offset, not supported by flatpickr.\n  .replace(/Z/g, '') // Year conversion.\n  .replace(/y/g, 'Y').replace('YYYY', 'Y').replace('YY', 'y') // Month conversion.\n  .replace('MMMM', 'F').replace(/M/g, 'n').replace('nnn', 'M').replace('nn', 'm') // Day in month.\n  .replace(/d/g, 'j').replace(/jj/g, 'd') // Day in week.\n  .replace('EEEE', 'l').replace('EEE', 'D') // Hours, minutes, seconds\n  .replace('HH', 'H').replace('hh', 'G').replace('mm', 'i').replace('ss', 'S').replace(/a/g, 'K');\n}\n/**\n * Convert the format from the angular-datepicker module to moment format.\n * @param format\n * @return {string}\n */\n\nfunction convertFormatToMoment(format) {\n  return format // Year conversion.\n  .replace(/y/g, 'Y') // Day in month.\n  .replace(/d/g, 'D') // Day in week.\n  .replace(/E/g, 'd') // AM/PM marker\n  .replace(/a/g, 'A') // Unix Timestamp\n  .replace(/U/g, 'X');\n}\nfunction convertFormatToMask(format) {\n  return format // Long month replacement.\n  .replace(/M{4}/g, 'MM') // Initial short month conversion.\n  .replace(/M{3}/g, '***') // Short month conversion if input as text.\n  .replace(/e/g, 'Q') // Year conversion.\n  .replace(/[ydhmsHMG]/g, '9') // AM/PM conversion.\n  .replace(/a/g, 'AA');\n}\n/**\n * Returns an input mask that is compatible with the input mask library.\n * @param {string} mask - The Form.io input mask.\n * @param {string} placeholderChar - Char which is used as a placeholder.\n * @returns {Array} - The input mask for the mask library.\n */\n\nfunction getInputMask(mask, placeholderChar) {\n  if (mask instanceof Array) {\n    return mask;\n  }\n  var maskArray = [];\n  maskArray.numeric = true;\n  for (var i = 0; i < mask.length; i++) {\n    switch (mask[i]) {\n      case '9':\n        maskArray.push(/\\d/);\n        break;\n      case 'A':\n        maskArray.numeric = false;\n        maskArray.push(/[a-zA-Z]/);\n        break;\n      case 'a':\n        maskArray.numeric = false;\n        maskArray.push(/[a-z]/);\n        break;\n      case '*':\n        maskArray.numeric = false;\n        maskArray.push(/[a-zA-Z0-9]/);\n        break;\n      // If char which is used inside mask placeholder was used in the mask, replace it with space to prevent errors\n\n      case placeholderChar:\n        maskArray.numeric = false;\n        maskArray.push(' ');\n        break;\n      default:\n        maskArray.numeric = false;\n        maskArray.push(mask[i]);\n        break;\n    }\n  }\n  return maskArray;\n}\nfunction unmaskValue(value, mask, placeholderChar) {\n  if (!mask || !value || value.length > mask.length) {\n    return value;\n  }\n  var unmaskedValue = value.split('');\n  for (var i = 0; i < mask.length; i++) {\n    var char = value[i] || '';\n    var charPart = mask[i];\n    if (!_lodash.default.isRegExp(charPart) && char === charPart) {\n      unmaskedValue[i] = '';\n    }\n  }\n  unmaskedValue = unmaskedValue.join('').replace(placeholderChar, '');\n  return unmaskedValue;\n}\nfunction matchInputMask(value, inputMask) {\n  if (!inputMask) {\n    return true;\n  } // If value is longer than mask, it isn't valid.\n\n  if (value.length > inputMask.length) {\n    return false;\n  }\n  for (var i = 0; i < inputMask.length; i++) {\n    var char = value[i] || '';\n    var charPart = inputMask[i];\n    if (!(_lodash.default.isRegExp(charPart) && charPart.test(char) || charPart === char)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getNumberSeparators() {\n  var lang = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'en';\n  var formattedNumberString = 12345.6789.toLocaleString(lang);\n  var delimeters = formattedNumberString.match(/..(.)...(.)../);\n  if (!delimeters) {\n    return {\n      delimiter: ',',\n      decimalSeparator: '.'\n    };\n  }\n  return {\n    delimiter: delimeters.length > 1 ? delimeters[1] : ',',\n    decimalSeparator: delimeters.length > 2 ? delimeters[2] : '.'\n  };\n}\nfunction getNumberDecimalLimit(component, defaultLimit) {\n  if (_lodash.default.has(component, 'decimalLimit')) {\n    return _lodash.default.get(component, 'decimalLimit');\n  } // Determine the decimal limit. Defaults to 20 but can be overridden by validate.step or decimalLimit settings.\n\n  var decimalLimit = defaultLimit || 20;\n  var step = _lodash.default.get(component, 'validate.step', 'any');\n  if (step !== 'any') {\n    var parts = step.toString().split('.');\n    if (parts.length > 1) {\n      decimalLimit = parts[1].length;\n    }\n  }\n  return decimalLimit;\n}\nfunction getCurrencyAffixes(_ref) {\n  var _ref$currency = _ref.currency,\n    currency = _ref$currency === void 0 ? 'USD' : _ref$currency,\n    decimalLimit = _ref.decimalLimit,\n    decimalSeparator = _ref.decimalSeparator,\n    lang = _ref.lang;\n  // Get the prefix and suffix from the localized string.\n  var regex = \"(.*)?\".concat(100 .toLocaleString(lang));\n  if (decimalLimit) {\n    regex += \"\".concat(decimalSeparator === '.' ? '\\\\.' : decimalSeparator).concat(0 .toLocaleString(lang), \"{\").concat(decimalLimit, \"}\");\n  }\n  regex += '(.*)?';\n  var parts = 100 .toLocaleString(lang, {\n    style: 'currency',\n    currency: currency,\n    useGrouping: true,\n    maximumFractionDigits: decimalLimit || 0,\n    minimumFractionDigits: decimalLimit || 0\n  }).replace('.', decimalSeparator).match(new RegExp(regex));\n  return {\n    prefix: (parts === null || parts === void 0 ? void 0 : parts[1]) || '',\n    suffix: (parts === null || parts === void 0 ? void 0 : parts[2]) || ''\n  };\n}\n/**\n * Fetch the field data provided a component.\n *\n * @param data\n * @param component\n * @return {*}\n */\n\nfunction fieldData(data, component) {\n  if (!data) {\n    return '';\n  }\n  if (!component || !component.key) {\n    return data;\n  }\n  if (component.key.includes('.')) {\n    var value = data;\n    var parts = component.key.split('.');\n    var key = '';\n    for (var i = 0; i < parts.length; i++) {\n      key = parts[i]; // Handle nested resources\n\n      if (value.hasOwnProperty('_id')) {\n        value = value.data;\n      } // Return if the key is not found on the value.\n\n      if (!value.hasOwnProperty(key)) {\n        return;\n      } // Convert old single field data in submissions to multiple\n\n      if (key === parts[parts.length - 1] && component.multiple && !Array.isArray(value[key])) {\n        value[key] = [value[key]];\n      } // Set the value of this key.\n\n      value = value[key];\n    }\n    return value;\n  } else {\n    // Convert old single field data in submissions to multiple\n    if (component.multiple && !Array.isArray(data[component.key])) {\n      data[component.key] = [data[component.key]];\n    } // Fix for checkbox type radio submission values in tableView\n\n    if (component.type === 'checkbox' && component.inputType === 'radio') {\n      return data[component.name] === component.value;\n    }\n    return data[component.key];\n  }\n}\n/**\n * Delays function execution with possibility to execute function synchronously or cancel it.\n *\n * @param fn Function to delay\n * @param delay Delay time\n * @return {*}\n */\n\nfunction delay(fn) {\n  var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n  var timer = setTimeout.apply(void 0, [fn, delay].concat(args));\n  function cancel() {\n    clearTimeout(timer);\n  }\n  function earlyCall() {\n    cancel();\n    return fn.apply(void 0, args);\n  }\n  earlyCall.timer = timer;\n  earlyCall.cancel = cancel;\n  return earlyCall;\n}\n/**\n * Iterate the given key to make it unique.\n *\n * @param {String} key\n *   Modify the component key to be unique.\n *\n * @returns {String}\n *   The new component key.\n */\n\nfunction iterateKey(key) {\n  if (!key.match(/(\\d+)$/)) {\n    return \"\".concat(key, \"1\");\n  }\n  return key.replace(/(\\d+)$/, function (suffix) {\n    return Number(suffix) + 1;\n  });\n}\n/**\n * Determines a unique key within a map provided the base key.\n *\n * @param map\n * @param base\n * @return {*}\n */\n\nfunction uniqueKey(map, base) {\n  var newKey = base;\n  while (map.hasOwnProperty(newKey)) {\n    newKey = iterateKey(newKey);\n  }\n  return newKey;\n}\n/**\n * Determines the major version number of bootstrap.\n *\n * @return {number}\n */\n\nfunction bootstrapVersion(options) {\n  if (options.bootstrap) {\n    return options.bootstrap;\n  }\n  if (typeof $ === 'function' && typeof $().collapse === 'function') {\n    return parseInt($.fn.collapse.Constructor.VERSION.split('.')[0], 10);\n  }\n  return 0;\n}\n/**\n * Retrun provided argument.\n * If argument is a function, returns the result of a function call.\n * @param {*} e;\n *\n * @return {*}\n */\n\nfunction unfold(e) {\n  if (typeof e === 'function') {\n    return e();\n  }\n  return e;\n}\n/**\n * Map values through unfold and return first non-nil value.\n * @param {Array<T>} collection;\n *\n * @return {T}\n */\n\nvar firstNonNil = _lodash.default.flow([_lodash.default.partialRight(_lodash.default.map, unfold), _lodash.default.partialRight(_lodash.default.find, function (v) {\n  return !_lodash.default.isUndefined(v);\n})]);\n/*\n * Create enclosed state.\n * Returns functions to getting and cycling between states.\n * @param {*} a - initial state.\n * @param {*} b - next state.\n * @return {Functions[]} -- [get, toggle];\n */\n\nexports.firstNonNil = firstNonNil;\nfunction withSwitch(a, b) {\n  var state = a;\n  var next = b;\n  function get() {\n    return state;\n  }\n  function toggle() {\n    var prev = state;\n    state = next;\n    next = prev;\n  }\n  return [get, toggle];\n}\nfunction observeOverload(callback) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$limit = options.limit,\n    limit = _options$limit === void 0 ? 50 : _options$limit,\n    _options$delay = options.delay,\n    delay = _options$delay === void 0 ? 500 : _options$delay;\n  var callCount = 0;\n  var timeoutID = 0;\n  var reset = function reset() {\n    return callCount = 0;\n  };\n  return function () {\n    if (timeoutID !== 0) {\n      clearTimeout(timeoutID);\n      timeoutID = 0;\n    }\n    timeoutID = setTimeout(reset, delay);\n    callCount += 1;\n    if (callCount >= limit) {\n      clearTimeout(timeoutID);\n      reset();\n      return callback();\n    }\n  };\n}\nfunction getContextComponents(context) {\n  var values = [];\n  context.utils.eachComponent(context.instance.options.editForm.components, function (component, path) {\n    if (component.key !== context.data.key) {\n      values.push({\n        label: \"\".concat(component.label || component.key, \" (\").concat(path, \")\"),\n        value: path\n      });\n    }\n  });\n  return values;\n}\nfunction getContextButtons(context) {\n  var values = [];\n  context.utils.eachComponent(context.instance.options.editForm.components, function (component) {\n    if (component.type === 'button') {\n      values.push({\n        label: \"\".concat(component.key, \" (\").concat(component.label, \")\"),\n        value: component.key\n      });\n    }\n  });\n  return values;\n} // Tags that could be in text, that should be ommited or handled in a special way\n\nvar inTextTags = ['#text', 'A', 'B', 'EM', 'I', 'SMALL', 'STRONG', 'SUB', 'SUP', 'INS', 'DEL', 'MARK', 'CODE'];\n/**\n * Helper function for 'translateHTMLTemplate'. Translates text value of the passed html element.\n *\n * @param {HTMLElement} elem\n * @param {Function} translate\n *\n * @returns {String}\n *   Translated element template.\n */\n\nfunction translateElemValue(elem, translate) {\n  if (!elem.innerText) {\n    return elem.innerHTML;\n  }\n  var elemValue = elem.innerText.replace(_Evaluator.default.templateSettings.interpolate, '').replace(/\\s\\s+/g, ' ').trim();\n  var translatedValue = translate(elemValue);\n  if (elemValue !== translatedValue) {\n    var links = elem.innerHTML.match(/<a[^>]*>(.*?)<\\/a>/g);\n    if (links && links.length) {\n      if (links.length === 1 && links[0].length === elem.innerHTML.length) {\n        return elem.innerHTML.replace(elemValue, translatedValue);\n      }\n      var translatedLinks = links.map(function (link) {\n        var linkElem = document.createElement('a');\n        linkElem.innerHTML = link;\n        return translateElemValue(linkElem, translate);\n      });\n      return \"\".concat(translatedValue, \" (\").concat(translatedLinks.join(', '), \")\");\n    } else {\n      return elem.innerText.replace(elemValue, translatedValue);\n    }\n  } else {\n    return elem.innerHTML;\n  }\n}\n/**\n * Helper function for 'translateHTMLTemplate'. Goes deep through html tag children and calls function to translate their text values.\n *\n * @param {HTMLElement} tag\n * @param {Function} translate\n *\n * @returns {void}\n */\n\nfunction translateDeepTag(tag, translate) {\n  var children = tag.children.length && _toConsumableArray(tag.children);\n  var shouldTranslateEntireContent = children && children.every(function (child) {\n    return child.children.length === 0 && inTextTags.some(function (tag) {\n      return child.nodeName === tag;\n    });\n  });\n  if (!children || shouldTranslateEntireContent) {\n    tag.innerHTML = translateElemValue(tag, translate);\n  } else {\n    children.forEach(function (child) {\n      return translateDeepTag(child, translate);\n    });\n  }\n}\n/**\n * Translates text values in html template.\n *\n * @param {String} template\n * @param {Function} translate\n *\n * @returns {String}\n *   Html template with translated values.\n */\n\nfunction translateHTMLTemplate(template, translate) {\n  var isHTML = /<[^>]*>/.test(template);\n  if (!isHTML) {\n    return translate(template);\n  }\n  var tempElem = document.createElement('div');\n  tempElem.innerHTML = template;\n  if (tempElem.innerText && tempElem.children.length) {\n    translateDeepTag(tempElem, translate);\n    return tempElem.innerHTML;\n  }\n  return template;\n}\n/**\n * Sanitize an html string.\n *\n * @param string\n * @returns {*}\n */\n\nfunction sanitize(string, options) {\n  if (typeof _dompurify.default.sanitize !== 'function') {\n    return string;\n  } // Dompurify configuration\n\n  var sanitizeOptions = {\n    ADD_ATTR: ['ref', 'target'],\n    USE_PROFILES: {\n      html: true\n    }\n  }; // Add attrs\n\n  if (options.sanitizeConfig && Array.isArray(options.sanitizeConfig.addAttr) && options.sanitizeConfig.addAttr.length > 0) {\n    options.sanitizeConfig.addAttr.forEach(function (attr) {\n      sanitizeOptions.ADD_ATTR.push(attr);\n    });\n  } // Add tags\n\n  if (options.sanitizeConfig && Array.isArray(options.sanitizeConfig.addTags) && options.sanitizeConfig.addTags.length > 0) {\n    sanitizeOptions.ADD_TAGS = options.sanitizeConfig.addTags;\n  } // Allow tags\n\n  if (options.sanitizeConfig && Array.isArray(options.sanitizeConfig.allowedTags) && options.sanitizeConfig.allowedTags.length > 0) {\n    sanitizeOptions.ALLOWED_TAGS = options.sanitizeConfig.allowedTags;\n  } // Allow attributes\n\n  if (options.sanitizeConfig && Array.isArray(options.sanitizeConfig.allowedAttrs) && options.sanitizeConfig.allowedAttrs.length > 0) {\n    sanitizeOptions.ALLOWED_ATTR = options.sanitizeConfig.allowedAttrs;\n  } // Allowd URI Regex\n\n  if (options.sanitizeConfig && options.sanitizeConfig.allowedUriRegex) {\n    sanitizeOptions.ALLOWED_URI_REGEXP = options.sanitizeConfig.allowedUriRegex;\n  } // Allow to extend the existing array of elements that are safe for URI-like values\n\n  if (options.sanitizeConfig && Array.isArray(options.sanitizeConfig.addUriSafeAttr) && options.sanitizeConfig.addUriSafeAttr.length > 0) {\n    sanitizeOptions.ADD_URI_SAFE_ATTR = options.sanitizeConfig.addUriSafeAttr;\n  }\n  return _dompurify.default.sanitize(string, sanitizeOptions);\n}\n/**\n * Fast cloneDeep for JSON objects only.\n */\n\nfunction fastCloneDeep(obj) {\n  return obj ? JSON.parse(JSON.stringify(obj)) : obj;\n}\nfunction isInputComponent(componentJson) {\n  if (componentJson.input === false || componentJson.input === true) {\n    return componentJson.input;\n  }\n  switch (componentJson.type) {\n    case 'htmlelement':\n    case 'content':\n    case 'columns':\n    case 'fieldset':\n    case 'panel':\n    case 'table':\n    case 'tabs':\n    case 'well':\n    case 'button':\n      return false;\n    default:\n      return true;\n  }\n}\nfunction getArrayFromComponentPath(pathStr) {\n  if (!pathStr || !_lodash.default.isString(pathStr)) {\n    if (!_lodash.default.isArray(pathStr)) {\n      return [pathStr];\n    }\n    return pathStr;\n  }\n  return pathStr.replace(/[[\\]]/g, '.').replace(/\\.\\./g, '.').replace(/(^\\.)|(\\.$)/g, '').split('.').map(function (part) {\n    return _lodash.default.defaultTo(_lodash.default.toNumber(part), part);\n  });\n}\nfunction hasInvalidComponent(component) {\n  return component.getComponents().some(function (comp) {\n    if (_lodash.default.isArray(comp.components)) {\n      return hasInvalidComponent(comp);\n    }\n    return comp.error;\n  });\n}\nfunction getStringFromComponentPath(path) {\n  if (!_lodash.default.isArray(path)) {\n    return path;\n  }\n  var strPath = '';\n  path.forEach(function (part, i) {\n    if (_lodash.default.isNumber(part)) {\n      strPath += \"[\".concat(part, \"]\");\n    } else {\n      strPath += i === 0 ? part : \".\".concat(part);\n    }\n  });\n  return strPath;\n}\nfunction round(number, precision) {\n  if (_lodash.default.isNumber(number)) {\n    return number.toFixed(precision);\n  }\n  return number;\n}\n/**\n * Check for Internet Explorer browser version\n *\n * @return {(number|null)}\n */\n\nfunction getIEBrowserVersion() {\n  var _getBrowserInfo = getBrowserInfo(),\n    ie = _getBrowserInfo.ie,\n    version = _getBrowserInfo.version;\n  return ie ? version : null;\n}\n/**\n * Get browser name and version (modified from 'jquery-browser-plugin')\n *\n * @return {Object} -- {{browser name, version, isWebkit?}}\n * Possible browser names: chrome, safari, ie, edge, opera, mozilla, yabrowser\n */\n\nfunction getBrowserInfo() {\n  var browser = {};\n  if (typeof window === 'undefined') {\n    return browser;\n  }\n  var ua = window.navigator.userAgent.toLowerCase();\n  var match = /(edge|edg)\\/([\\w.]+)/.exec(ua) || /(opr)[/]([\\w.]+)/.exec(ua) || /(yabrowser)[ /]([\\w.]+)/.exec(ua) || /(chrome)[ /]([\\w.]+)/.exec(ua) || /(iemobile)[/]([\\w.]+)/.exec(ua) || /(version)(applewebkit)[ /]([\\w.]+).*(safari)[ /]([\\w.]+)/.exec(ua) || /(webkit)[ /]([\\w.]+).*(version)[ /]([\\w.]+).*(safari)[ /]([\\w.]+)/.exec(ua) || /(webkit)[ /]([\\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ /]([\\w.]+)/.exec(ua) || /(msie) ([\\w.]+)/.exec(ua) || ua.indexOf('trident') >= 0 && /(rv)(?::| )([\\w.]+)/.exec(ua) || ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) || [];\n  var matched = {\n    browser: match[5] || match[3] || match[1] || '',\n    version: match[4] || match[2] || '0'\n  };\n  if (matched.browser) {\n    browser[matched.browser] = true;\n    browser.version = parseInt(matched.version, 10);\n  } // Chrome, Opera 15+, Safari and Yandex.Browser are webkit based browsers\n\n  if (browser.chrome || browser.opr || browser.safari || browser.edg || browser.yabrowser) {\n    browser.isWebkit = true;\n  } // IE11 has a new token so we will assign it ie to avoid breaking changes\n\n  if (browser.rv || browser.iemobile) {\n    browser.ie = true;\n  } // Edge has a new token since it became webkit based\n\n  if (browser.edg) {\n    browser.edge = true;\n  } // Opera 15+ are identified as opr\n\n  if (browser.opr) {\n    browser.opera = true;\n  }\n  return browser;\n}\nfunction getComponentPathWithoutIndicies() {\n  var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return path.replace(/\\[\\d+\\]/, '');\n}\n/**\n * Returns a path to the component which based on its schema\n * @param {*} component is a component's schema containing link to its parent's schema in the 'parent' property\n */\n\nfunction getComponentPath(component) {\n  var _component$_form;\n  var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  if (!component || !component.key || (component === null || component === void 0 ? void 0 : (_component$_form = component._form) === null || _component$_form === void 0 ? void 0 : _component$_form.display) === 'wizard') {\n    // unlike the Webform, the Wizard has the key and it is a duplicate of the panel key\n    return path;\n  }\n  path = component.isInputComponent || component.input === true ? \"\".concat(component.key).concat(path ? '.' : '').concat(path) : path;\n  return getComponentPath(component.parent, path);\n}\n/**\n * Returns a parent component of the passed component instance skipping all the Layout components\n * @param {*} componentInstance\n * @return {(Component|undefined)}\n */\n\nfunction getDataParentComponent(componentInstance) {\n  if (!componentInstance) {\n    return;\n  }\n  var parent = componentInstance.parent;\n  if (parent && (parent.isInputComponent || parent.input)) {\n    return parent;\n  } else {\n    return getDataParentComponent(parent);\n  }\n}\n/**\n * Returns whether the value is a promise\n * @param value\n * @return {boolean}\n */\n\nfunction isPromise(value) {\n  return value && value.then && typeof value.then === 'function' && Object.prototype.toString.call(value) === '[object Promise]';\n}\n/**\n * Determines if the component has a scoping parent in tree (a component which scopes its children and manages its\n * changes by itself, e.g. EditGrid)\n * @param componentInstance\n * @param firstPass\n * @returns {boolean|boolean|*}\n */\n\nfunction isInsideScopingComponent(componentInstance) {\n  var firstPass = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  if (!firstPass && componentInstance !== null && componentInstance !== void 0 && componentInstance.hasScopedChildren) {\n    return true;\n  }\n  var dataParent = getDataParentComponent(componentInstance);\n  if (dataParent !== null && dataParent !== void 0 && dataParent.hasScopedChildren) {\n    return true;\n  } else if (dataParent !== null && dataParent !== void 0 && dataParent.parent) {\n    return isInsideScopingComponent(dataParent.parent, false);\n  }\n  return false;\n}\nfunction getFocusableElements(element) {\n  var focusableSelector = \"button:not([disabled]), input:not([disabled]), select:not([disabled]),\\n    textarea:not([disabled]), button:not([disabled]), [href]\";\n  return element.querySelectorAll(focusableSelector);\n} // Export lodash to save space with other libraries.","map":{"version":3,"names":["require","Object","defineProperty","exports","value","_exportNames","evaluate","getRandomComponentId","getPropertyValue","getElementRect","boolValue","isMongoId","checkCalculated","checkSimpleConditional","checkCustomConditional","checkJsonConditional","checkCondition","checkTrigger","setActionProperty","unescapeHTML","convertStringToHTMLElement","uniqueName","guid","getDateSetting","isValidDate","currentTimezone","offsetDate","zonesLoaded","shouldLoadZones","loadZones","momentDate","formatDate","formatOffset","getLocaleDateFormatInfo","convertFormatToFlatpickr","convertFormatToMoment","convertFormatToMask","getInputMask","unmaskValue","matchInputMask","getNumberSeparators","getNumberDecimalLimit","getCurrencyAffixes","fieldData","delay","iterateKey","uniqueKey","bootstrapVersion","unfold","firstNonNil","withSwitch","observeOverload","getContextComponents","getContextButtons","translateHTMLTemplate","sanitize","fastCloneDeep","interpolate","isInputComponent","getArrayFromComponentPath","hasInvalidComponent","getStringFromComponentPath","round","getIEBrowserVersion","getBrowserInfo","getComponentPathWithoutIndicies","getComponentPath","getDataParentComponent","isPromise","isInsideScopingComponent","getFocusableElements","_","jsonLogic","moment","Evaluator","enumerable","get","_Evaluator","default","_lodash","_jsonLogicJs","_momentTimezone","_interopRequireDefault","_fetchPonyfill2","_jstimezonedetect","_operators","_nativePromiseOnly","_dompurify","_formUtils","keys","forEach","key","prototype","hasOwnProperty","call","obj","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","_typeof","_fetchPonyfill","Promise","fetch","lodashOperators","add_operation","concat","date","toISOString","relativeMinDate","subtract","relativeMaxDate","add","setPathToComponentAndPerentSchema","component","path","dataParent","func","args","ret","tokenize","returnVal","form","instance","componentKey","replace","match","$1","$2","indexOf","data","row","evaluator","values","err","console","warn","apply","Math","random","substring","style","prop","parseFloat","element","window","getComputedStyle","x","y","width","height","isBoolean","isString","toLowerCase","text","submission","rowData","calculateValue","set","undefined","util","condition","getValue","when","isNil","eq","String","show","isObject","has","map","includes","custom","variable","onError","json","getRow","conditional","_condition$when","cloneDeep","parentPath","startsWith","newRow","customConditional","trigger","type","simple","javascript","action","result","property","currentValue","newValue","state","evalData","textValue","_currentValue","_newValue","str","doc","DOMParser","parseFromString","documentElement","textContent","selector","body","querySelector","template","evalContext","parts","split","fileName","join","extension","last","substr","assign","c","r","v","isNaN","Date","toDate","isValid","dateSetting","toUTCString","e","isDate","getDate","determine","timezone","getTime","getTimezoneOffset","abbr","dateMoment","tz","utcOffset","format","url","noop","zonesPromise","then","resp","zones","load","document","createEvent","dispatchEvent","event","initEvent","timezonesUrl","flatPickrInputFormat","offset","formatFn","locale","formatInfo","day","exampleDate","localDateString","toLocaleDateString","dayFirst","mask","placeholderChar","maskArray","numeric","push","unmaskedValue","char","charPart","isRegExp","inputMask","lang","arguments","formattedNumberString","toLocaleString","delimeters","delimiter","decimalSeparator","defaultLimit","decimalLimit","step","_ref","_ref$currency","currency","regex","useGrouping","maximumFractionDigits","minimumFractionDigits","RegExp","prefix","suffix","multiple","inputType","fn","_len","_key","timer","setTimeout","cancel","clearTimeout","earlyCall","Number","base","newKey","options","bootstrap","$","collapse","parseInt","Constructor","VERSION","flow","partialRight","find","isUndefined","a","b","next","toggle","prev","callback","_options$limit","limit","_options$delay","callCount","timeoutID","reset","context","utils","eachComponent","editForm","components","label","inTextTags","translateElemValue","elem","translate","innerText","innerHTML","elemValue","templateSettings","trim","translatedValue","links","translatedLinks","link","linkElem","createElement","translateDeepTag","tag","children","shouldTranslateEntireContent","every","child","some","nodeName","isHTML","tempElem","string","sanitizeOptions","ADD_ATTR","USE_PROFILES","html","sanitizeConfig","addAttr","attr","addTags","ADD_TAGS","allowedTags","ALLOWED_TAGS","allowedAttrs","ALLOWED_ATTR","allowedUriRegex","ALLOWED_URI_REGEXP","addUriSafeAttr","ADD_URI_SAFE_ATTR","JSON","parse","stringify","componentJson","input","pathStr","part","defaultTo","toNumber","getComponents","comp","error","strPath","isNumber","number","precision","toFixed","_getBrowserInfo","ie","version","browser","ua","navigator","userAgent","exec","matched","chrome","opr","safari","edg","yabrowser","isWebkit","rv","iemobile","edge","opera","_component$_form","_form","display","parent","componentInstance","firstPass","hasScopedChildren","focusableSelector","querySelectorAll"],"sources":["D:/task/node_modules/formiojs/utils/utils.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  evaluate: true,\n  getRandomComponentId: true,\n  getPropertyValue: true,\n  getElementRect: true,\n  boolValue: true,\n  isMongoId: true,\n  checkCalculated: true,\n  checkSimpleConditional: true,\n  checkCustomConditional: true,\n  checkJsonConditional: true,\n  checkCondition: true,\n  checkTrigger: true,\n  setActionProperty: true,\n  unescapeHTML: true,\n  convertStringToHTMLElement: true,\n  uniqueName: true,\n  guid: true,\n  getDateSetting: true,\n  isValidDate: true,\n  currentTimezone: true,\n  offsetDate: true,\n  zonesLoaded: true,\n  shouldLoadZones: true,\n  loadZones: true,\n  momentDate: true,\n  formatDate: true,\n  formatOffset: true,\n  getLocaleDateFormatInfo: true,\n  convertFormatToFlatpickr: true,\n  convertFormatToMoment: true,\n  convertFormatToMask: true,\n  getInputMask: true,\n  unmaskValue: true,\n  matchInputMask: true,\n  getNumberSeparators: true,\n  getNumberDecimalLimit: true,\n  getCurrencyAffixes: true,\n  fieldData: true,\n  delay: true,\n  iterateKey: true,\n  uniqueKey: true,\n  bootstrapVersion: true,\n  unfold: true,\n  firstNonNil: true,\n  withSwitch: true,\n  observeOverload: true,\n  getContextComponents: true,\n  getContextButtons: true,\n  translateHTMLTemplate: true,\n  sanitize: true,\n  fastCloneDeep: true,\n  interpolate: true,\n  isInputComponent: true,\n  getArrayFromComponentPath: true,\n  hasInvalidComponent: true,\n  getStringFromComponentPath: true,\n  round: true,\n  getIEBrowserVersion: true,\n  getBrowserInfo: true,\n  getComponentPathWithoutIndicies: true,\n  getComponentPath: true,\n  getDataParentComponent: true,\n  isPromise: true,\n  isInsideScopingComponent: true,\n  getFocusableElements: true,\n  _: true,\n  jsonLogic: true,\n  moment: true,\n  Evaluator: true\n};\nObject.defineProperty(exports, \"Evaluator\", {\n  enumerable: true,\n  get: function get() {\n    return _Evaluator.default;\n  }\n});\nObject.defineProperty(exports, \"_\", {\n  enumerable: true,\n  get: function get() {\n    return _lodash.default;\n  }\n});\nexports.boolValue = boolValue;\nexports.bootstrapVersion = bootstrapVersion;\nexports.checkCalculated = checkCalculated;\nexports.checkCondition = checkCondition;\nexports.checkCustomConditional = checkCustomConditional;\nexports.checkJsonConditional = checkJsonConditional;\nexports.checkSimpleConditional = checkSimpleConditional;\nexports.checkTrigger = checkTrigger;\nexports.convertFormatToFlatpickr = convertFormatToFlatpickr;\nexports.convertFormatToMask = convertFormatToMask;\nexports.convertFormatToMoment = convertFormatToMoment;\nexports.convertStringToHTMLElement = convertStringToHTMLElement;\nexports.currentTimezone = currentTimezone;\nexports.delay = delay;\nexports.evaluate = evaluate;\nexports.fastCloneDeep = fastCloneDeep;\nexports.fieldData = fieldData;\nexports.firstNonNil = void 0;\nexports.formatDate = formatDate;\nexports.formatOffset = formatOffset;\nexports.getArrayFromComponentPath = getArrayFromComponentPath;\nexports.getBrowserInfo = getBrowserInfo;\nexports.getComponentPath = getComponentPath;\nexports.getComponentPathWithoutIndicies = getComponentPathWithoutIndicies;\nexports.getContextButtons = getContextButtons;\nexports.getContextComponents = getContextComponents;\nexports.getCurrencyAffixes = getCurrencyAffixes;\nexports.getDataParentComponent = getDataParentComponent;\nexports.getDateSetting = getDateSetting;\nexports.getElementRect = getElementRect;\nexports.getFocusableElements = getFocusableElements;\nexports.getIEBrowserVersion = getIEBrowserVersion;\nexports.getInputMask = getInputMask;\nexports.getLocaleDateFormatInfo = getLocaleDateFormatInfo;\nexports.getNumberDecimalLimit = getNumberDecimalLimit;\nexports.getNumberSeparators = getNumberSeparators;\nexports.getPropertyValue = getPropertyValue;\nexports.getRandomComponentId = getRandomComponentId;\nexports.getStringFromComponentPath = getStringFromComponentPath;\nexports.guid = guid;\nexports.hasInvalidComponent = hasInvalidComponent;\nexports.interpolate = void 0;\nexports.isInputComponent = isInputComponent;\nexports.isInsideScopingComponent = isInsideScopingComponent;\nexports.isMongoId = isMongoId;\nexports.isPromise = isPromise;\nexports.isValidDate = isValidDate;\nexports.iterateKey = iterateKey;\nObject.defineProperty(exports, \"jsonLogic\", {\n  enumerable: true,\n  get: function get() {\n    return _jsonLogicJs.default;\n  }\n});\nexports.loadZones = loadZones;\nexports.matchInputMask = matchInputMask;\nObject.defineProperty(exports, \"moment\", {\n  enumerable: true,\n  get: function get() {\n    return _momentTimezone.default;\n  }\n});\nexports.momentDate = momentDate;\nexports.observeOverload = observeOverload;\nexports.offsetDate = offsetDate;\nexports.round = round;\nexports.sanitize = sanitize;\nexports.setActionProperty = setActionProperty;\nexports.shouldLoadZones = shouldLoadZones;\nexports.translateHTMLTemplate = translateHTMLTemplate;\nexports.unescapeHTML = unescapeHTML;\nexports.unfold = unfold;\nexports.uniqueKey = uniqueKey;\nexports.uniqueName = uniqueName;\nexports.unmaskValue = unmaskValue;\nexports.withSwitch = withSwitch;\nexports.zonesLoaded = zonesLoaded;\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.replace.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.regexp.to-string.js\");\n\nrequire(\"core-js/modules/es.string.match.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nrequire(\"core-js/modules/es.string.includes.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.string.starts-with.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.array.join.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/es.object.assign.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.regexp.constructor.js\");\n\nrequire(\"core-js/modules/es.number.constructor.js\");\n\nrequire(\"core-js/modules/es.array.find.js\");\n\nrequire(\"core-js/modules/es.string.trim.js\");\n\nrequire(\"core-js/modules/es.number.to-fixed.js\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _fetchPonyfill2 = _interopRequireDefault(require(\"fetch-ponyfill\"));\n\nvar _jsonLogicJs = _interopRequireDefault(require(\"json-logic-js\"));\n\nvar _momentTimezone = _interopRequireDefault(require(\"moment-timezone/moment-timezone\"));\n\nvar _jstimezonedetect = _interopRequireDefault(require(\"jstimezonedetect\"));\n\nvar _operators = require(\"./jsonlogic/operators\");\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nvar _dompurify = _interopRequireDefault(require(\"dompurify\"));\n\nvar _formUtils = require(\"./formUtils\");\n\nObject.keys(_formUtils).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _formUtils[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _formUtils[key];\n    }\n  });\n});\n\nvar _Evaluator = _interopRequireDefault(require(\"./Evaluator\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nvar interpolate = _Evaluator.default.interpolate;\nexports.interpolate = interpolate;\n\nvar _fetchPonyfill = (0, _fetchPonyfill2.default)({\n  Promise: _nativePromiseOnly.default\n}),\n    fetch = _fetchPonyfill.fetch;\n\n// Configure JsonLogic\n_operators.lodashOperators.forEach(function (name) {\n  return _jsonLogicJs.default.add_operation(\"_\".concat(name), _lodash.default[name]);\n}); // Retrieve Any Date\n\n\n_jsonLogicJs.default.add_operation('getDate', function (date) {\n  return (0, _momentTimezone.default)(date).toISOString();\n}); // Set Relative Minimum Date\n\n\n_jsonLogicJs.default.add_operation('relativeMinDate', function (relativeMinDate) {\n  return (0, _momentTimezone.default)().subtract(relativeMinDate, 'days').toISOString();\n}); // Set Relative Maximum Date\n\n\n_jsonLogicJs.default.add_operation('relativeMaxDate', function (relativeMaxDate) {\n  return (0, _momentTimezone.default)().add(relativeMaxDate, 'days').toISOString();\n});\n\nfunction setPathToComponentAndPerentSchema(component) {\n  component.path = getComponentPath(component);\n  var dataParent = getDataParentComponent(component);\n\n  if (dataParent && _typeof(dataParent) === 'object') {\n    dataParent.path = getComponentPath(dataParent);\n  }\n}\n/**\n * Evaluate a method.\n *\n * @param func\n * @param args\n * @return {*}\n */\n\n\nfunction evaluate(func, args, ret, tokenize) {\n  var returnVal = null;\n  var component = args.component ? args.component : {\n    key: 'unknown'\n  };\n\n  if (!args.form && args.instance) {\n    args.form = _lodash.default.get(args.instance, 'root._form', {});\n  }\n\n  var componentKey = component.key;\n\n  if (typeof func === 'string') {\n    if (ret) {\n      func += \";return \".concat(ret);\n    }\n\n    if (tokenize) {\n      // Replace all {{ }} references with actual data.\n      func = func.replace(/({{\\s+(.*)\\s+}})/, function (match, $1, $2) {\n        if ($2.indexOf('data.') === 0) {\n          return _lodash.default.get(args.data, $2.replace('data.', ''));\n        } else if ($2.indexOf('row.') === 0) {\n          return _lodash.default.get(args.row, $2.replace('row.', ''));\n        } // Support legacy...\n\n\n        return _lodash.default.get(args.data, $2);\n      });\n    }\n\n    try {\n      func = _Evaluator.default.evaluator(func, args);\n      args = _lodash.default.values(args);\n    } catch (err) {\n      console.warn(\"An error occured within the custom function for \".concat(componentKey), err);\n      returnVal = null;\n      func = false;\n    }\n  }\n\n  if (typeof func === 'function') {\n    try {\n      returnVal = _Evaluator.default.evaluate(func, args);\n    } catch (err) {\n      returnVal = null;\n      console.warn(\"An error occured within custom function for \".concat(componentKey), err);\n    }\n  } else if (_typeof(func) === 'object') {\n    try {\n      returnVal = _jsonLogicJs.default.apply(func, args);\n    } catch (err) {\n      returnVal = null;\n      console.warn(\"An error occured within custom function for \".concat(componentKey), err);\n    }\n  } else if (func) {\n    console.warn(\"Unknown function type for \".concat(componentKey));\n  }\n\n  return returnVal;\n}\n\nfunction getRandomComponentId() {\n  return \"e\".concat(Math.random().toString(36).substring(7));\n}\n/**\n * Get a property value of an element.\n *\n * @param style\n * @param prop\n * @return {number}\n */\n\n\nfunction getPropertyValue(style, prop) {\n  var value = style.getPropertyValue(prop);\n  value = value ? value.replace(/[^0-9.]/g, '') : '0';\n  return parseFloat(value);\n}\n/**\n * Get an elements bounding rectagle.\n *\n * @param element\n * @return {{x: string, y: string, width: string, height: string}}\n */\n\n\nfunction getElementRect(element) {\n  var style = window.getComputedStyle(element, null);\n  return {\n    x: getPropertyValue(style, 'left'),\n    y: getPropertyValue(style, 'top'),\n    width: getPropertyValue(style, 'width'),\n    height: getPropertyValue(style, 'height')\n  };\n}\n/**\n * Determines the boolean value of a setting.\n *\n * @param value\n * @return {boolean}\n */\n\n\nfunction boolValue(value) {\n  if (_lodash.default.isBoolean(value)) {\n    return value;\n  } else if (_lodash.default.isString(value)) {\n    return value.toLowerCase() === 'true';\n  } else {\n    return !!value;\n  }\n}\n/**\n * Check to see if an ID is a mongoID.\n * @param text\n * @return {Array|{index: number, input: string}|Boolean|*}\n */\n\n\nfunction isMongoId(text) {\n  return text.toString().match(/^[0-9a-fA-F]{24}$/);\n}\n/**\n * Checks the calculated value for a provided component and data.\n *\n * @param {Object} component\n *   The component to check for the calculated value.\n * @param {Object} submission\n *   A submission object.\n * @param data\n *   The full submission data.\n */\n\n\nfunction checkCalculated(component, submission, rowData) {\n  // Process calculated value stuff if present.\n  if (component.calculateValue) {\n    _lodash.default.set(rowData, component.key, evaluate(component.calculateValue, {\n      value: undefined,\n      data: submission ? submission.data : rowData,\n      row: rowData,\n      util: this,\n      component: component\n    }, 'value'));\n  }\n}\n/**\n * Check if a simple conditional evaluates to true.\n *\n * @param condition\n * @param condition\n * @param row\n * @param data\n * @returns {boolean}\n */\n\n\nfunction checkSimpleConditional(component, condition, row, data) {\n  var value = null;\n\n  if (row) {\n    value = (0, _formUtils.getValue)({\n      data: row\n    }, condition.when);\n  }\n\n  if (data && _lodash.default.isNil(value)) {\n    value = (0, _formUtils.getValue)({\n      data: data\n    }, condition.when);\n  } // FOR-400 - Fix issue where falsey values were being evaluated as show=true\n\n\n  if (_lodash.default.isNil(value)) {\n    value = '';\n  }\n\n  var eq = String(condition.eq);\n  var show = String(condition.show); // Special check for selectboxes component.\n\n  if (_lodash.default.isObject(value) && _lodash.default.has(value, condition.eq)) {\n    return String(value[condition.eq]) === show;\n  } // FOR-179 - Check for multiple values.\n\n\n  if (Array.isArray(value) && value.map(String).includes(eq)) {\n    return show === 'true';\n  }\n\n  return String(value) === eq === (show === 'true');\n}\n/**\n * Check custom javascript conditional.\n *\n * @param component\n * @param custom\n * @param row\n * @param data\n * @returns {*}\n */\n\n\nfunction checkCustomConditional(component, custom, row, data, form, variable, onError, instance) {\n  if (typeof custom === 'string') {\n    custom = \"var \".concat(variable, \" = true; \").concat(custom, \"; return \").concat(variable, \";\");\n  }\n\n  var value = instance && instance.evaluate ? instance.evaluate(custom, {\n    row: row,\n    data: data,\n    form: form\n  }) : evaluate(custom, {\n    row: row,\n    data: data,\n    form: form\n  });\n\n  if (value === null) {\n    return onError;\n  }\n\n  return value;\n}\n\nfunction checkJsonConditional(component, json, row, data, form, onError) {\n  try {\n    return _jsonLogicJs.default.apply(json, {\n      data: data,\n      row: row,\n      form: form,\n      _: _lodash.default\n    });\n  } catch (err) {\n    console.warn(\"An error occurred in jsonLogic advanced condition for \".concat(component.key), err);\n    return onError;\n  }\n}\n\nfunction getRow(component, row, instance, conditional) {\n  var _condition$when;\n\n  var condition = conditional || component.conditional; // If no component's instance passed (happens only in 6.x server), calculate its path based on the schema\n\n  if (!instance) {\n    instance = _lodash.default.cloneDeep(component);\n    setPathToComponentAndPerentSchema(instance);\n  }\n\n  var dataParent = getDataParentComponent(instance);\n  var parentPath = dataParent ? getComponentPath(dataParent) : null;\n\n  if (dataParent && (_condition$when = condition.when) !== null && _condition$when !== void 0 && _condition$when.startsWith(parentPath)) {\n    var newRow = {};\n\n    _lodash.default.set(newRow, parentPath, row);\n\n    row = newRow;\n  }\n\n  return row;\n}\n/**\n * Checks the conditions for a provided component and data.\n *\n * @param component\n *   The component to check for the condition.\n * @param row\n *   The data within a row\n * @param data\n *   The full submission data.\n *\n * @returns {boolean}\n */\n\n\nfunction checkCondition(component, row, data, form, instance) {\n  var customConditional = component.customConditional,\n      conditional = component.conditional;\n\n  if (customConditional) {\n    return checkCustomConditional(component, customConditional, row, data, form, 'show', true, instance);\n  } else if (conditional && conditional.when) {\n    row = getRow(component, row, instance);\n    return checkSimpleConditional(component, conditional, row, data);\n  } else if (conditional && conditional.json) {\n    return checkJsonConditional(component, conditional.json, row, data, form, true);\n  } // Default to show.\n\n\n  return true;\n}\n/**\n * Test a trigger on a component.\n *\n * @param component\n * @param action\n * @param data\n * @param row\n * @returns {mixed}\n */\n\n\nfunction checkTrigger(component, trigger, row, data, form, instance) {\n  // If trigger is empty, don't fire it\n  if (!trigger[trigger.type]) {\n    return false;\n  }\n\n  switch (trigger.type) {\n    case 'simple':\n      row = getRow(component, row, instance, trigger.simple);\n      return checkSimpleConditional(component, trigger.simple, row, data);\n\n    case 'javascript':\n      return checkCustomConditional(component, trigger.javascript, row, data, form, 'result', false, instance);\n\n    case 'json':\n      return checkJsonConditional(component, trigger.json, row, data, form, false);\n  } // If none of the types matched, don't fire the trigger.\n\n\n  return false;\n}\n\nfunction setActionProperty(component, action, result, row, data, instance) {\n  var property = action.property.value;\n\n  switch (action.property.type) {\n    case 'boolean':\n      {\n        var currentValue = _lodash.default.get(component, property, false).toString();\n\n        var newValue = action.state.toString();\n\n        if (currentValue !== newValue) {\n          _lodash.default.set(component, property, newValue === 'true');\n        }\n\n        break;\n      }\n\n    case 'string':\n      {\n        var evalData = {\n          data: data,\n          row: row,\n          component: component,\n          result: result\n        };\n        var textValue = action.property.component ? action[action.property.component] : action.text;\n\n        var _currentValue = _lodash.default.get(component, property, '');\n\n        var _newValue = instance && instance.interpolate ? instance.interpolate(textValue, evalData) : _Evaluator.default.interpolate(textValue, evalData);\n\n        if (_newValue !== _currentValue) {\n          _lodash.default.set(component, property, _newValue);\n        }\n\n        break;\n      }\n  }\n\n  return component;\n}\n/**\n * Unescape HTML characters like &lt, &gt, &amp and etc.\n * @param str\n * @returns {string}\n */\n\n\nfunction unescapeHTML(str) {\n  if (typeof window === 'undefined' || !('DOMParser' in window)) {\n    return str;\n  }\n\n  var doc = new window.DOMParser().parseFromString(str, 'text/html');\n  return doc.documentElement.textContent;\n}\n/**\n * Make HTML element from string\n * @param str\n * @param selector\n * @returns {HTMLElement}\n */\n\n\nfunction convertStringToHTMLElement(str, selector) {\n  var doc = new window.DOMParser().parseFromString(str, 'text/html');\n  return doc.body.querySelector(selector);\n}\n/**\n * Make a filename guaranteed to be unique.\n * @param name\n * @param template\n * @param evalContext\n * @returns {string}\n */\n\n\nfunction uniqueName(name, template, evalContext) {\n  template = template || '{{fileName}}-{{guid}}'; //include guid in template anyway, to prevent overwriting issue if filename matches existing file\n\n  if (!template.includes('{{guid}}')) {\n    template = \"\".concat(template, \"-{{guid}}\");\n  }\n\n  var parts = name.split('.');\n  var fileName = parts.slice(0, parts.length - 1).join('.');\n  var extension = parts.length > 1 ? \".\".concat(_lodash.default.last(parts)) : ''; //allow only 100 characters from original name to avoid issues with filename length restrictions\n\n  fileName = fileName.substr(0, 100);\n  evalContext = Object.assign(evalContext || {}, {\n    fileName: fileName,\n    guid: guid()\n  }); //only letters, numbers, dots, dashes, underscores and spaces are allowed. Anything else will be replaced with dash\n\n  var uniqueName = \"\".concat(_Evaluator.default.interpolate(template, evalContext)).concat(extension).replace(/[^0-9a-zA-Z.\\-_ ]/g, '-');\n  return uniqueName;\n}\n\nfunction guid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0;\n    var v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n/**\n * Return a translated date setting.\n *\n * @param date\n * @return {(null|Date)}\n */\n\n\nfunction getDateSetting(date) {\n  if (_lodash.default.isNil(date) || _lodash.default.isNaN(date) || date === '') {\n    return null;\n  }\n\n  if (date instanceof Date) {\n    return date;\n  } else if (typeof date.toDate === 'function') {\n    return date.isValid() ? date.toDate() : null;\n  }\n\n  var dateSetting = typeof date !== 'string' || date.indexOf('moment(') === -1 ? (0, _momentTimezone.default)(date) : null;\n\n  if (dateSetting && dateSetting.isValid()) {\n    return dateSetting.toDate();\n  }\n\n  dateSetting = null;\n\n  try {\n    var value = _Evaluator.default.evaluator(\"return \".concat(date, \";\"), 'moment')(_momentTimezone.default);\n\n    if (typeof value === 'string') {\n      dateSetting = (0, _momentTimezone.default)(value);\n    } else if (typeof value.toDate === 'function') {\n      dateSetting = (0, _momentTimezone.default)(value.toDate().toUTCString());\n    } else if (value instanceof Date) {\n      dateSetting = (0, _momentTimezone.default)(value);\n    }\n  } catch (e) {\n    return null;\n  }\n\n  if (!dateSetting) {\n    return null;\n  } // Ensure this is a date.\n\n\n  if (!dateSetting.isValid()) {\n    return null;\n  }\n\n  return dateSetting.toDate();\n}\n\nfunction isValidDate(date) {\n  return _lodash.default.isDate(date) && !_lodash.default.isNaN(date.getDate());\n}\n/**\n * Get the current timezone string.\n *\n * @return {string}\n */\n\n\nfunction currentTimezone() {\n  if (_momentTimezone.default.currentTimezone) {\n    return _momentTimezone.default.currentTimezone;\n  }\n\n  _momentTimezone.default.currentTimezone = _jstimezonedetect.default.determine().name();\n  return _momentTimezone.default.currentTimezone;\n}\n/**\n * Get an offset date provided a date object and timezone object.\n *\n * @param date\n * @param timezone\n * @return {Date}\n */\n\n\nfunction offsetDate(date, timezone) {\n  if (timezone === 'UTC') {\n    return {\n      date: new Date(date.getTime() + date.getTimezoneOffset() * 60000),\n      abbr: 'UTC'\n    };\n  }\n\n  var dateMoment = (0, _momentTimezone.default)(date).tz(timezone);\n  return {\n    date: new Date(date.getTime() + (dateMoment.utcOffset() + date.getTimezoneOffset()) * 60000),\n    abbr: dateMoment.format('z')\n  };\n}\n/**\n * Returns if the zones are loaded.\n *\n * @return {boolean}\n */\n\n\nfunction zonesLoaded() {\n  return _momentTimezone.default.zonesLoaded;\n}\n/**\n * Returns if we should load the zones.\n *\n * @param timezone\n * @return {boolean}\n */\n\n\nfunction shouldLoadZones(timezone) {\n  if (timezone === currentTimezone() || timezone === 'UTC') {\n    return false;\n  }\n\n  return true;\n}\n/**\n * Externally load the timezone data.\n *\n * @return {Promise<any> | *}\n */\n\n\nfunction loadZones(url, timezone) {\n  if (timezone && !shouldLoadZones(timezone)) {\n    // Return non-resolving promise.\n    return new _nativePromiseOnly.default(_lodash.default.noop);\n  }\n\n  if (_momentTimezone.default.zonesPromise) {\n    return _momentTimezone.default.zonesPromise;\n  }\n\n  return _momentTimezone.default.zonesPromise = fetch(url).then(function (resp) {\n    return resp.json().then(function (zones) {\n      _momentTimezone.default.tz.load(zones);\n\n      _momentTimezone.default.zonesLoaded = true; // Trigger a global event that the timezones have finished loading.\n\n      if (document && document.createEvent && document.body && document.body.dispatchEvent) {\n        var event = document.createEvent('Event');\n        event.initEvent('zonesLoaded', true, true);\n        document.body.dispatchEvent(event);\n      }\n    });\n  });\n}\n/**\n * Get the moment date object for translating dates with timezones.\n *\n * @param value\n * @param format\n * @param timezone\n * @return {*}\n */\n\n\nfunction momentDate(value, format, timezone) {\n  var momentDate = (0, _momentTimezone.default)(value);\n\n  if (!timezone) {\n    return momentDate;\n  }\n\n  if (timezone === 'UTC') {\n    timezone = 'Etc/UTC';\n  }\n\n  if ((timezone !== currentTimezone() || format && format.match(/\\s(z$|z\\s)/)) && _momentTimezone.default.zonesLoaded) {\n    return momentDate.tz(timezone);\n  }\n\n  return momentDate;\n}\n/**\n * Format a date provided a value, format, and timezone object.\n *\n * @param value\n * @param format\n * @param timezone\n * @return {string}\n */\n\n\nfunction formatDate(timezonesUrl, value, format, timezone, flatPickrInputFormat) {\n  var momentDate = (0, _momentTimezone.default)(value, flatPickrInputFormat || undefined);\n\n  if (timezone === currentTimezone()) {\n    // See if our format contains a \"z\" timezone character.\n    if (format.match(/\\s(z$|z\\s)/)) {\n      loadZones(timezonesUrl);\n\n      if (_momentTimezone.default.zonesLoaded) {\n        return momentDate.tz(timezone).format(convertFormatToMoment(format));\n      } else {\n        return momentDate.format(convertFormatToMoment(format.replace(/\\s(z$|z\\s)/, '')));\n      }\n    } // Return the standard format.\n\n\n    return momentDate.format(convertFormatToMoment(format));\n  }\n\n  if (timezone === 'UTC') {\n    var offset = offsetDate(momentDate.toDate(), 'UTC');\n    return \"\".concat((0, _momentTimezone.default)(offset.date).format(convertFormatToMoment(format)), \" UTC\");\n  } // Load the zones since we need timezone information.\n\n\n  loadZones(timezonesUrl);\n\n  if (_momentTimezone.default.zonesLoaded && timezone) {\n    return momentDate.tz(timezone).format(\"\".concat(convertFormatToMoment(format), \" z\"));\n  } else {\n    return momentDate.format(convertFormatToMoment(format));\n  }\n}\n/**\n * Pass a format function to format within a timezone.\n *\n * @param formatFn\n * @param date\n * @param format\n * @param timezone\n * @return {string}\n */\n\n\nfunction formatOffset(timezonesUrl, formatFn, date, format, timezone) {\n  if (timezone === currentTimezone()) {\n    return formatFn(date, format);\n  }\n\n  if (timezone === 'UTC') {\n    return \"\".concat(formatFn(offsetDate(date, 'UTC').date, format), \" UTC\");\n  } // Load the zones since we need timezone information.\n\n\n  loadZones(timezonesUrl);\n\n  if (_momentTimezone.default.zonesLoaded) {\n    var offset = offsetDate(date, timezone);\n    return \"\".concat(formatFn(offset.date, format), \" \").concat(offset.abbr);\n  } else {\n    return formatFn(date, format);\n  }\n}\n\nfunction getLocaleDateFormatInfo(locale) {\n  var formatInfo = {};\n  var day = 21;\n  var exampleDate = new Date(2017, 11, day);\n  var localDateString = exampleDate.toLocaleDateString(locale);\n  formatInfo.dayFirst = localDateString.slice(0, 2) === day.toString();\n  return formatInfo;\n}\n/**\n * Convert the format from the angular-datepicker module to flatpickr format.\n * @param format\n * @return {string}\n */\n\n\nfunction convertFormatToFlatpickr(format) {\n  return format // Remove the Z timezone offset, not supported by flatpickr.\n  .replace(/Z/g, '') // Year conversion.\n  .replace(/y/g, 'Y').replace('YYYY', 'Y').replace('YY', 'y') // Month conversion.\n  .replace('MMMM', 'F').replace(/M/g, 'n').replace('nnn', 'M').replace('nn', 'm') // Day in month.\n  .replace(/d/g, 'j').replace(/jj/g, 'd') // Day in week.\n  .replace('EEEE', 'l').replace('EEE', 'D') // Hours, minutes, seconds\n  .replace('HH', 'H').replace('hh', 'G').replace('mm', 'i').replace('ss', 'S').replace(/a/g, 'K');\n}\n/**\n * Convert the format from the angular-datepicker module to moment format.\n * @param format\n * @return {string}\n */\n\n\nfunction convertFormatToMoment(format) {\n  return format // Year conversion.\n  .replace(/y/g, 'Y') // Day in month.\n  .replace(/d/g, 'D') // Day in week.\n  .replace(/E/g, 'd') // AM/PM marker\n  .replace(/a/g, 'A') // Unix Timestamp\n  .replace(/U/g, 'X');\n}\n\nfunction convertFormatToMask(format) {\n  return format // Long month replacement.\n  .replace(/M{4}/g, 'MM') // Initial short month conversion.\n  .replace(/M{3}/g, '***') // Short month conversion if input as text.\n  .replace(/e/g, 'Q') // Year conversion.\n  .replace(/[ydhmsHMG]/g, '9') // AM/PM conversion.\n  .replace(/a/g, 'AA');\n}\n/**\n * Returns an input mask that is compatible with the input mask library.\n * @param {string} mask - The Form.io input mask.\n * @param {string} placeholderChar - Char which is used as a placeholder.\n * @returns {Array} - The input mask for the mask library.\n */\n\n\nfunction getInputMask(mask, placeholderChar) {\n  if (mask instanceof Array) {\n    return mask;\n  }\n\n  var maskArray = [];\n  maskArray.numeric = true;\n\n  for (var i = 0; i < mask.length; i++) {\n    switch (mask[i]) {\n      case '9':\n        maskArray.push(/\\d/);\n        break;\n\n      case 'A':\n        maskArray.numeric = false;\n        maskArray.push(/[a-zA-Z]/);\n        break;\n\n      case 'a':\n        maskArray.numeric = false;\n        maskArray.push(/[a-z]/);\n        break;\n\n      case '*':\n        maskArray.numeric = false;\n        maskArray.push(/[a-zA-Z0-9]/);\n        break;\n      // If char which is used inside mask placeholder was used in the mask, replace it with space to prevent errors\n\n      case placeholderChar:\n        maskArray.numeric = false;\n        maskArray.push(' ');\n        break;\n\n      default:\n        maskArray.numeric = false;\n        maskArray.push(mask[i]);\n        break;\n    }\n  }\n\n  return maskArray;\n}\n\nfunction unmaskValue(value, mask, placeholderChar) {\n  if (!mask || !value || value.length > mask.length) {\n    return value;\n  }\n\n  var unmaskedValue = value.split('');\n\n  for (var i = 0; i < mask.length; i++) {\n    var char = value[i] || '';\n    var charPart = mask[i];\n\n    if (!_lodash.default.isRegExp(charPart) && char === charPart) {\n      unmaskedValue[i] = '';\n    }\n  }\n\n  unmaskedValue = unmaskedValue.join('').replace(placeholderChar, '');\n  return unmaskedValue;\n}\n\nfunction matchInputMask(value, inputMask) {\n  if (!inputMask) {\n    return true;\n  } // If value is longer than mask, it isn't valid.\n\n\n  if (value.length > inputMask.length) {\n    return false;\n  }\n\n  for (var i = 0; i < inputMask.length; i++) {\n    var char = value[i] || '';\n    var charPart = inputMask[i];\n\n    if (!(_lodash.default.isRegExp(charPart) && charPart.test(char) || charPart === char)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getNumberSeparators() {\n  var lang = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'en';\n  var formattedNumberString = 12345.6789.toLocaleString(lang);\n  var delimeters = formattedNumberString.match(/..(.)...(.)../);\n\n  if (!delimeters) {\n    return {\n      delimiter: ',',\n      decimalSeparator: '.'\n    };\n  }\n\n  return {\n    delimiter: delimeters.length > 1 ? delimeters[1] : ',',\n    decimalSeparator: delimeters.length > 2 ? delimeters[2] : '.'\n  };\n}\n\nfunction getNumberDecimalLimit(component, defaultLimit) {\n  if (_lodash.default.has(component, 'decimalLimit')) {\n    return _lodash.default.get(component, 'decimalLimit');\n  } // Determine the decimal limit. Defaults to 20 but can be overridden by validate.step or decimalLimit settings.\n\n\n  var decimalLimit = defaultLimit || 20;\n\n  var step = _lodash.default.get(component, 'validate.step', 'any');\n\n  if (step !== 'any') {\n    var parts = step.toString().split('.');\n\n    if (parts.length > 1) {\n      decimalLimit = parts[1].length;\n    }\n  }\n\n  return decimalLimit;\n}\n\nfunction getCurrencyAffixes(_ref) {\n  var _ref$currency = _ref.currency,\n      currency = _ref$currency === void 0 ? 'USD' : _ref$currency,\n      decimalLimit = _ref.decimalLimit,\n      decimalSeparator = _ref.decimalSeparator,\n      lang = _ref.lang;\n  // Get the prefix and suffix from the localized string.\n  var regex = \"(.*)?\".concat(100 .toLocaleString(lang));\n\n  if (decimalLimit) {\n    regex += \"\".concat(decimalSeparator === '.' ? '\\\\.' : decimalSeparator).concat(0 .toLocaleString(lang), \"{\").concat(decimalLimit, \"}\");\n  }\n\n  regex += '(.*)?';\n  var parts = 100 .toLocaleString(lang, {\n    style: 'currency',\n    currency: currency,\n    useGrouping: true,\n    maximumFractionDigits: decimalLimit || 0,\n    minimumFractionDigits: decimalLimit || 0\n  }).replace('.', decimalSeparator).match(new RegExp(regex));\n  return {\n    prefix: (parts === null || parts === void 0 ? void 0 : parts[1]) || '',\n    suffix: (parts === null || parts === void 0 ? void 0 : parts[2]) || ''\n  };\n}\n/**\n * Fetch the field data provided a component.\n *\n * @param data\n * @param component\n * @return {*}\n */\n\n\nfunction fieldData(data, component) {\n  if (!data) {\n    return '';\n  }\n\n  if (!component || !component.key) {\n    return data;\n  }\n\n  if (component.key.includes('.')) {\n    var value = data;\n    var parts = component.key.split('.');\n    var key = '';\n\n    for (var i = 0; i < parts.length; i++) {\n      key = parts[i]; // Handle nested resources\n\n      if (value.hasOwnProperty('_id')) {\n        value = value.data;\n      } // Return if the key is not found on the value.\n\n\n      if (!value.hasOwnProperty(key)) {\n        return;\n      } // Convert old single field data in submissions to multiple\n\n\n      if (key === parts[parts.length - 1] && component.multiple && !Array.isArray(value[key])) {\n        value[key] = [value[key]];\n      } // Set the value of this key.\n\n\n      value = value[key];\n    }\n\n    return value;\n  } else {\n    // Convert old single field data in submissions to multiple\n    if (component.multiple && !Array.isArray(data[component.key])) {\n      data[component.key] = [data[component.key]];\n    } // Fix for checkbox type radio submission values in tableView\n\n\n    if (component.type === 'checkbox' && component.inputType === 'radio') {\n      return data[component.name] === component.value;\n    }\n\n    return data[component.key];\n  }\n}\n/**\n * Delays function execution with possibility to execute function synchronously or cancel it.\n *\n * @param fn Function to delay\n * @param delay Delay time\n * @return {*}\n */\n\n\nfunction delay(fn) {\n  var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  var timer = setTimeout.apply(void 0, [fn, delay].concat(args));\n\n  function cancel() {\n    clearTimeout(timer);\n  }\n\n  function earlyCall() {\n    cancel();\n    return fn.apply(void 0, args);\n  }\n\n  earlyCall.timer = timer;\n  earlyCall.cancel = cancel;\n  return earlyCall;\n}\n/**\n * Iterate the given key to make it unique.\n *\n * @param {String} key\n *   Modify the component key to be unique.\n *\n * @returns {String}\n *   The new component key.\n */\n\n\nfunction iterateKey(key) {\n  if (!key.match(/(\\d+)$/)) {\n    return \"\".concat(key, \"1\");\n  }\n\n  return key.replace(/(\\d+)$/, function (suffix) {\n    return Number(suffix) + 1;\n  });\n}\n/**\n * Determines a unique key within a map provided the base key.\n *\n * @param map\n * @param base\n * @return {*}\n */\n\n\nfunction uniqueKey(map, base) {\n  var newKey = base;\n\n  while (map.hasOwnProperty(newKey)) {\n    newKey = iterateKey(newKey);\n  }\n\n  return newKey;\n}\n/**\n * Determines the major version number of bootstrap.\n *\n * @return {number}\n */\n\n\nfunction bootstrapVersion(options) {\n  if (options.bootstrap) {\n    return options.bootstrap;\n  }\n\n  if (typeof $ === 'function' && typeof $().collapse === 'function') {\n    return parseInt($.fn.collapse.Constructor.VERSION.split('.')[0], 10);\n  }\n\n  return 0;\n}\n/**\n * Retrun provided argument.\n * If argument is a function, returns the result of a function call.\n * @param {*} e;\n *\n * @return {*}\n */\n\n\nfunction unfold(e) {\n  if (typeof e === 'function') {\n    return e();\n  }\n\n  return e;\n}\n/**\n * Map values through unfold and return first non-nil value.\n * @param {Array<T>} collection;\n *\n * @return {T}\n */\n\n\nvar firstNonNil = _lodash.default.flow([_lodash.default.partialRight(_lodash.default.map, unfold), _lodash.default.partialRight(_lodash.default.find, function (v) {\n  return !_lodash.default.isUndefined(v);\n})]);\n/*\n * Create enclosed state.\n * Returns functions to getting and cycling between states.\n * @param {*} a - initial state.\n * @param {*} b - next state.\n * @return {Functions[]} -- [get, toggle];\n */\n\n\nexports.firstNonNil = firstNonNil;\n\nfunction withSwitch(a, b) {\n  var state = a;\n  var next = b;\n\n  function get() {\n    return state;\n  }\n\n  function toggle() {\n    var prev = state;\n    state = next;\n    next = prev;\n  }\n\n  return [get, toggle];\n}\n\nfunction observeOverload(callback) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$limit = options.limit,\n      limit = _options$limit === void 0 ? 50 : _options$limit,\n      _options$delay = options.delay,\n      delay = _options$delay === void 0 ? 500 : _options$delay;\n  var callCount = 0;\n  var timeoutID = 0;\n\n  var reset = function reset() {\n    return callCount = 0;\n  };\n\n  return function () {\n    if (timeoutID !== 0) {\n      clearTimeout(timeoutID);\n      timeoutID = 0;\n    }\n\n    timeoutID = setTimeout(reset, delay);\n    callCount += 1;\n\n    if (callCount >= limit) {\n      clearTimeout(timeoutID);\n      reset();\n      return callback();\n    }\n  };\n}\n\nfunction getContextComponents(context) {\n  var values = [];\n  context.utils.eachComponent(context.instance.options.editForm.components, function (component, path) {\n    if (component.key !== context.data.key) {\n      values.push({\n        label: \"\".concat(component.label || component.key, \" (\").concat(path, \")\"),\n        value: path\n      });\n    }\n  });\n  return values;\n}\n\nfunction getContextButtons(context) {\n  var values = [];\n  context.utils.eachComponent(context.instance.options.editForm.components, function (component) {\n    if (component.type === 'button') {\n      values.push({\n        label: \"\".concat(component.key, \" (\").concat(component.label, \")\"),\n        value: component.key\n      });\n    }\n  });\n  return values;\n} // Tags that could be in text, that should be ommited or handled in a special way\n\n\nvar inTextTags = ['#text', 'A', 'B', 'EM', 'I', 'SMALL', 'STRONG', 'SUB', 'SUP', 'INS', 'DEL', 'MARK', 'CODE'];\n/**\n * Helper function for 'translateHTMLTemplate'. Translates text value of the passed html element.\n *\n * @param {HTMLElement} elem\n * @param {Function} translate\n *\n * @returns {String}\n *   Translated element template.\n */\n\nfunction translateElemValue(elem, translate) {\n  if (!elem.innerText) {\n    return elem.innerHTML;\n  }\n\n  var elemValue = elem.innerText.replace(_Evaluator.default.templateSettings.interpolate, '').replace(/\\s\\s+/g, ' ').trim();\n  var translatedValue = translate(elemValue);\n\n  if (elemValue !== translatedValue) {\n    var links = elem.innerHTML.match(/<a[^>]*>(.*?)<\\/a>/g);\n\n    if (links && links.length) {\n      if (links.length === 1 && links[0].length === elem.innerHTML.length) {\n        return elem.innerHTML.replace(elemValue, translatedValue);\n      }\n\n      var translatedLinks = links.map(function (link) {\n        var linkElem = document.createElement('a');\n        linkElem.innerHTML = link;\n        return translateElemValue(linkElem, translate);\n      });\n      return \"\".concat(translatedValue, \" (\").concat(translatedLinks.join(', '), \")\");\n    } else {\n      return elem.innerText.replace(elemValue, translatedValue);\n    }\n  } else {\n    return elem.innerHTML;\n  }\n}\n/**\n * Helper function for 'translateHTMLTemplate'. Goes deep through html tag children and calls function to translate their text values.\n *\n * @param {HTMLElement} tag\n * @param {Function} translate\n *\n * @returns {void}\n */\n\n\nfunction translateDeepTag(tag, translate) {\n  var children = tag.children.length && _toConsumableArray(tag.children);\n\n  var shouldTranslateEntireContent = children && children.every(function (child) {\n    return child.children.length === 0 && inTextTags.some(function (tag) {\n      return child.nodeName === tag;\n    });\n  });\n\n  if (!children || shouldTranslateEntireContent) {\n    tag.innerHTML = translateElemValue(tag, translate);\n  } else {\n    children.forEach(function (child) {\n      return translateDeepTag(child, translate);\n    });\n  }\n}\n/**\n * Translates text values in html template.\n *\n * @param {String} template\n * @param {Function} translate\n *\n * @returns {String}\n *   Html template with translated values.\n */\n\n\nfunction translateHTMLTemplate(template, translate) {\n  var isHTML = /<[^>]*>/.test(template);\n\n  if (!isHTML) {\n    return translate(template);\n  }\n\n  var tempElem = document.createElement('div');\n  tempElem.innerHTML = template;\n\n  if (tempElem.innerText && tempElem.children.length) {\n    translateDeepTag(tempElem, translate);\n    return tempElem.innerHTML;\n  }\n\n  return template;\n}\n/**\n * Sanitize an html string.\n *\n * @param string\n * @returns {*}\n */\n\n\nfunction sanitize(string, options) {\n  if (typeof _dompurify.default.sanitize !== 'function') {\n    return string;\n  } // Dompurify configuration\n\n\n  var sanitizeOptions = {\n    ADD_ATTR: ['ref', 'target'],\n    USE_PROFILES: {\n      html: true\n    }\n  }; // Add attrs\n\n  if (options.sanitizeConfig && Array.isArray(options.sanitizeConfig.addAttr) && options.sanitizeConfig.addAttr.length > 0) {\n    options.sanitizeConfig.addAttr.forEach(function (attr) {\n      sanitizeOptions.ADD_ATTR.push(attr);\n    });\n  } // Add tags\n\n\n  if (options.sanitizeConfig && Array.isArray(options.sanitizeConfig.addTags) && options.sanitizeConfig.addTags.length > 0) {\n    sanitizeOptions.ADD_TAGS = options.sanitizeConfig.addTags;\n  } // Allow tags\n\n\n  if (options.sanitizeConfig && Array.isArray(options.sanitizeConfig.allowedTags) && options.sanitizeConfig.allowedTags.length > 0) {\n    sanitizeOptions.ALLOWED_TAGS = options.sanitizeConfig.allowedTags;\n  } // Allow attributes\n\n\n  if (options.sanitizeConfig && Array.isArray(options.sanitizeConfig.allowedAttrs) && options.sanitizeConfig.allowedAttrs.length > 0) {\n    sanitizeOptions.ALLOWED_ATTR = options.sanitizeConfig.allowedAttrs;\n  } // Allowd URI Regex\n\n\n  if (options.sanitizeConfig && options.sanitizeConfig.allowedUriRegex) {\n    sanitizeOptions.ALLOWED_URI_REGEXP = options.sanitizeConfig.allowedUriRegex;\n  } // Allow to extend the existing array of elements that are safe for URI-like values\n\n\n  if (options.sanitizeConfig && Array.isArray(options.sanitizeConfig.addUriSafeAttr) && options.sanitizeConfig.addUriSafeAttr.length > 0) {\n    sanitizeOptions.ADD_URI_SAFE_ATTR = options.sanitizeConfig.addUriSafeAttr;\n  }\n\n  return _dompurify.default.sanitize(string, sanitizeOptions);\n}\n/**\n * Fast cloneDeep for JSON objects only.\n */\n\n\nfunction fastCloneDeep(obj) {\n  return obj ? JSON.parse(JSON.stringify(obj)) : obj;\n}\n\nfunction isInputComponent(componentJson) {\n  if (componentJson.input === false || componentJson.input === true) {\n    return componentJson.input;\n  }\n\n  switch (componentJson.type) {\n    case 'htmlelement':\n    case 'content':\n    case 'columns':\n    case 'fieldset':\n    case 'panel':\n    case 'table':\n    case 'tabs':\n    case 'well':\n    case 'button':\n      return false;\n\n    default:\n      return true;\n  }\n}\n\nfunction getArrayFromComponentPath(pathStr) {\n  if (!pathStr || !_lodash.default.isString(pathStr)) {\n    if (!_lodash.default.isArray(pathStr)) {\n      return [pathStr];\n    }\n\n    return pathStr;\n  }\n\n  return pathStr.replace(/[[\\]]/g, '.').replace(/\\.\\./g, '.').replace(/(^\\.)|(\\.$)/g, '').split('.').map(function (part) {\n    return _lodash.default.defaultTo(_lodash.default.toNumber(part), part);\n  });\n}\n\nfunction hasInvalidComponent(component) {\n  return component.getComponents().some(function (comp) {\n    if (_lodash.default.isArray(comp.components)) {\n      return hasInvalidComponent(comp);\n    }\n\n    return comp.error;\n  });\n}\n\nfunction getStringFromComponentPath(path) {\n  if (!_lodash.default.isArray(path)) {\n    return path;\n  }\n\n  var strPath = '';\n  path.forEach(function (part, i) {\n    if (_lodash.default.isNumber(part)) {\n      strPath += \"[\".concat(part, \"]\");\n    } else {\n      strPath += i === 0 ? part : \".\".concat(part);\n    }\n  });\n  return strPath;\n}\n\nfunction round(number, precision) {\n  if (_lodash.default.isNumber(number)) {\n    return number.toFixed(precision);\n  }\n\n  return number;\n}\n/**\n * Check for Internet Explorer browser version\n *\n * @return {(number|null)}\n */\n\n\nfunction getIEBrowserVersion() {\n  var _getBrowserInfo = getBrowserInfo(),\n      ie = _getBrowserInfo.ie,\n      version = _getBrowserInfo.version;\n\n  return ie ? version : null;\n}\n/**\n * Get browser name and version (modified from 'jquery-browser-plugin')\n *\n * @return {Object} -- {{browser name, version, isWebkit?}}\n * Possible browser names: chrome, safari, ie, edge, opera, mozilla, yabrowser\n */\n\n\nfunction getBrowserInfo() {\n  var browser = {};\n\n  if (typeof window === 'undefined') {\n    return browser;\n  }\n\n  var ua = window.navigator.userAgent.toLowerCase();\n  var match = /(edge|edg)\\/([\\w.]+)/.exec(ua) || /(opr)[/]([\\w.]+)/.exec(ua) || /(yabrowser)[ /]([\\w.]+)/.exec(ua) || /(chrome)[ /]([\\w.]+)/.exec(ua) || /(iemobile)[/]([\\w.]+)/.exec(ua) || /(version)(applewebkit)[ /]([\\w.]+).*(safari)[ /]([\\w.]+)/.exec(ua) || /(webkit)[ /]([\\w.]+).*(version)[ /]([\\w.]+).*(safari)[ /]([\\w.]+)/.exec(ua) || /(webkit)[ /]([\\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ /]([\\w.]+)/.exec(ua) || /(msie) ([\\w.]+)/.exec(ua) || ua.indexOf('trident') >= 0 && /(rv)(?::| )([\\w.]+)/.exec(ua) || ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) || [];\n  var matched = {\n    browser: match[5] || match[3] || match[1] || '',\n    version: match[4] || match[2] || '0'\n  };\n\n  if (matched.browser) {\n    browser[matched.browser] = true;\n    browser.version = parseInt(matched.version, 10);\n  } // Chrome, Opera 15+, Safari and Yandex.Browser are webkit based browsers\n\n\n  if (browser.chrome || browser.opr || browser.safari || browser.edg || browser.yabrowser) {\n    browser.isWebkit = true;\n  } // IE11 has a new token so we will assign it ie to avoid breaking changes\n\n\n  if (browser.rv || browser.iemobile) {\n    browser.ie = true;\n  } // Edge has a new token since it became webkit based\n\n\n  if (browser.edg) {\n    browser.edge = true;\n  } // Opera 15+ are identified as opr\n\n\n  if (browser.opr) {\n    browser.opera = true;\n  }\n\n  return browser;\n}\n\nfunction getComponentPathWithoutIndicies() {\n  var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return path.replace(/\\[\\d+\\]/, '');\n}\n/**\n * Returns a path to the component which based on its schema\n * @param {*} component is a component's schema containing link to its parent's schema in the 'parent' property\n */\n\n\nfunction getComponentPath(component) {\n  var _component$_form;\n\n  var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n  if (!component || !component.key || (component === null || component === void 0 ? void 0 : (_component$_form = component._form) === null || _component$_form === void 0 ? void 0 : _component$_form.display) === 'wizard') {\n    // unlike the Webform, the Wizard has the key and it is a duplicate of the panel key\n    return path;\n  }\n\n  path = component.isInputComponent || component.input === true ? \"\".concat(component.key).concat(path ? '.' : '').concat(path) : path;\n  return getComponentPath(component.parent, path);\n}\n/**\n * Returns a parent component of the passed component instance skipping all the Layout components\n * @param {*} componentInstance\n * @return {(Component|undefined)}\n */\n\n\nfunction getDataParentComponent(componentInstance) {\n  if (!componentInstance) {\n    return;\n  }\n\n  var parent = componentInstance.parent;\n\n  if (parent && (parent.isInputComponent || parent.input)) {\n    return parent;\n  } else {\n    return getDataParentComponent(parent);\n  }\n}\n/**\n * Returns whether the value is a promise\n * @param value\n * @return {boolean}\n */\n\n\nfunction isPromise(value) {\n  return value && value.then && typeof value.then === 'function' && Object.prototype.toString.call(value) === '[object Promise]';\n}\n/**\n * Determines if the component has a scoping parent in tree (a component which scopes its children and manages its\n * changes by itself, e.g. EditGrid)\n * @param componentInstance\n * @param firstPass\n * @returns {boolean|boolean|*}\n */\n\n\nfunction isInsideScopingComponent(componentInstance) {\n  var firstPass = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n  if (!firstPass && componentInstance !== null && componentInstance !== void 0 && componentInstance.hasScopedChildren) {\n    return true;\n  }\n\n  var dataParent = getDataParentComponent(componentInstance);\n\n  if (dataParent !== null && dataParent !== void 0 && dataParent.hasScopedChildren) {\n    return true;\n  } else if (dataParent !== null && dataParent !== void 0 && dataParent.parent) {\n    return isInsideScopingComponent(dataParent.parent, false);\n  }\n\n  return false;\n}\n\nfunction getFocusableElements(element) {\n  var focusableSelector = \"button:not([disabled]), input:not([disabled]), select:not([disabled]),\\n    textarea:not([disabled]), button:not([disabled]), [href]\";\n  return element.querySelectorAll(focusableSelector);\n} // Export lodash to save space with other libraries."],"mappings":"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"},"metadata":{},"sourceType":"script"}