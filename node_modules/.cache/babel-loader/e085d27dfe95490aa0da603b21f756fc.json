{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deleteSubmission = exports.saveSubmission = exports.getSubmission = exports.resetSubmission = exports.clearSubmissionError = undefined;\nvar _Formio = require('formiojs/Formio');\nvar _Formio2 = _interopRequireDefault(_Formio);\nvar _constants = require('./constants');\nvar types = _interopRequireWildcard(_constants);\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n    newObj.default = obj;\n    return newObj;\n  }\n}\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nvar clearSubmissionError = exports.clearSubmissionError = function clearSubmissionError(name) {\n  return {\n    type: types.SUBMISSION_CLEAR_ERROR,\n    name: name\n  };\n};\nvar requestSubmission = function requestSubmission(name, id, formId, url) {\n  return {\n    type: types.SUBMISSION_REQUEST,\n    name: name,\n    id: id,\n    formId: formId,\n    url: url\n  };\n};\nvar sendSubmission = function sendSubmission(name, data) {\n  return {\n    type: types.SUBMISSION_SAVE,\n    name: name\n  };\n};\nvar receiveSubmission = function receiveSubmission(name, submission, url) {\n  return {\n    type: types.SUBMISSION_SUCCESS,\n    name: name,\n    submission: submission,\n    url: url\n  };\n};\nvar failSubmission = function failSubmission(name, error) {\n  return {\n    type: types.SUBMISSION_FAILURE,\n    name: name,\n    error: error\n  };\n};\nvar resetSubmission = exports.resetSubmission = function resetSubmission(name) {\n  return {\n    type: types.SUBMISSION_RESET,\n    name: name\n  };\n};\nvar getSubmission = exports.getSubmission = function getSubmission(name, id, formId) {\n  var done = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n  return function (dispatch, getState) {\n    // Check to see if the submission is already loaded.\n    if (getState().id === id) {\n      return;\n    }\n    var url = _Formio2.default.getProjectUrl() + '/' + (formId ? 'form/' + formId : name) + '/submission/' + id;\n    var formio = new _Formio2.default(url);\n    dispatch(requestSubmission(name, id, formId, url));\n    formio.loadSubmission().then(function (result) {\n      dispatch(receiveSubmission(name, result));\n      done(null, result);\n    }).catch(function (error) {\n      dispatch(failSubmission(name, error));\n      done(error);\n    });\n  };\n};\nvar saveSubmission = exports.saveSubmission = function saveSubmission(name, data, formId) {\n  var done = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n  return function (dispatch) {\n    dispatch(sendSubmission(name, data));\n    var id = data._id;\n    var formio = new _Formio2.default(_Formio2.default.getProjectUrl() + '/' + (formId ? 'form/' + formId : name) + '/submission' + (id ? '/' + id : ''));\n    formio.saveSubmission(data).then(function (result) {\n      var url = _Formio2.default.getProjectUrl() + '/' + (formId ? 'form/' + formId : name) + '/submission/' + result._id;\n      dispatch(receiveSubmission(name, result, url));\n      done(null, result);\n    }).catch(function (error) {\n      dispatch(failSubmission(name, error));\n      done(error);\n    });\n  };\n};\nvar deleteSubmission = exports.deleteSubmission = function deleteSubmission(name, id, formId) {\n  var done = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n  return function (dispatch, getState) {\n    var formio = new _Formio2.default(_Formio2.default.getProjectUrl() + '/' + (formId ? 'form/' + formId : name) + '/submission/' + id);\n    return formio.deleteSubmission().then(function () {\n      dispatch(resetSubmission(name));\n      done(null, true);\n    }).catch(function (error) {\n      dispatch(failSubmission(name, error));\n      done(error);\n    });\n  };\n};","map":{"version":3,"names":["Object","defineProperty","exports","value","deleteSubmission","saveSubmission","getSubmission","resetSubmission","clearSubmissionError","undefined","_Formio","require","_Formio2","_interopRequireDefault","_constants","types","_interopRequireWildcard","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","default","name","type","SUBMISSION_CLEAR_ERROR","requestSubmission","id","formId","url","SUBMISSION_REQUEST","sendSubmission","data","SUBMISSION_SAVE","receiveSubmission","submission","SUBMISSION_SUCCESS","failSubmission","error","SUBMISSION_FAILURE","SUBMISSION_RESET","done","arguments","length","dispatch","getState","getProjectUrl","formio","loadSubmission","then","result","catch","_id"],"sources":["D:/task/node_modules/react-formio/lib/modules/submission/actions.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deleteSubmission = exports.saveSubmission = exports.getSubmission = exports.resetSubmission = exports.clearSubmissionError = undefined;\n\nvar _Formio = require('formiojs/Formio');\n\nvar _Formio2 = _interopRequireDefault(_Formio);\n\nvar _constants = require('./constants');\n\nvar types = _interopRequireWildcard(_constants);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar clearSubmissionError = exports.clearSubmissionError = function clearSubmissionError(name) {\n  return {\n    type: types.SUBMISSION_CLEAR_ERROR,\n    name: name\n  };\n};\n\nvar requestSubmission = function requestSubmission(name, id, formId, url) {\n  return {\n    type: types.SUBMISSION_REQUEST,\n    name: name,\n    id: id,\n    formId: formId,\n    url: url\n  };\n};\n\nvar sendSubmission = function sendSubmission(name, data) {\n  return {\n    type: types.SUBMISSION_SAVE,\n    name: name\n  };\n};\n\nvar receiveSubmission = function receiveSubmission(name, submission, url) {\n  return {\n    type: types.SUBMISSION_SUCCESS,\n    name: name,\n    submission: submission,\n    url: url\n  };\n};\n\nvar failSubmission = function failSubmission(name, error) {\n  return {\n    type: types.SUBMISSION_FAILURE,\n    name: name,\n    error: error\n  };\n};\n\nvar resetSubmission = exports.resetSubmission = function resetSubmission(name) {\n  return {\n    type: types.SUBMISSION_RESET,\n    name: name\n  };\n};\n\nvar getSubmission = exports.getSubmission = function getSubmission(name, id, formId) {\n  var done = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n  return function (dispatch, getState) {\n    // Check to see if the submission is already loaded.\n    if (getState().id === id) {\n      return;\n    }\n\n    var url = _Formio2.default.getProjectUrl() + '/' + (formId ? 'form/' + formId : name) + '/submission/' + id;\n    var formio = new _Formio2.default(url);\n\n    dispatch(requestSubmission(name, id, formId, url));\n\n    formio.loadSubmission().then(function (result) {\n      dispatch(receiveSubmission(name, result));\n      done(null, result);\n    }).catch(function (error) {\n      dispatch(failSubmission(name, error));\n      done(error);\n    });\n  };\n};\n\nvar saveSubmission = exports.saveSubmission = function saveSubmission(name, data, formId) {\n  var done = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n  return function (dispatch) {\n    dispatch(sendSubmission(name, data));\n\n    var id = data._id;\n\n    var formio = new _Formio2.default(_Formio2.default.getProjectUrl() + '/' + (formId ? 'form/' + formId : name) + '/submission' + (id ? '/' + id : ''));\n\n    formio.saveSubmission(data).then(function (result) {\n      var url = _Formio2.default.getProjectUrl() + '/' + (formId ? 'form/' + formId : name) + '/submission/' + result._id;\n      dispatch(receiveSubmission(name, result, url));\n      done(null, result);\n    }).catch(function (error) {\n      dispatch(failSubmission(name, error));\n      done(error);\n    });\n  };\n};\n\nvar deleteSubmission = exports.deleteSubmission = function deleteSubmission(name, id, formId) {\n  var done = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n  return function (dispatch, getState) {\n    var formio = new _Formio2.default(_Formio2.default.getProjectUrl() + '/' + (formId ? 'form/' + formId : name) + '/submission/' + id);\n\n    return formio.deleteSubmission().then(function () {\n      dispatch(resetSubmission(name));\n      done(null, true);\n    }).catch(function (error) {\n      dispatch(failSubmission(name, error));\n      done(error);\n    });\n  };\n};"],"mappings":"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"},"metadata":{},"sourceType":"script"}