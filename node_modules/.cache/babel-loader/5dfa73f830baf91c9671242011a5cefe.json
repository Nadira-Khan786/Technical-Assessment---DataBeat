{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _beedle = _interopRequireDefault(require(\"beedle\"));\nvar _requests = require(\"./requests\");\nvar _saveUrl;\nvar _onPost;\nvar _onLoad;\nvar store = new _beedle[\"default\"]({\n  actions: {\n    setData: function setData(context, data, saveData) {\n      context.commit('setData', data);\n      if (saveData) this.save(data);\n    },\n    load: function load(context, _ref) {\n      var _this = this;\n      var loadUrl = _ref.loadUrl,\n        saveUrl = _ref.saveUrl,\n        data = _ref.data,\n        saveAlways = _ref.saveAlways;\n      _saveUrl = saveUrl;\n      var saveA = saveAlways || saveAlways === undefined;\n      context.commit('setSaveAlways', saveA);\n      if (_onLoad) {\n        _onLoad().then(function (x) {\n          if (data && data.length > 0 && x.length === 0) {\n            data.forEach(function (y) {\n              return x.push(y);\n            });\n          }\n          _this.setData(context, x);\n        });\n      } else if (loadUrl) {\n        (0, _requests.get)(loadUrl).then(function (x) {\n          if (data && data.length > 0 && x.length === 0) {\n            data.forEach(function (y) {\n              return x.push(y);\n            });\n          }\n          _this.setData(context, x);\n        });\n      } else {\n        this.setData(context, data);\n      }\n    },\n    create: function create(context, element) {\n      var _context$state = context.state,\n        data = _context$state.data,\n        saveAlways = _context$state.saveAlways;\n      data.push(element);\n      this.setData(context, data, saveAlways);\n    },\n    \"delete\": function _delete(context, element) {\n      var _context$state2 = context.state,\n        data = _context$state2.data,\n        saveAlways = _context$state2.saveAlways;\n      data.splice(data.indexOf(element), 1);\n      this.setData(context, data, saveAlways);\n    },\n    deleteLastItem: function deleteLastItem(context) {\n      var lastItem = context.state.lastItem;\n      if (lastItem) {\n        this[\"delete\"](context, lastItem);\n        context.commit('setLastItem', null);\n      }\n    },\n    resetLastItem: function resetLastItem(context) {\n      var lastItem = context.state.lastItem;\n      if (lastItem) {\n        context.commit('setLastItem', null); // console.log('resetLastItem');\n      }\n    },\n\n    post: function post(context) {\n      var data = context.state.data;\n      this.setData(context, data, true);\n    },\n    updateOrder: function updateOrder(context, elements) {\n      var saveAlways = context.state.saveAlways;\n      var newData = elements.filter(function (x) {\n        return x && !x.parentId;\n      });\n      elements.filter(function (x) {\n        return x && x.parentId;\n      }).forEach(function (x) {\n        return newData.push(x);\n      });\n      this.setData(context, newData, saveAlways);\n    },\n    insertItem: function insertItem(context, item) {\n      // console.log('insertItem', item);\n      context.commit('setLastItem', item.isContainer ? null : item);\n    },\n    save: function save(data) {\n      if (_onPost) {\n        _onPost({\n          task_data: data\n        });\n      } else if (_saveUrl) {\n        (0, _requests.post)(_saveUrl, {\n          task_data: data\n        });\n      }\n    }\n  },\n  mutations: {\n    setData: function setData(state, payload) {\n      // eslint-disable-next-line no-param-reassign\n      state.data = payload;\n      return state;\n    },\n    setSaveAlways: function setSaveAlways(state, payload) {\n      // eslint-disable-next-line no-param-reassign\n      state.saveAlways = payload;\n      return state;\n    },\n    setLastItem: function setLastItem(state, payload) {\n      // eslint-disable-next-line no-param-reassign\n      state.lastItem = payload;\n      console.log('setLastItem', payload);\n      return state;\n    }\n  },\n  initialState: {\n    data: [],\n    saveAlways: true,\n    lastItem: null\n  }\n});\nstore.setExternalHandler = function (onLoad, onPost) {\n  _onLoad = onLoad;\n  _onPost = onPost;\n};\nvar _default = store;\nexports[\"default\"] = _default;","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_beedle","_requests","_saveUrl","_onPost","_onLoad","store","actions","setData","context","data","saveData","commit","save","load","_ref","_this","loadUrl","saveUrl","saveAlways","saveA","undefined","then","x","length","forEach","y","push","get","create","element","_context$state","state","_delete","_context$state2","splice","indexOf","deleteLastItem","lastItem","resetLastItem","post","updateOrder","elements","newData","filter","parentId","insertItem","item","isContainer","task_data","mutations","payload","setSaveAlways","setLastItem","console","log","initialState","setExternalHandler","onLoad","onPost","_default"],"sources":["D:/task/node_modules/react-form-builder2/lib/stores/store.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _beedle = _interopRequireDefault(require(\"beedle\"));\n\nvar _requests = require(\"./requests\");\n\nvar _saveUrl;\n\nvar _onPost;\n\nvar _onLoad;\n\nvar store = new _beedle[\"default\"]({\n  actions: {\n    setData: function setData(context, data, saveData) {\n      context.commit('setData', data);\n      if (saveData) this.save(data);\n    },\n    load: function load(context, _ref) {\n      var _this = this;\n\n      var loadUrl = _ref.loadUrl,\n          saveUrl = _ref.saveUrl,\n          data = _ref.data,\n          saveAlways = _ref.saveAlways;\n      _saveUrl = saveUrl;\n      var saveA = saveAlways || saveAlways === undefined;\n      context.commit('setSaveAlways', saveA);\n\n      if (_onLoad) {\n        _onLoad().then(function (x) {\n          if (data && data.length > 0 && x.length === 0) {\n            data.forEach(function (y) {\n              return x.push(y);\n            });\n          }\n\n          _this.setData(context, x);\n        });\n      } else if (loadUrl) {\n        (0, _requests.get)(loadUrl).then(function (x) {\n          if (data && data.length > 0 && x.length === 0) {\n            data.forEach(function (y) {\n              return x.push(y);\n            });\n          }\n\n          _this.setData(context, x);\n        });\n      } else {\n        this.setData(context, data);\n      }\n    },\n    create: function create(context, element) {\n      var _context$state = context.state,\n          data = _context$state.data,\n          saveAlways = _context$state.saveAlways;\n      data.push(element);\n      this.setData(context, data, saveAlways);\n    },\n    \"delete\": function _delete(context, element) {\n      var _context$state2 = context.state,\n          data = _context$state2.data,\n          saveAlways = _context$state2.saveAlways;\n      data.splice(data.indexOf(element), 1);\n      this.setData(context, data, saveAlways);\n    },\n    deleteLastItem: function deleteLastItem(context) {\n      var lastItem = context.state.lastItem;\n\n      if (lastItem) {\n        this[\"delete\"](context, lastItem);\n        context.commit('setLastItem', null);\n      }\n    },\n    resetLastItem: function resetLastItem(context) {\n      var lastItem = context.state.lastItem;\n\n      if (lastItem) {\n        context.commit('setLastItem', null); // console.log('resetLastItem');\n      }\n    },\n    post: function post(context) {\n      var data = context.state.data;\n      this.setData(context, data, true);\n    },\n    updateOrder: function updateOrder(context, elements) {\n      var saveAlways = context.state.saveAlways;\n      var newData = elements.filter(function (x) {\n        return x && !x.parentId;\n      });\n      elements.filter(function (x) {\n        return x && x.parentId;\n      }).forEach(function (x) {\n        return newData.push(x);\n      });\n      this.setData(context, newData, saveAlways);\n    },\n    insertItem: function insertItem(context, item) {\n      // console.log('insertItem', item);\n      context.commit('setLastItem', item.isContainer ? null : item);\n    },\n    save: function save(data) {\n      if (_onPost) {\n        _onPost({\n          task_data: data\n        });\n      } else if (_saveUrl) {\n        (0, _requests.post)(_saveUrl, {\n          task_data: data\n        });\n      }\n    }\n  },\n  mutations: {\n    setData: function setData(state, payload) {\n      // eslint-disable-next-line no-param-reassign\n      state.data = payload;\n      return state;\n    },\n    setSaveAlways: function setSaveAlways(state, payload) {\n      // eslint-disable-next-line no-param-reassign\n      state.saveAlways = payload;\n      return state;\n    },\n    setLastItem: function setLastItem(state, payload) {\n      // eslint-disable-next-line no-param-reassign\n      state.lastItem = payload;\n      console.log('setLastItem', payload);\n      return state;\n    }\n  },\n  initialState: {\n    data: [],\n    saveAlways: true,\n    lastItem: null\n  }\n});\n\nstore.setExternalHandler = function (onLoad, onPost) {\n  _onLoad = onLoad;\n  _onPost = onPost;\n};\n\nvar _default = store;\nexports[\"default\"] = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}