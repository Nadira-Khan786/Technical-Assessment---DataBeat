{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nrequire(\"core-js/modules/es.reflect.construct.js\");\nrequire(\"core-js/modules/es.reflect.get.js\");\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\nrequire(\"core-js/modules/es.symbol.js\");\nrequire(\"core-js/modules/es.symbol.description.js\");\nrequire(\"core-js/modules/es.symbol.iterator.js\");\nrequire(\"core-js/modules/es.array.iterator.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\nrequire(\"core-js/modules/es.weak-map.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.object.assign.js\");\nrequire(\"core-js/modules/es.regexp.flags.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.regexp.exec.js\");\nrequire(\"core-js/modules/es.string.split.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nrequire(\"core-js/modules/es.string.replace.js\");\nrequire(\"core-js/modules/es.string.starts-with.js\");\nrequire(\"core-js/modules/es.regexp.to-string.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.splice.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.array.from.js\");\nrequire(\"core-js/modules/es.string.iterator.js\");\nrequire(\"core-js/modules/es.array.slice.js\");\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\nvar _vanillaTextMask = require(\"@formio/vanilla-text-mask\");\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\nvar _tippy = _interopRequireDefault(require(\"tippy.js\"));\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\nvar _ismobilejs = _interopRequireDefault(require(\"ismobilejs\"));\nvar _Formio = require(\"../../../Formio\");\nvar FormioUtils = _interopRequireWildcard(require(\"../../../utils/utils\"));\nvar _Validator = _interopRequireDefault(require(\"../../../validator/Validator\"));\nvar _Element2 = _interopRequireDefault(require(\"../../../Element\"));\nvar _ComponentModal = _interopRequireDefault(require(\"../componentModal/ComponentModal\"));\nvar _widgets = _interopRequireDefault(require(\"../../../widgets\"));\nvar _addons = _interopRequireDefault(require(\"../../../addons\"));\nvar _uploadAdapter = require(\"../../../providers/storage/uploadAdapter\");\nvar _en = _interopRequireDefault(require(\"../../../translations/en\"));\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj.default = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nvar isIEBrowser = FormioUtils.getBrowserInfo().ie;\nvar Templates = _Formio.GlobalFormio.Templates;\nif (!Templates) {\n  Templates = require('../../../templates/Templates').default;\n}\n/**\n * This is the Component class\n which all elements within the FormioForm derive from.\n */\n\nvar Component = /*#__PURE__*/function (_Element) {\n  _inherits(Component, _Element);\n  var _super = _createSuper(Component);\n\n  /* eslint-enable no-unused-vars */\n\n  /**\n   * Initialize a new Component.\n   *\n   * @param {Object} component - The component JSON you wish to initialize.\n   * @param {Object} options - The options for this component.\n   * @param {Object} data - The global data submission object this component will belong.\n   */\n\n  /* eslint-disable max-statements */\n  function Component(component, options, data) {\n    var _this;\n    _classCallCheck(this, Component);\n    _this = _super.call(this, Object.assign({\n      renderMode: 'form',\n      attachMode: 'full',\n      noDefaults: false\n    }, options || {})); // Restore the component id.\n\n    if (component && component.id) {\n      _this.id = component.id;\n    }\n    /**\n     * Determines if this component has a condition assigned to it.\n     * @type {null}\n     * @private\n     */\n\n    _this._hasCondition = null;\n    /**\n     * References to dom elements\n     */\n\n    _this.refs = {}; // Allow global override for any component JSON.\n\n    if (component && _this.options.components && _this.options.components[component.type]) {\n      _lodash.default.merge(component, _this.options.components[component.type]);\n    }\n    /**\n     * Set the validator instance.\n     */\n\n    _this.validator = _Validator.default;\n    /**\n     * The data path to this specific component instance.\n     *\n     * @type {string}\n     */\n\n    _this.path = '';\n    /**\n     * The Form.io component JSON schema.\n     * @type {*}\n     */\n\n    _this.component = _this.mergeSchema(component || {}); // Add the id to the component.\n\n    _this.component.id = _this.id; // Save off the original component to be used in logic.\n\n    _this.originalComponent = (0, FormioUtils.fastCloneDeep)(_this.component);\n    /**\n     * If the component has been attached\n     */\n\n    _this.attached = false;\n    /**\n     * If the component has been rendered\n     */\n\n    _this.rendered = false;\n    /**\n     * The data object in which this component resides.\n     * @type {*}\n     */\n\n    _this._data = data || {};\n    /**\n     * The existing error that this component has.\n     * @type {string}\n     */\n\n    _this.error = '';\n    /**\n     * Tool tip text after processing\n     * @type {string}\n     */\n\n    _this.tooltip = '';\n    /**\n     * The row path of this component.\n     * @type {number}\n     */\n\n    _this.row = _this.options.row;\n    /**\n     * Determines if this component is disabled, or not.\n     *\n     * @type {boolean}\n     */\n\n    _this._disabled = (0, FormioUtils.boolValue)(_this.component.disabled) ? _this.component.disabled : false;\n    /**\n     * Points to the root component, usually the FormComponent.\n     *\n     * @type {Component}\n     */\n\n    _this.root = _this.options.root;\n    _this.localRoot = _this.options.localRoot;\n    /**\n     * If this input has been input and provided value.\n     *\n     * @type {boolean}\n     */\n\n    _this.pristine = true;\n    /**\n     * Points to the parent component.\n     *\n     * @type {Component}\n     */\n\n    _this.parent = _this.options.parent;\n    _this.options.name = _this.options.name || 'data';\n    /**\n     * The validators that are assigned to this component.\n     * @type {[string]}\n     */\n\n    _this.validators = ['required', 'minLength', 'maxLength', 'minWords', 'maxWords', 'custom', 'pattern', 'json', 'mask'];\n    _this._path = ''; // Nested forms don't have parents so we need to pass their path in.\n\n    _this._parentPath = _this.options.parentPath || ''; // Needs for Nextgen Rules Engine\n\n    _this.resetCaches();\n    /**\n     * Determines if this component is visible, or not.\n     */\n\n    _this._parentVisible = _this.options.hasOwnProperty('parentVisible') ? _this.options.parentVisible : true;\n    _this._visible = _this._parentVisible && _this.conditionallyVisible(null, data);\n    _this._parentDisabled = false;\n    /**\n     * Used to trigger a new change in this component.\n     * @type {function} - Call to trigger a change in this component.\n     */\n\n    var changes = [];\n    var lastChanged = null;\n    var triggerArgs = [];\n    var _triggerChange = _lodash.default.debounce(function () {\n      var _this2;\n      if (_this.root) {\n        _this.root.changing = false;\n      }\n      triggerArgs = [];\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      if (!args[1] && lastChanged) {\n        // Set the changed component if one isn't provided.\n        args[1] = lastChanged;\n      }\n      if (_lodash.default.isEmpty(args[0]) && lastChanged) {\n        // Set the flags if it is empty and lastChanged exists.\n        args[0] = lastChanged.flags;\n      }\n      lastChanged = null;\n      args[3] = changes;\n      var retVal = (_this2 = _this).onChange.apply(_this2, args);\n      changes = [];\n      return retVal;\n    }, 100);\n    _this.triggerChange = function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      if (args[1]) {\n        // Make sure that during the debounce that we always track lastChanged component, even if they\n        // don't provide one later.\n        lastChanged = args[1];\n        changes.push(lastChanged);\n      }\n      if (_this.root) {\n        _this.root.changing = true;\n      }\n      if (args.length) {\n        triggerArgs = args;\n      }\n      return _triggerChange.apply(void 0, _toConsumableArray(triggerArgs));\n    };\n    /**\n     * Used to trigger a redraw event within this component.\n     *\n     * @type {Function}\n     */\n\n    _this.triggerRedraw = _lodash.default.debounce(_this.redraw.bind(_assertThisInitialized(_this)), 100);\n    /**\n     * list of attached tooltips\n     * @type {Array}\n     */\n\n    _this.tooltips = [];\n    /**\n     * List of attached addons\n     * @type {Array}\n     */\n\n    _this.addons = []; // To force this component to be invalid.\n\n    _this.invalid = false;\n    if (_this.component) {\n      _this.type = _this.component.type;\n      if (_this.allowData && _this.key) {\n        _this.options.name += \"[\".concat(_this.key, \"]\"); // If component is visible or not set to clear on hide, set the default value.\n\n        if (_this.visible || !_this.component.clearOnHide) {\n          if (!_this.hasValue()) {\n            if (_this.shouldAddDefaultValue) {\n              _this.dataValue = _this.defaultValue;\n            }\n          } else {\n            // Ensure the dataValue is set.\n\n            /* eslint-disable  no-self-assign */\n            _this.dataValue = _this.dataValue;\n            /* eslint-enable  no-self-assign */\n          }\n        }\n      }\n      /**\n       * The element information for creating the input element.\n       * @type {*}\n       */\n\n      _this.info = _this.elementInfo();\n    } // Allow anyone to hook into the component creation.\n\n    _this.hook('component');\n    if (!_this.options.skipInit) {\n      _this.init();\n    }\n    return _this;\n  }\n  /* eslint-enable max-statements */\n\n  _createClass(Component, [{\n    key: \"data\",\n    get: function get() {\n      return this._data;\n    },\n    set: function set(value) {\n      this._data = value;\n    }\n  }, {\n    key: \"mergeSchema\",\n    value: function mergeSchema() {\n      var component = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return _lodash.default.defaultsDeep(component, this.defaultSchema);\n    } // Allow componets to notify when ready.\n  }, {\n    key: \"ready\",\n    get: function get() {\n      return _nativePromiseOnly.default.resolve(this);\n    }\n  }, {\n    key: \"labelInfo\",\n    get: function get() {\n      var label = {};\n      label.hidden = this.labelIsHidden();\n      label.className = '';\n      label.labelPosition = this.component.labelPosition;\n      label.tooltipClass = \"\".concat(this.iconClass('question-sign'), \" text-muted\");\n      var isPDFReadOnlyMode = this.parent && this.parent.form && this.parent.form.display === 'pdf' && this.options.readOnly;\n      if (this.hasInput && this.component.validate && (0, FormioUtils.boolValue)(this.component.validate.required) && !isPDFReadOnlyMode) {\n        label.className += ' field-required';\n      }\n      if (label.hidden) {\n        label.className += ' control-label--hidden';\n      }\n      if (this.info.attr.id) {\n        label.for = this.info.attr.id;\n      }\n      return label;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this$component$addon,\n        _this3 = this;\n      this.disabled = this.shouldDisabled;\n      this._visible = this.conditionallyVisible(null, null);\n      if ((_this$component$addon = this.component.addons) !== null && _this$component$addon !== void 0 && _this$component$addon.length) {\n        this.component.addons.forEach(function (addon) {\n          return _this3.createAddon(addon);\n        });\n      }\n    }\n  }, {\n    key: \"createAddon\",\n    value: function createAddon(addonConfiguration) {\n      var _addonConfiguration$s;\n      var name = addonConfiguration.name;\n      if (!name) {\n        return;\n      }\n      var settings = ((_addonConfiguration$s = addonConfiguration.settings) === null || _addonConfiguration$s === void 0 ? void 0 : _addonConfiguration$s.data) || {};\n      var Addon = _addons.default[name];\n      var addon = null;\n      if (Addon) {\n        var supportedComponents = Addon.info.supportedComponents;\n        var supportsThisComponentType = !(supportedComponents !== null && supportedComponents !== void 0 && supportedComponents.length) || supportedComponents.indexOf(this.component.type) !== -1;\n        if (supportsThisComponentType) {\n          addon = new Addon(settings, this);\n          this.addons.push(addon);\n        } else {\n          console.warn(\"Addon \".concat(name, \" does not support component of type \").concat(this.component.type, \".\"));\n        }\n      }\n      return addon;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(Component.prototype), \"destroy\", this).call(this);\n      this.detach();\n      this.addons.forEach(function (addon) {\n        return addon.destroy();\n      });\n    }\n  }, {\n    key: \"shouldDisabled\",\n    get: function get() {\n      return this.options.readOnly || this.component.disabled || this.options.hasOwnProperty('disabled') && this.options.disabled[this.key];\n    }\n  }, {\n    key: \"isInputComponent\",\n    get: function get() {\n      return !this.component.hasOwnProperty('input') || this.component.input;\n    }\n  }, {\n    key: \"allowData\",\n    get: function get() {\n      return this.hasInput;\n    }\n  }, {\n    key: \"hasInput\",\n    get: function get() {\n      return this.isInputComponent || this.refs.input && this.refs.input.length;\n    }\n  }, {\n    key: \"defaultSchema\",\n    get: function get() {\n      return Component.schema();\n    }\n  }, {\n    key: \"key\",\n    get: function get() {\n      return _lodash.default.get(this.component, 'key', '');\n    }\n  }, {\n    key: \"parentVisible\",\n    get: function get() {\n      return this._parentVisible;\n    },\n    set: function set(value) {\n      this._parentVisible = value;\n    }\n  }, {\n    key: \"parentDisabled\",\n    get: function get() {\n      return this._parentDisabled;\n    }\n    /**\n     *\n     * @param value {boolean}\n     */,\n\n    set: function set(value) {\n      this._parentDisabled = value;\n    }\n  }, {\n    key: \"visible\",\n    get:\n    /**\n     *\n     * @returns {boolean}\n     */\n    function get() {\n      // Show only if visibility changes or if we are in builder mode or if hidden fields should be shown.\n      if (this.builderMode || this.previewMode || this.options.showHiddenFields) {\n        return true;\n      }\n      if (this.options.hide && this.options.hide[this.component.key]) {\n        return false;\n      }\n      if (this.options.show && this.options.show[this.component.key]) {\n        return true;\n      }\n      return this._visible && this._parentVisible;\n    },\n    set: function set(value) {\n      if (this._visible !== value) {\n        this._visible = value;\n        this.clearOnHide();\n        this.redraw();\n      }\n    }\n  }, {\n    key: \"currentForm\",\n    get: function get() {\n      return this._currentForm;\n    },\n    set: function set(instance) {\n      this._currentForm = instance;\n    }\n  }, {\n    key: \"fullMode\",\n    get: function get() {\n      return this.options.attachMode === 'full';\n    }\n  }, {\n    key: \"builderMode\",\n    get: function get() {\n      return this.options.attachMode === 'builder';\n    }\n  }, {\n    key: \"calculatedPath\",\n    get: function get() {\n      console.error('component.calculatedPath was deprecated, use component.path instead.');\n      return this.path;\n    }\n  }, {\n    key: \"labelPosition\",\n    get: function get() {\n      return this.component.labelPosition;\n    }\n  }, {\n    key: \"labelWidth\",\n    get: function get() {\n      var width = this.component.labelWidth;\n      return width >= 0 ? width : 30;\n    }\n  }, {\n    key: \"labelMargin\",\n    get: function get() {\n      var margin = this.component.labelMargin;\n      return margin >= 0 ? margin : 3;\n    }\n  }, {\n    key: \"isAdvancedLabel\",\n    get: function get() {\n      return ['left-left', 'left-right', 'right-left', 'right-right'].includes(this.labelPosition);\n    }\n  }, {\n    key: \"labelPositions\",\n    get: function get() {\n      return this.labelPosition.split('-');\n    }\n  }, {\n    key: \"skipInEmail\",\n    get: function get() {\n      return false;\n    }\n  }, {\n    key: \"rightDirection\",\n    value: function rightDirection(direction) {\n      if (this.options.condensedMode) {\n        return false;\n      }\n      return direction === 'right';\n    }\n  }, {\n    key: \"getLabelInfo\",\n    value: function getLabelInfo() {\n      var isCondensed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var isRightPosition = this.rightDirection(this.labelPositions[0]);\n      var isLeftPosition = this.labelPositions[0] === 'left' || isCondensed;\n      var isRightAlign = this.rightDirection(this.labelPositions[1]);\n      var contentMargin = '';\n      if (this.component.hideLabel) {\n        var margin = this.labelWidth + this.labelMargin;\n        contentMargin = isRightPosition ? \"margin-right: \".concat(margin, \"%\") : '';\n        contentMargin = isLeftPosition ? \"margin-left: \".concat(margin, \"%\") : '';\n      }\n      var labelStyles = \"\\n      flex: \".concat(this.labelWidth, \";\\n      \").concat(isRightPosition ? 'margin-left' : 'margin-right', \": \").concat(this.labelMargin, \"%;\\n    \");\n      var contentStyles = \"\\n      flex: \".concat(100 - this.labelWidth - this.labelMargin, \";\\n      \").concat(contentMargin, \";\\n      \").concat(this.component.hideLabel ? \"max-width: \".concat(100 - this.labelWidth - this.labelMargin) : '', \";\\n    \");\n      return {\n        isRightPosition: isRightPosition,\n        isRightAlign: isRightAlign,\n        labelStyles: labelStyles,\n        contentStyles: contentStyles\n      };\n    }\n    /**\n     * Returns only the schema that is different from the default.\n     *\n     * @param schema\n     * @param defaultSchema\n     */\n  }, {\n    key: \"getModifiedSchema\",\n    value: function getModifiedSchema(schema, defaultSchema, recursion) {\n      var _this4 = this;\n      var modified = {};\n      if (!defaultSchema) {\n        return schema;\n      }\n      _lodash.default.each(schema, function (val, key) {\n        if (!_lodash.default.isArray(val) && _lodash.default.isObject(val) && defaultSchema.hasOwnProperty(key)) {\n          var subModified = _this4.getModifiedSchema(val, defaultSchema[key], true);\n          if (!_lodash.default.isEmpty(subModified)) {\n            modified[key] = subModified;\n          }\n        } else if (_lodash.default.isArray(val)) {\n          if (val.length !== 0 && !_lodash.default.isEqual(val, defaultSchema[key])) {\n            modified[key] = val;\n          }\n        } else if (!recursion && key === 'type' || !recursion && key === 'key' || !recursion && key === 'label' || !recursion && key === 'input' || !recursion && key === 'tableView' || val !== '' && !defaultSchema.hasOwnProperty(key) || val !== '' && val !== defaultSchema[key] || defaultSchema[key] && val !== defaultSchema[key]) {\n          modified[key] = val;\n        }\n      });\n      return modified;\n    }\n    /**\n     * Returns the JSON schema for this component.\n     */\n  }, {\n    key: \"schema\",\n    get: function get() {\n      return (0, FormioUtils.fastCloneDeep)(this.getModifiedSchema(_lodash.default.omit(this.component, 'id'), this.defaultSchema));\n    }\n    /**\n     * Returns true if component is inside DataGrid\n     */\n  }, {\n    key: \"isInDataGrid\",\n    get: function get() {\n      return this.inDataGrid;\n    }\n    /**\n     * Translate a text using the i18n system.\n     *\n     * @param {string} text - The i18n identifier.\n     * @param {Object} params - The i18n parameters to use for translation.\n     */\n  }, {\n    key: \"t\",\n    value: function t(text) {\n      var _get2;\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (!text) {\n        return '';\n      } // Use _userInput: true to ignore translations from defaults\n\n      if (text in _en.default && params._userInput) {\n        return text;\n      }\n      params.data = this.rootValue;\n      params.row = this.data;\n      params.component = this.component;\n      for (var _len3 = arguments.length, args = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n        args[_key3 - 2] = arguments[_key3];\n      }\n      return (_get2 = _get(_getPrototypeOf(Component.prototype), \"t\", this)).call.apply(_get2, [this, text, params].concat(args));\n    }\n  }, {\n    key: \"labelIsHidden\",\n    value: function labelIsHidden() {\n      return !this.component.label || (!this.isInDataGrid && this.component.hideLabel || this.isInDataGrid && !this.component.dataGridLabel || this.options.inputsOnly) && !this.builderMode;\n    }\n  }, {\n    key: \"transform\",\n    get: function get() {\n      return Templates.current.hasOwnProperty('transform') ? Templates.current.transform.bind(Templates.current) : function (type, value) {\n        return value;\n      };\n    }\n  }, {\n    key: \"getTemplate\",\n    value: function getTemplate(names, modes) {\n      modes = Array.isArray(modes) ? modes : [modes];\n      names = Array.isArray(names) ? names : [names];\n      if (!modes.includes('form')) {\n        modes.push('form');\n      }\n      var result = null;\n      if (this.options.templates) {\n        result = this.checkTemplate(this.options.templates, names, modes);\n        if (result) {\n          return result;\n        }\n      }\n      var frameworkTemplates = this.options.template ? Templates.templates[this.options.template] : Templates.current;\n      result = this.checkTemplate(frameworkTemplates, names, modes);\n      if (result) {\n        return result;\n      } // Default back to bootstrap if not defined.\n\n      var name = names[names.length - 1];\n      var templatesByName = Templates.defaultTemplates[name];\n      if (!templatesByName) {\n        return \"Unknown template: \".concat(name);\n      }\n      var templateByMode = this.checkTemplateMode(templatesByName, modes);\n      if (templateByMode) {\n        return templateByMode;\n      }\n      return templatesByName.form;\n    }\n  }, {\n    key: \"checkTemplate\",\n    value: function checkTemplate(templates, names, modes) {\n      var _iterator = _createForOfIteratorHelper(names),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var name = _step.value;\n          var templatesByName = templates[name];\n          if (templatesByName) {\n            var templateByMode = this.checkTemplateMode(templatesByName, modes);\n            if (templateByMode) {\n              return templateByMode;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return null;\n    }\n  }, {\n    key: \"checkTemplateMode\",\n    value: function checkTemplateMode(templatesByName, modes) {\n      var _iterator2 = _createForOfIteratorHelper(modes),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var mode = _step2.value;\n          var templateByMode = templatesByName[mode];\n          if (templateByMode) {\n            return templateByMode;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      return null;\n    }\n  }, {\n    key: \"getFormattedTooltip\",\n    value: function getFormattedTooltip(tooltipValue) {\n      var tooltip = this.interpolate(tooltipValue || '').replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n      return tooltip ? this.t(tooltip, {\n        _userInput: true\n      }).replace(/\"/g, '&quot;') : '';\n    }\n  }, {\n    key: \"isHtmlRenderMode\",\n    value: function isHtmlRenderMode() {\n      return this.options.renderMode === 'html';\n    }\n  }, {\n    key: \"renderTemplate\",\n    value: function renderTemplate(name) {\n      var _this5 = this;\n      var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var modeOption = arguments.length > 2 ? arguments[2] : undefined;\n      // Need to make this fall back to form if renderMode is not found similar to how we search templates.\n      var mode = modeOption || this.options.renderMode || 'form';\n      data.component = this.component;\n      data.self = this;\n      data.options = this.options;\n      data.readOnly = this.options.readOnly;\n      data.iconClass = this.iconClass.bind(this);\n      data.size = this.size.bind(this);\n      data.t = this.t.bind(this);\n      data.transform = this.transform;\n      data.id = data.id || this.id;\n      data.key = data.key || this.key;\n      data.value = data.value || this.dataValue;\n      data.disabled = this.disabled;\n      data.builder = this.builderMode;\n      data.render = function () {\n        console.warn(\"Form.io 'render' template function is deprecated.\\n      If you need to render template (template A) inside of another template (template B),\\n      pass pre-compiled template A (use this.renderTemplate('template_A_name') as template context variable for template B\");\n        return _this5.renderTemplate.apply(_this5, arguments);\n      };\n      data.label = this.labelInfo;\n      data.tooltip = this.getFormattedTooltip(this.component.tooltip); // Allow more specific template names\n\n      var names = [\"\".concat(name, \"-\").concat(this.component.type, \"-\").concat(this.key), \"\".concat(name, \"-\").concat(this.component.type), \"\".concat(name, \"-\").concat(this.key), \"\".concat(name)]; // Allow template alters.\n\n      return this.hook(\"render\".concat(name.charAt(0).toUpperCase() + name.substring(1, name.length)), this.interpolate(this.getTemplate(names, mode), data), data, mode);\n    }\n    /**\n     * Sanitize an html string.\n     *\n     * @param string\n     * @returns {*}\n     */\n  }, {\n    key: \"sanitize\",\n    value: function sanitize(dirty, forceSanitize, options) {\n      var _this$options;\n\n      // No need to sanitize when generating PDF'S since no users interact with the form.\n      if (!this.shouldSanitizeValue && !forceSanitize || this.options.pdf && !forceSanitize) {\n        return dirty;\n      }\n      return FormioUtils.sanitize(dirty, {\n        sanitizeConfig: _lodash.default.merge(((_this$options = this.options) === null || _this$options === void 0 ? void 0 : _this$options.sanitizeConfig) || {}, options || {})\n      });\n    }\n    /**\n     * Render a template string into html.\n     *\n     * @param template\n     * @param data\n     * @param actions\n     *\n     * @return {HTMLElement|String} - The created element or an empty string if template is not specified.\n     */\n  }, {\n    key: \"renderString\",\n    value: function renderString(template, data) {\n      if (!template) {\n        return '';\n      } // Interpolate the template and populate\n\n      return this.interpolate(template, data);\n    }\n  }, {\n    key: \"performInputMapping\",\n    value: function performInputMapping(input) {\n      return input;\n    }\n  }, {\n    key: \"widget\",\n    get: function get() {\n      var _this$root;\n      var settings = this.component.widget;\n      if (settings && (_this$root = this.root) !== null && _this$root !== void 0 && _this$root.shadowRoot) {\n        settings.shadowRoot = this.root.shadowRoot;\n      }\n      var widget = settings && _widgets.default[settings.type] ? new _widgets.default[settings.type](settings, this.component, this) : null;\n      return widget;\n    }\n  }, {\n    key: \"getBrowserLanguage\",\n    value: function getBrowserLanguage() {\n      var nav = window.navigator;\n      var browserLanguagePropertyKeys = ['language', 'browserLanguage', 'systemLanguage', 'userLanguage'];\n      var language; // support for HTML 5.1 \"navigator.languages\"\n\n      if (Array.isArray(nav.languages)) {\n        for (var i = 0; i < nav.languages.length; i++) {\n          language = nav.languages[i];\n          if (language && language.length) {\n            return language.split(';')[0];\n          }\n        }\n      } // support for other well known properties in browsers\n\n      for (var _i = 0; _i < browserLanguagePropertyKeys.length; _i++) {\n        language = nav[browserLanguagePropertyKeys[_i]];\n        if (language && language.length) {\n          return language.split(';')[0];\n        }\n      }\n      return null;\n    }\n    /**\n     * Called before a next and previous page is triggered allowing the components\n     * to perform special functions.\n     *\n     * @return {*}\n     */\n  }, {\n    key: \"beforePage\",\n    value: function beforePage() {\n      return _nativePromiseOnly.default.resolve(true);\n    }\n  }, {\n    key: \"beforeNext\",\n    value: function beforeNext() {\n      return this.beforePage(true);\n    }\n    /**\n     * Called before a submission is triggered allowing the components\n     * to perform special async functions.\n     *\n     * @return {*}\n     */\n  }, {\n    key: \"beforeSubmit\",\n    value: function beforeSubmit() {\n      return _nativePromiseOnly.default.resolve(true);\n    }\n    /**\n     * Return the submission timezone.\n     *\n     * @return {*}\n     */\n  }, {\n    key: \"submissionTimezone\",\n    get: function get() {\n      this.options.submissionTimezone = this.options.submissionTimezone || _lodash.default.get(this.root, 'options.submissionTimezone');\n      return this.options.submissionTimezone;\n    }\n  }, {\n    key: \"timezone\",\n    get: function get() {\n      return this.getTimezone(this.component);\n    }\n  }, {\n    key: \"getTimezone\",\n    value: function getTimezone(settings) {\n      if (settings.timezone) {\n        return settings.timezone;\n      }\n      if (settings.displayInTimezone === 'utc') {\n        return 'UTC';\n      }\n      var submissionTimezone = this.submissionTimezone;\n      if (submissionTimezone && (settings.displayInTimezone === 'submission' || (this.options.pdf || this.options.server) && settings.displayInTimezone === 'viewer')) {\n        return submissionTimezone;\n      } // Return current timezone if none are provided.\n\n      return (0, FormioUtils.currentTimezone)();\n    }\n  }, {\n    key: \"loadRefs\",\n    value: function loadRefs(element, refs) {\n      for (var ref in refs) {\n        var refType = refs[ref];\n        var isString = typeof refType === 'string';\n        var selector = isString && refType.includes('scope') ? \":scope > [ref=\\\"\".concat(ref, \"\\\"]\") : \"[ref=\\\"\".concat(ref, \"\\\"]\");\n        if (isString && refType.startsWith('single')) {\n          this.refs[ref] = element.querySelector(selector);\n        } else {\n          this.refs[ref] = element.querySelectorAll(selector);\n        }\n      }\n    }\n  }, {\n    key: \"setOpenModalElement\",\n    value: function setOpenModalElement(template) {\n      this.componentModal.setOpenModalElement(template || this.getModalPreviewTemplate());\n    }\n  }, {\n    key: \"getModalPreviewTemplate\",\n    value: function getModalPreviewTemplate() {\n      var dataValue = this.component.type === 'password' ? this.dataValue.replace(/./g, '•') : this.dataValue;\n      var message = this.error ? {\n        level: 'error',\n        message: this.error.message\n      } : '';\n      return this.renderTemplate('modalPreview', {\n        previewText: this.getValueAsString(dataValue, {\n          modalPreview: true\n        }) || this.t('Click to set value'),\n        messages: message && this.renderTemplate('message', message)\n      });\n    }\n  }, {\n    key: \"build\",\n    value: function build(element) {\n      element = element || this.element;\n      this.empty(element);\n      this.setContent(element, this.render());\n      return this.attach(element);\n    }\n  }, {\n    key: \"hasModalSaveButton\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var children = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"Unknown component: \".concat(this.component.type);\n      var topLevel = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var isVisible = this.visible;\n      this.rendered = true;\n      if (!this.builderMode && !this.previewMode && this.component.modalEdit) {\n        return _ComponentModal.default.render(this, {\n          visible: isVisible,\n          showSaveButton: this.hasModalSaveButton,\n          id: this.id,\n          classes: this.className,\n          styles: this.customStyle,\n          children: children\n        }, topLevel);\n      } else {\n        return this.renderTemplate('component', {\n          visible: isVisible,\n          id: this.id,\n          classes: this.className,\n          styles: this.customStyle,\n          children: children\n        }, topLevel);\n      }\n    }\n  }, {\n    key: \"attachTooltips\",\n    value: function attachTooltips(toolTipsRefs) {\n      var _this6 = this;\n      toolTipsRefs === null || toolTipsRefs === void 0 ? void 0 : toolTipsRefs.forEach(function (tooltip, index) {\n        if (tooltip) {\n          var tooltipAttribute = tooltip.getAttribute('data-tooltip');\n          var tooltipDataTitle = tooltip.getAttribute('data-title');\n          var tooltipText = _this6.interpolate(tooltipDataTitle || tooltipAttribute).replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n          _this6.tooltips[index] = (0, _tippy.default)(tooltip, {\n            allowHTML: true,\n            trigger: 'mouseenter click focus',\n            placement: 'right',\n            zIndex: 10000,\n            interactive: true,\n            content: _this6.t(tooltipText, {\n              _userInput: true\n            })\n          });\n        }\n      });\n    }\n  }, {\n    key: \"createComponentModal\",\n    value: function createComponentModal(element, modalShouldBeOpened, currentValue) {\n      return new _ComponentModal.default(this, element, modalShouldBeOpened, currentValue);\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      if (!this.builderMode && !this.previewMode && this.component.modalEdit) {\n        var modalShouldBeOpened = this.componentModal ? this.componentModal.isOpened : false;\n        var currentValue = modalShouldBeOpened ? this.componentModal.currentValue : this.dataValue;\n        var openModalTemplate = this.componentModal && modalShouldBeOpened ? this.componentModal.openModalTemplate : null;\n        this.componentModal = this.createComponentModal(element, modalShouldBeOpened, currentValue);\n        this.setOpenModalElement(openModalTemplate);\n      }\n      this.attached = true;\n      this.element = element;\n      element.component = this; // If this already has an id, get it from the dom. If SSR, it could be different from the initiated id.\n\n      if (this.element.id) {\n        this.id = this.element.id;\n        this.component.id = this.id;\n      }\n      this.loadRefs(element, {\n        messageContainer: 'single',\n        tooltip: 'multiple'\n      });\n      this.attachTooltips(this.refs.tooltip); // Attach logic.\n\n      this.attachLogic();\n      this.autofocus(); // Allow global attach.\n\n      this.hook('attachComponent', element, this); // Allow attach per component type.\n\n      var type = this.component.type;\n      if (type) {\n        this.hook(\"attach\".concat(type.charAt(0).toUpperCase() + type.substring(1, type.length)), element, this);\n      }\n      this.restoreFocus();\n      this.addons.forEach(function (addon) {\n        return addon.attach(element);\n      });\n      return _nativePromiseOnly.default.resolve();\n    }\n  }, {\n    key: \"restoreFocus\",\n    value: function restoreFocus() {\n      var _this$root2, _this$root2$focusedCo;\n      var isFocused = ((_this$root2 = this.root) === null || _this$root2 === void 0 ? void 0 : (_this$root2$focusedCo = _this$root2.focusedComponent) === null || _this$root2$focusedCo === void 0 ? void 0 : _this$root2$focusedCo.path) === this.path;\n      if (isFocused) {\n        var _this$root$currentSel;\n        this.loadRefs(this.element, {\n          input: 'multiple'\n        });\n        this.focus((_this$root$currentSel = this.root.currentSelection) === null || _this$root$currentSel === void 0 ? void 0 : _this$root$currentSel.index);\n        this.restoreCaretPosition();\n      }\n    }\n  }, {\n    key: \"addShortcut\",\n    value: function addShortcut(element, shortcut) {\n      // Avoid infinite recursion.\n      if (!element || !this.root || this.root === this) {\n        return;\n      }\n      if (!shortcut) {\n        shortcut = this.component.shortcut;\n      }\n      this.root.addShortcut(element, shortcut);\n    }\n  }, {\n    key: \"removeShortcut\",\n    value: function removeShortcut(element, shortcut) {\n      // Avoid infinite recursion.\n      if (!element || this.root === this) {\n        return;\n      }\n      if (!shortcut) {\n        shortcut = this.component.shortcut;\n      }\n      this.root.removeShortcut(element, shortcut);\n    }\n    /**\n     * Remove all event handlers.\n     */\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      this.refs = {};\n      this.removeEventListeners();\n      this.detachLogic();\n      if (this.tooltip) {\n        this.tooltip.destroy();\n      }\n    }\n  }, {\n    key: \"checkRefresh\",\n    value: function checkRefresh(refreshData, changed, flags) {\n      var changePath = _lodash.default.get(changed, 'instance.path', false); // Don't let components change themselves.\n\n      if (changePath && this.path === changePath) {\n        return;\n      }\n      if (refreshData === 'data') {\n        this.refresh(this.data, changed, flags);\n      } else if (changePath && (0, FormioUtils.getComponentPath)(changed.instance) === refreshData && changed && changed.instance &&\n      // Make sure the changed component is not in a different \"context\". Solves issues where refreshOn being set\n      // in fields inside EditGrids could alter their state from other rows (which is bad).\n      this.inContext(changed.instance)) {\n        this.refresh(changed.value, changed, flags);\n      }\n    }\n  }, {\n    key: \"checkRefreshOn\",\n    value: function checkRefreshOn(changes) {\n      var _this7 = this;\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      changes = changes || [];\n      if (flags.noRefresh) {\n        return;\n      }\n      if (!changes.length && flags.changed) {\n        changes = [flags.changed];\n      }\n      var refreshOn = flags.fromBlur ? this.component.refreshOnBlur : this.component.refreshOn || this.component.redrawOn; // If they wish to refresh on a value, then add that here.\n\n      if (refreshOn) {\n        if (Array.isArray(refreshOn)) {\n          refreshOn.forEach(function (refreshData) {\n            return changes.forEach(function (changed) {\n              return _this7.checkRefresh(refreshData, changed, flags);\n            });\n          });\n        } else {\n          changes.forEach(function (changed) {\n            return _this7.checkRefresh(refreshOn, changed, flags);\n          });\n        }\n      }\n    }\n    /**\n     * Refreshes the component with a new value.\n     *\n     * @param value\n     */\n  }, {\n    key: \"refresh\",\n    value: function refresh(value) {\n      if (this.hasOwnProperty('refreshOnValue')) {\n        this.refreshOnChanged = !_lodash.default.isEqual(value, this.refreshOnValue);\n      } else {\n        this.refreshOnChanged = true;\n      }\n      this.refreshOnValue = (0, FormioUtils.fastCloneDeep)(value);\n      if (this.refreshOnChanged) {\n        if (this.component.clearOnRefresh) {\n          this.setValue(null);\n        }\n        this.triggerRedraw();\n      }\n    }\n    /**\n     * Checks to see if a separate component is in the \"context\" of this component. This is determined by first checking\n     * if they share the same \"data\" object. It will then walk up the parent tree and compare its parents data objects\n     * with the components data and returns true if they are in the same context.\n     *\n     * Different rows of the same EditGrid, for example, are in different contexts.\n     *\n     * @param component\n     */\n  }, {\n    key: \"inContext\",\n    value: function inContext(component) {\n      if (component.data === this.data) {\n        return true;\n      }\n      var parent = this.parent;\n      while (parent) {\n        if (parent.data === component.data) {\n          return true;\n        }\n        parent = parent.parent;\n      }\n      return false;\n    }\n  }, {\n    key: \"viewOnly\",\n    get: function get() {\n      return this.options.readOnly && this.options.viewAsHtml;\n    }\n  }, {\n    key: \"createViewOnlyElement\",\n    value: function createViewOnlyElement() {\n      this.element = this.ce('dl', {\n        id: this.id\n      });\n      if (this.element) {\n        // Ensure you can get the component info from the element.\n        this.element.component = this;\n      }\n      return this.element;\n    }\n  }, {\n    key: \"defaultViewOnlyValue\",\n    get: function get() {\n      return '-';\n    }\n    /**\n     * Uses the widget to determine the output string.\n     *\n     * @param value\n     * @return {*}\n     */\n  }, {\n    key: \"getWidgetValueAsString\",\n    value: function getWidgetValueAsString(value, options) {\n      var _this8 = this;\n      var noInputWidget = !this.refs.input || !this.refs.input[0] || !this.refs.input[0].widget;\n      if (!value || noInputWidget) {\n        if (!this.widget || !value) {\n          return value;\n        } else {\n          return this.widget.getValueAsString(value);\n        }\n      }\n      if (Array.isArray(value)) {\n        var values = [];\n        value.forEach(function (val, index) {\n          var widget = _this8.refs.input[index] && _this8.refs.input[index].widget;\n          if (widget) {\n            values.push(widget.getValueAsString(val, options));\n          }\n        });\n        return values;\n      }\n      var widget = this.refs.input[0].widget;\n      return widget.getValueAsString(value, options);\n    }\n  }, {\n    key: \"getValueAsString\",\n    value: function getValueAsString(value, options) {\n      if (!value) {\n        return '';\n      }\n      value = this.getWidgetValueAsString(value, options);\n      if (Array.isArray(value)) {\n        return value.join(', ');\n      }\n      if (_lodash.default.isPlainObject(value)) {\n        return JSON.stringify(value);\n      }\n      if (value === null || value === undefined) {\n        return '';\n      }\n      var stringValue = value.toString();\n      return this.sanitize(stringValue);\n    }\n  }, {\n    key: \"getView\",\n    value: function getView(value, options) {\n      if (this.component.protected) {\n        return '--- PROTECTED ---';\n      }\n      return this.getValueAsString(value, options);\n    }\n  }, {\n    key: \"updateItems\",\n    value: function updateItems() {\n      this.restoreValue();\n      this.onChange.apply(this, arguments);\n    }\n    /**\n     * @param {*} data\n     * @param {boolean} [forceUseValue=false] - if true, return 'value' property of the data\n     * @return {*}\n     */\n  }, {\n    key: \"itemValue\",\n    value: function itemValue(data) {\n      var forceUseValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (_lodash.default.isObject(data)) {\n        if (this.valueProperty) {\n          return _lodash.default.get(data, this.valueProperty);\n        }\n        if (forceUseValue) {\n          return data.value;\n        }\n      }\n      return data;\n    }\n  }, {\n    key: \"itemValueForHTMLMode\",\n    value: function itemValueForHTMLMode(value) {\n      var _this9 = this;\n      if (Array.isArray(value)) {\n        var values = value.map(function (item) {\n          return Array.isArray(item) ? _this9.itemValueForHTMLMode(item) : _this9.itemValue(item);\n        });\n        return values.join(', ');\n      }\n      return this.itemValue(value);\n    }\n  }, {\n    key: \"createModal\",\n    value: function createModal(element, attr, confirm) {\n      var _this10 = this;\n      var dialog = this.ce('div', attr || {});\n      this.setContent(dialog, this.renderTemplate('dialog')); // Add refs to dialog, not \"this\".\n\n      dialog.refs = {};\n      this.loadRefs.call(dialog, dialog, {\n        dialogOverlay: 'single',\n        dialogContents: 'single',\n        dialogClose: 'single'\n      });\n      dialog.refs.dialogContents.appendChild(element);\n      document.body.appendChild(dialog);\n      document.body.classList.add('modal-open');\n      dialog.close = function () {\n        document.body.classList.remove('modal-open');\n        dialog.dispatchEvent(new CustomEvent('close'));\n      };\n      this.addEventListener(dialog, 'close', function () {\n        return _this10.removeChildFrom(dialog, document.body);\n      });\n      var close = function close(event) {\n        event.preventDefault();\n        dialog.close();\n      };\n      var handleCloseClick = function handleCloseClick(e) {\n        if (confirm) {\n          confirm().then(function () {\n            return close(e);\n          }).catch(function () {});\n        } else {\n          close(e);\n        }\n      };\n      this.addEventListener(dialog.refs.dialogOverlay, 'click', handleCloseClick);\n      this.addEventListener(dialog.refs.dialogClose, 'click', handleCloseClick);\n      return dialog;\n    }\n  }, {\n    key: \"optimizeRedraw\",\n    get: function get() {\n      if (this.options.optimizeRedraw && this.element && !this.visible) {\n        this.addClass(this.element, 'formio-removed');\n        return true;\n      }\n      return false;\n    }\n    /**\n     * Retrieves the CSS class name of this component.\n     * @returns {string} - The class name of this component.\n     */\n  }, {\n    key: \"className\",\n    get: function get() {\n      var className = this.hasInput ? 'form-group has-feedback ' : '';\n      className += \"formio-component formio-component-\".concat(this.component.type, \" \"); // TODO: find proper way to avoid overriding of default type-based component styles\n\n      if (this.key && this.key !== 'form') {\n        className += \"formio-component-\".concat(this.key, \" \");\n      }\n      if (this.component.multiple) {\n        className += 'formio-component-multiple ';\n      }\n      if (this.component.customClass) {\n        className += this.component.customClass;\n      }\n      if (this.hasInput && this.component.validate && (0, FormioUtils.boolValue)(this.component.validate.required)) {\n        className += ' required';\n      }\n      if (this.labelIsHidden()) {\n        className += ' formio-component-label-hidden';\n      }\n      if (!this.visible) {\n        className += ' formio-hidden';\n      }\n      return className;\n    }\n    /**\n     * Build the custom style from the layout values\n     * @return {string} - The custom style\n     */\n  }, {\n    key: \"customStyle\",\n    get: function get() {\n      var customCSS = '';\n      _lodash.default.each(this.component.style, function (value, key) {\n        if (value !== '') {\n          customCSS += \"\".concat(key, \":\").concat(value, \";\");\n        }\n      });\n      return customCSS;\n    }\n  }, {\n    key: \"isMobile\",\n    get: function get() {\n      return (0, _ismobilejs.default)();\n    }\n    /**\n     * Returns the outside wrapping element of this component.\n     * @returns {HTMLElement}\n     */\n  }, {\n    key: \"getElement\",\n    value: function getElement() {\n      return this.element;\n    }\n    /**\n     * Create an evaluation context for all script executions and interpolations.\n     *\n     * @param additional\n     * @return {*}\n     */\n  }, {\n    key: \"evalContext\",\n    value: function evalContext(additional) {\n      return _get(_getPrototypeOf(Component.prototype), \"evalContext\", this).call(this, Object.assign({\n        component: this.component,\n        row: this.data,\n        rowIndex: this.rowIndex,\n        data: this.rootValue,\n        iconClass: this.iconClass.bind(this),\n        // Bind the translate function to the data context of any interpolated string.\n        // It is useful to translate strings in different scenarions (eg: custom edit grid templates, custom error messages etc.)\n        // and desirable to be publicly available rather than calling the internal {instance.t} function in the template string.\n        t: this.t.bind(this),\n        submission: this.root ? this.root._submission : {\n          data: this.rootValue\n        },\n        form: this.root ? this.root._form : {},\n        options: this.options\n      }, additional));\n    }\n    /**\n     * Sets the pristine flag for this component.\n     *\n     * @param pristine {boolean} - TRUE to make pristine, FALSE not pristine.\n     */\n  }, {\n    key: \"setPristine\",\n    value: function setPristine(pristine) {\n      this.pristine = pristine;\n    }\n  }, {\n    key: \"isPristine\",\n    get: function get() {\n      return this.pristine;\n    }\n  }, {\n    key: \"setDirty\",\n    value: function setDirty(dirty) {\n      this.dirty = dirty;\n    }\n  }, {\n    key: \"isDirty\",\n    get: function get() {\n      return this.dirty;\n    }\n    /**\n     * Removes a value out of the data array and rebuild the rows.\n     * @param {number} index - The index of the data element to remove.\n     */\n  }, {\n    key: \"removeValue\",\n    value: function removeValue(index) {\n      this.splice(index);\n      this.redraw();\n      this.restoreValue();\n      this.triggerRootChange();\n    }\n  }, {\n    key: \"iconClass\",\n    value: function iconClass(name, spinning) {\n      var iconset = this.options.iconset || Templates.current.defaultIconset || 'fa';\n      return Templates.current.hasOwnProperty('iconClass') ? Templates.current.iconClass(iconset, name, spinning) : this.options.iconset === 'fa' ? Templates.defaultTemplates.iconClass(iconset, name, spinning) : name;\n    }\n  }, {\n    key: \"size\",\n    value: function size(_size) {\n      return Templates.current.hasOwnProperty('size') ? Templates.current.size(_size) : _size;\n    }\n    /**\n     * The readible name for this component.\n     * @returns {string} - The name of the component.\n     */\n  }, {\n    key: \"name\",\n    get: function get() {\n      return this.t(this.component.label || this.component.placeholder || this.key, {\n        _userInput: true\n      });\n    }\n    /**\n     * Returns the error label for this component.\n     * @return {*}\n     */\n  }, {\n    key: \"errorLabel\",\n    get: function get() {\n      return this.t(this.component.errorLabel || this.component.label || this.component.placeholder || this.key);\n    }\n    /**\n     * Get the error message provided a certain type of error.\n     * @param type\n     * @return {*}\n     */\n  }, {\n    key: \"errorMessage\",\n    value: function errorMessage(type) {\n      return this.component.errors && this.component.errors[type] ? this.component.errors[type] : type;\n    }\n  }, {\n    key: \"setContent\",\n    value: function setContent(element, content, forceSanitize, sanitizeOptions) {\n      if (element instanceof HTMLElement) {\n        element.innerHTML = this.sanitize(content, forceSanitize, sanitizeOptions);\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"restoreCaretPosition\",\n    value: function restoreCaretPosition() {\n      var _this$root3;\n      if ((_this$root3 = this.root) !== null && _this$root3 !== void 0 && _this$root3.currentSelection) {\n        var _this$refs$input;\n        if ((_this$refs$input = this.refs.input) !== null && _this$refs$input !== void 0 && _this$refs$input.length) {\n          var _this$root$currentSel2 = this.root.currentSelection,\n            selection = _this$root$currentSel2.selection,\n            index = _this$root$currentSel2.index;\n          var input = this.refs.input[index];\n          var isInputRangeSelectable = /text|search|password|tel|url/i.test(input.type || '');\n          if (input) {\n            if (isInputRangeSelectable) {\n              var _input;\n              (_input = input).setSelectionRange.apply(_input, _toConsumableArray(selection));\n            }\n          } else {\n            var _input$value;\n            input = this.refs.input[this.refs.input.length];\n            var lastCharacter = ((_input$value = input.value) === null || _input$value === void 0 ? void 0 : _input$value.length) || 0;\n            if (isInputRangeSelectable) {\n              input.setSelectionRange(lastCharacter, lastCharacter);\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      // Don't bother if we have not built yet.\n      if (!this.element || !this.element.parentNode || this.optimizeRedraw) {\n        // Return a non-resolving promise.\n        return _nativePromiseOnly.default.resolve();\n      }\n      this.detach();\n      this.emit('redraw'); // Since we are going to replace the element, we need to know it's position so we can find it in the parent's children.\n\n      var parent = this.element.parentNode;\n      var index = Array.prototype.indexOf.call(parent.children, this.element);\n      this.element.outerHTML = this.sanitize(this.render());\n      this.element = parent.children[index];\n      return this.attach(this.element);\n    }\n  }, {\n    key: \"rebuild\",\n    value: function rebuild() {\n      this.destroy();\n      this.init();\n      this.visible = this.conditionallyVisible(null, null);\n      return this.redraw();\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners() {\n      _get(_getPrototypeOf(Component.prototype), \"removeEventListeners\", this).call(this);\n      this.tooltips.forEach(function (tooltip) {\n        return tooltip.destroy();\n      });\n      this.tooltips = [];\n    }\n  }, {\n    key: \"hasClass\",\n    value: function hasClass(element, className) {\n      if (!element) {\n        return;\n      }\n      return _get(_getPrototypeOf(Component.prototype), \"hasClass\", this).call(this, element, this.transform('class', className));\n    }\n  }, {\n    key: \"addClass\",\n    value: function addClass(element, className) {\n      if (!element) {\n        return;\n      }\n      return _get(_getPrototypeOf(Component.prototype), \"addClass\", this).call(this, element, this.transform('class', className));\n    }\n  }, {\n    key: \"removeClass\",\n    value: function removeClass(element, className) {\n      if (!element) {\n        return;\n      }\n      return _get(_getPrototypeOf(Component.prototype), \"removeClass\", this).call(this, element, this.transform('class', className));\n    }\n    /**\n     * Determines if this component has a condition defined.\n     *\n     * @return {null}\n     */\n  }, {\n    key: \"hasCondition\",\n    value: function hasCondition() {\n      if (this._hasCondition !== null) {\n        return this._hasCondition;\n      }\n      this._hasCondition = FormioUtils.hasCondition(this.component);\n      return this._hasCondition;\n    }\n    /**\n     * Check if this component is conditionally visible.\n     *\n     * @param data\n     * @return {boolean}\n     */\n  }, {\n    key: \"conditionallyVisible\",\n    value: function conditionallyVisible(data, row) {\n      data = data || this.rootValue;\n      row = row || this.data;\n      if (this.builderMode || this.previewMode || !this.hasCondition()) {\n        return !this.component.hidden;\n      }\n      data = data || (this.root ? this.root.data : {});\n      return this.checkCondition(row, data);\n    }\n    /**\n     * Checks the condition of this component.\n     *\n     * TODO: Switch row and data parameters to be consistent with other methods.\n     *\n     * @param row - The row contextual data.\n     * @param data - The global data object.\n     * @return {boolean} - True if the condition applies to this component.\n     */\n  }, {\n    key: \"checkCondition\",\n    value: function checkCondition(row, data) {\n      return FormioUtils.checkCondition(this.component, row || this.data, data || this.rootValue, this.root ? this.root._form : {}, this);\n    }\n    /**\n     * Check for conditionals and hide/show the element based on those conditions.\n     */\n  }, {\n    key: \"checkComponentConditions\",\n    value: function checkComponentConditions(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data;\n      if (!this.builderMode & !this.previewMode && this.fieldLogic(data, row)) {\n        this.redraw();\n      } // Check advanced conditions\n\n      var visible = this.conditionallyVisible(data, row);\n      if (this.visible !== visible) {\n        this.visible = visible;\n      }\n      return visible;\n    }\n    /**\n     * Checks conditions for this component and any sub components.\n     * @param args\n     * @return {boolean}\n     */\n  }, {\n    key: \"checkConditions\",\n    value: function checkConditions(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data;\n      return this.checkComponentConditions(data, flags, row);\n    }\n  }, {\n    key: \"logic\",\n    get: function get() {\n      return this.component.logic || [];\n    }\n    /**\n     * Check all triggers and apply necessary actions.\n     *\n     * @param data\n     */\n  }, {\n    key: \"fieldLogic\",\n    value: function fieldLogic(data, row) {\n      var _this11 = this;\n      data = data || this.rootValue;\n      row = row || this.data;\n      var logics = this.logic; // If there aren't logic, don't go further.\n\n      if (logics.length === 0) {\n        return;\n      }\n      var newComponent = (0, FormioUtils.fastCloneDeep)(this.originalComponent);\n      var changed = logics.reduce(function (changed, logic) {\n        var result = FormioUtils.checkTrigger(newComponent, logic.trigger, row, data, _this11.root ? _this11.root._form : {}, _this11);\n        return (result ? _this11.applyActions(newComponent, logic.actions, result, row, data) : false) || changed;\n      }, false); // If component definition changed, replace and mark as changed.\n\n      if (!_lodash.default.isEqual(this.component, newComponent)) {\n        this.component = newComponent;\n        changed = true;\n        var disabled = this.shouldDisabled; // Change disabled state if it has changed\n\n        if (this.disabled !== disabled) {\n          this.disabled = disabled;\n        }\n      }\n      return changed;\n    }\n  }, {\n    key: \"isIE\",\n    value: function isIE() {\n      if (typeof window === 'undefined') {\n        return false;\n      }\n      var userAgent = window.navigator.userAgent;\n      var msie = userAgent.indexOf('MSIE ');\n      if (msie > 0) {\n        // IE 10 or older => return version number\n        return parseInt(userAgent.substring(msie + 5, userAgent.indexOf('.', msie)), 10);\n      }\n      var trident = userAgent.indexOf('Trident/');\n      if (trident > 0) {\n        // IE 11 => return version number\n        var rv = userAgent.indexOf('rv:');\n        return parseInt(userAgent.substring(rv + 3, userAgent.indexOf('.', rv)), 10);\n      }\n      var edge = userAgent.indexOf('Edge/');\n      if (edge > 0) {\n        // IE 12 (aka Edge) => return version number\n        return parseInt(userAgent.substring(edge + 5, userAgent.indexOf('.', edge)), 10);\n      } // other browser\n\n      return false;\n    }\n  }, {\n    key: \"defineActionValue\",\n    value: function defineActionValue(action, argsObject) {\n      return this.evaluate(action.value, argsObject, 'value');\n    }\n  }, {\n    key: \"applyActions\",\n    value: function applyActions(newComponent, actions, result, row, data) {\n      var _this12 = this;\n      data = data || this.rootValue;\n      row = row || this.data;\n      return actions.reduce(function (changed, action) {\n        switch (action.type) {\n          case 'property':\n            {\n              FormioUtils.setActionProperty(newComponent, action, result, row, data, _this12);\n              var property = action.property.value;\n              if (!_lodash.default.isEqual(_lodash.default.get(_this12.component, property), _lodash.default.get(newComponent, property))) {\n                changed = true;\n              }\n              break;\n            }\n          case 'value':\n            {\n              var oldValue = _this12.getValue();\n              var newValue = _this12.defineActionValue(action, {\n                value: _lodash.default.clone(oldValue),\n                data: data,\n                row: row,\n                component: newComponent,\n                result: result\n              });\n              if (!_lodash.default.isEqual(oldValue, newValue)) {\n                _this12.setValue(newValue);\n                if (_this12.viewOnly) {\n                  _this12.dataValue = newValue;\n                }\n                changed = true;\n              }\n              break;\n            }\n          case 'mergeComponentSchema':\n            {\n              var schema = _this12.evaluate(action.schemaDefinition, {\n                value: _lodash.default.clone(_this12.getValue()),\n                data: data,\n                row: row,\n                component: newComponent,\n                result: result\n              }, 'schema');\n              _lodash.default.assign(newComponent, schema);\n              if (!_lodash.default.isEqual(_this12.component, newComponent)) {\n                changed = true;\n              }\n              break;\n            }\n          case 'customAction':\n            {\n              var _oldValue = _this12.getValue();\n              var _newValue = _this12.evaluate(action.customAction, {\n                value: _lodash.default.clone(_oldValue),\n                data: data,\n                row: row,\n                input: _oldValue,\n                component: newComponent,\n                result: result\n              }, 'value');\n              if (!_lodash.default.isEqual(_oldValue, _newValue)) {\n                _this12.setValue(_newValue);\n                if (_this12.viewOnly) {\n                  _this12.dataValue = _newValue;\n                }\n                changed = true;\n              }\n              break;\n            }\n        }\n        return changed;\n      }, false);\n    } // Deprecated\n  }, {\n    key: \"addInputError\",\n    value: function addInputError(message, dirty, elements) {\n      this.addMessages(message);\n      this.setErrorClasses(elements, dirty, !!message);\n    } // Deprecated\n  }, {\n    key: \"removeInputError\",\n    value: function removeInputError(elements) {\n      this.setErrorClasses(elements, true, false);\n    }\n    /**\n     * Add a new input error to this element.\n     *\n     * @param message\n     * @param dirty\n     */\n  }, {\n    key: \"addMessages\",\n    value: function addMessages(messages) {\n      var _this13 = this;\n      if (!messages) {\n        return;\n      } // Standardize on array of objects for message.\n\n      if (typeof messages === 'string') {\n        messages = {\n          messages: messages,\n          level: 'error'\n        };\n      }\n      if (!Array.isArray(messages)) {\n        messages = [messages];\n      }\n      messages = _lodash.default.uniqBy(messages, function (message) {\n        return message.message;\n      });\n      if (this.refs.messageContainer) {\n        this.setContent(this.refs.messageContainer, messages.map(function (message) {\n          return _this13.renderTemplate('message', message);\n        }).join(''));\n      }\n    }\n  }, {\n    key: \"setErrorClasses\",\n    value: function setErrorClasses(elements, dirty, hasErrors, hasMessages) {\n      var _this14 = this;\n      var element = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.element;\n      this.clearErrorClasses();\n      elements.forEach(function (element) {\n        _this14.setElementInvalid(_this14.performInputMapping(element), false);\n      });\n      this.setInputWidgetErrorClasses(elements, hasErrors);\n      if (hasErrors) {\n        // Add error classes\n        elements.forEach(function (input) {\n          _this14.setElementInvalid(_this14.performInputMapping(input), true);\n        });\n        if (dirty && this.options.highlightErrors) {\n          this.addClass(element, this.options.componentErrorClass);\n        } else {\n          this.addClass(element, 'has-error');\n        }\n      }\n      if (hasMessages) {\n        this.addClass(element, 'has-message');\n      }\n    }\n  }, {\n    key: \"setElementInvalid\",\n    value: function setElementInvalid(element, invalid) {\n      if (!element) return;\n      if (invalid) {\n        this.addClass(element, 'is-invalid');\n      } else {\n        this.removeClass(element, 'is-invalid');\n      }\n      element.setAttribute('aria-invalid', invalid ? 'true' : 'false');\n    }\n  }, {\n    key: \"clearOnHide\",\n    value: function clearOnHide() {\n      // clearOnHide defaults to true for old forms (without the value set) so only trigger if the value is false.\n      if (\n      // if change happens inside EditGrid's row, it doesn't trigger change on the root level, so rootPristine will be true\n      (!this.rootPristine || this.options.server || (0, FormioUtils.isInsideScopingComponent)(this)) && this.component.clearOnHide !== false && !this.options.readOnly && !this.options.showHiddenFields) {\n        if (!this.visible) {\n          this.deleteValue();\n        } else if (!this.hasValue() && this.shouldAddDefaultValue) {\n          // If shown, ensure the default is set.\n          this.setValue(this.defaultValue, {\n            noUpdateEvent: true\n          });\n        }\n      }\n    }\n  }, {\n    key: \"triggerRootChange\",\n    value: function triggerRootChange() {\n      if (this.options.onChange) {\n        var _this$options2;\n        (_this$options2 = this.options).onChange.apply(_this$options2, arguments);\n      } else if (this.root) {\n        var _this$root4;\n        (_this$root4 = this.root).triggerChange.apply(_this$root4, arguments);\n      }\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(flags, fromRoot) {\n      flags = flags || {};\n      if (flags.modified) {\n        if (!flags.noPristineChangeOnModified) {\n          this.pristine = false;\n        }\n        this.addClass(this.getElement(), 'formio-modified');\n      } // If we are supposed to validate on blur, then don't trigger validation yet.\n\n      if (this.component.validateOn === 'blur' && !this.errors.length) {\n        flags.noValidate = true;\n      }\n      if (this.component.onChange) {\n        this.evaluate(this.component.onChange, {\n          flags: flags\n        });\n      } // Set the changed variable.\n\n      var changed = {\n        instance: this,\n        component: this.component,\n        value: this.dataValue,\n        flags: flags\n      }; // Emit the change.\n\n      this.emit('componentChange', changed); // Do not propogate the modified flag.\n\n      var modified = false;\n      if (flags.modified) {\n        modified = true;\n        delete flags.modified;\n      } // Bubble this change up to the top.\n\n      if (!fromRoot) {\n        this.triggerRootChange(flags, changed, modified);\n      }\n      return changed;\n    }\n  }, {\n    key: \"wysiwygDefault\",\n    get: function get() {\n      return {\n        quill: {\n          theme: 'snow',\n          placeholder: this.t(this.component.placeholder, {\n            _userInput: true\n          }),\n          modules: {\n            toolbar: [[{\n              'size': ['small', false, 'large', 'huge']\n            }],\n            // custom dropdown\n            [{\n              'header': [1, 2, 3, 4, 5, 6, false]\n            }], [{\n              'font': []\n            }], ['bold', 'italic', 'underline', 'strike', {\n              'script': 'sub'\n            }, {\n              'script': 'super'\n            }, 'clean'], [{\n              'color': []\n            }, {\n              'background': []\n            }], [{\n              'list': 'ordered'\n            }, {\n              'list': 'bullet'\n            }, {\n              'indent': '-1'\n            }, {\n              'indent': '+1'\n            }, {\n              'align': []\n            }], ['blockquote', 'code-block'], ['link', 'image', 'video', 'formula', 'source']]\n          }\n        },\n        ace: {\n          theme: 'ace/theme/xcode',\n          maxLines: 12,\n          minLines: 12,\n          tabSize: 2,\n          mode: 'ace/mode/javascript',\n          placeholder: this.t(this.component.placeholder, {\n            _userInput: true\n          })\n        },\n        ckeditor: {\n          image: {\n            toolbar: ['imageTextAlternative', '|', 'imageStyle:full', 'imageStyle:alignLeft', 'imageStyle:alignCenter', 'imageStyle:alignRight'],\n            styles: ['full', 'alignLeft', 'alignCenter', 'alignRight']\n          },\n          extraPlugins: []\n        },\n        default: {}\n      };\n    }\n  }, {\n    key: \"addCKE\",\n    value: function addCKE(element, settings, onChange) {\n      settings = _lodash.default.isEmpty(settings) ? {} : settings;\n      settings.base64Upload = this.component.isUploadEnabled ? false : true;\n      settings.mediaEmbed = {\n        previewsInData: true\n      };\n      settings = _lodash.default.merge(this.wysiwygDefault.ckeditor, _lodash.default.get(this.options, 'editors.ckeditor.settings', {}), settings);\n      if (this.component.isUploadEnabled) {\n        settings.extraPlugins.push((0, _uploadAdapter.getFormioUploadAdapterPlugin)(this.fileService, this));\n      }\n      return _Formio.GlobalFormio.requireLibrary('ckeditor', isIEBrowser ? 'CKEDITOR' : 'ClassicEditor', _lodash.default.get(this.options, 'editors.ckeditor.src', \"\".concat(_Formio.GlobalFormio.cdn.ckeditor, \"/ckeditor.js\")), true).then(function () {\n        if (!element.parentNode) {\n          return _nativePromiseOnly.default.reject();\n        }\n        if (isIEBrowser) {\n          var editor = CKEDITOR.replace(element);\n          editor.on('change', function () {\n            return onChange(editor.getData());\n          });\n          return _nativePromiseOnly.default.resolve(editor);\n        } else {\n          return ClassicEditor.create(element, settings).then(function (editor) {\n            editor.model.document.on('change', function () {\n              return onChange(editor.data.get());\n            });\n            return editor;\n          });\n        }\n      });\n    }\n  }, {\n    key: \"addQuill\",\n    value: function addQuill(element, settings, onChange) {\n      var _this15 = this;\n      settings = _lodash.default.isEmpty(settings) ? this.wysiwygDefault.quill : settings;\n      settings = _lodash.default.merge(this.wysiwygDefault.quill, _lodash.default.get(this.options, 'editors.quill.settings', {}), settings);\n      settings = _objectSpread(_objectSpread({}, settings), {}, {\n        modules: _objectSpread({\n          table: true\n        }, settings.modules)\n      }); // Lazy load the quill css.\n\n      _Formio.GlobalFormio.requireLibrary(\"quill-css-\".concat(settings.theme), 'Quill', [{\n        type: 'styles',\n        src: \"\".concat(_Formio.GlobalFormio.cdn.quill, \"/quill.\").concat(settings.theme, \".css\")\n      }], true); // Lazy load the quill library.\n\n      return _Formio.GlobalFormio.requireLibrary('quill', 'Quill', _lodash.default.get(this.options, 'editors.quill.src', \"\".concat(_Formio.GlobalFormio.cdn.quill, \"/quill.min.js\")), true).then(function () {\n        return _Formio.GlobalFormio.requireLibrary('quill-table', 'Quill', \"\".concat(_Formio.GlobalFormio.cdn.baseUrl, \"/quill/quill-table.js\"), true).then(function () {\n          if (!element.parentNode) {\n            return _nativePromiseOnly.default.reject();\n          }\n          _this15.quill = new Quill(element, isIEBrowser ? _objectSpread(_objectSpread({}, settings), {}, {\n            modules: {}\n          }) : settings);\n          /** This block of code adds the [source] capabilities.  See https://codepen.io/anon/pen/ZyEjrQ **/\n\n          var txtArea = document.createElement('textarea');\n          txtArea.setAttribute('class', 'quill-source-code');\n          _this15.quill.addContainer('ql-custom').appendChild(txtArea);\n          var qlSource = element.parentNode.querySelector('.ql-source');\n          if (qlSource) {\n            _this15.addEventListener(qlSource, 'click', function (event) {\n              event.preventDefault();\n              if (txtArea.style.display === 'inherit') {\n                _this15.quill.setContents(_this15.quill.clipboard.convert({\n                  html: txtArea.value\n                }));\n              }\n              txtArea.style.display = txtArea.style.display === 'none' ? 'inherit' : 'none';\n            });\n          }\n          /** END CODEBLOCK **/\n          // Make sure to select cursor when they click on the element.\n\n          _this15.addEventListener(element, 'click', function () {\n            return _this15.quill.focus();\n          }); // Allows users to skip toolbar items when tabbing though form\n\n          var elm = document.querySelectorAll('.ql-formats > button');\n          for (var i = 0; i < elm.length; i++) {\n            elm[i].setAttribute('tabindex', '-1');\n          }\n          _this15.quill.on('text-change', function () {\n            txtArea.value = _this15.quill.root.innerHTML;\n            onChange(txtArea);\n          });\n          return _this15.quill;\n        });\n      });\n    }\n  }, {\n    key: \"shouldSanitizeValue\",\n    get: function get() {\n      var _this$options3;\n\n      // Sanitize value if sanitizing for thw whole content is turned off\n      return ((_this$options3 = this.options) === null || _this$options3 === void 0 ? void 0 : _this$options3.sanitize) !== false;\n    }\n  }, {\n    key: \"addAce\",\n    value: function addAce(element, settings, onChange) {\n      if (!settings || settings.theme === 'snow') {\n        var mode = settings ? settings.mode : '';\n        settings = {};\n        if (mode) {\n          settings.mode = mode;\n        }\n      }\n      settings = _lodash.default.merge(this.wysiwygDefault.ace, _lodash.default.get(this.options, 'editors.ace.settings', {}), settings || {});\n      return _Formio.GlobalFormio.requireLibrary('ace', 'ace', _lodash.default.get(this.options, 'editors.ace.src', \"\".concat(_Formio.GlobalFormio.cdn.ace, \"/ace.js\")), true).then(function (editor) {\n        editor = editor.edit(element);\n        editor.removeAllListeners('change');\n        editor.setOptions(settings);\n        editor.getSession().setMode(settings.mode);\n        editor.on('change', function () {\n          return onChange(editor.getValue());\n        });\n        if (settings.isUseWorkerDisabled) {\n          editor.session.setUseWorker(false);\n        }\n        return editor;\n      });\n    }\n  }, {\n    key: \"tree\",\n    get: function get() {\n      return this.component.tree || false;\n    }\n    /**\n     * The empty value for this component.\n     *\n     * @return {null}\n     */\n  }, {\n    key: \"emptyValue\",\n    get: function get() {\n      return null;\n    }\n    /**\n     * Returns if this component has a value set.\n     *\n     */\n  }, {\n    key: \"hasValue\",\n    value: function hasValue(data) {\n      return _lodash.default.has(data || this.data, this.key);\n    }\n    /**\n     * Get the data value at the root level.\n     *\n     * @return {*}\n     */\n  }, {\n    key: \"rootValue\",\n    get: function get() {\n      return this.root ? this.root.data : this.data;\n    }\n  }, {\n    key: \"rootPristine\",\n    get: function get() {\n      return _lodash.default.get(this, 'root.pristine', false);\n    }\n    /**\n     * Get the static value of this component.\n     * @return {*}\n     */\n  }, {\n    key: \"dataValue\",\n    get: function get() {\n      if (!this.key || !this.visible && this.component.clearOnHide && !this.rootPristine) {\n        return this.emptyValue;\n      }\n      if (!this.hasValue() && this.shouldAddDefaultValue) {\n        var empty = this.component.multiple ? [] : this.emptyValue;\n        if (!this.rootPristine) {\n          this.dataValue = empty;\n        }\n        return empty;\n      }\n      return _lodash.default.get(this._data, this.key);\n    }\n    /**\n     * Sets the static value of this component.\n     *\n     * @param value\n     */,\n\n    set: function set(value) {\n      if (!this.allowData || !this.key || !this.visible && this.component.clearOnHide && !this.rootPristine) {\n        return;\n      }\n      if (value !== null && value !== undefined) {\n        value = this.hook('setDataValue', value, this.key, this._data);\n      }\n      if (value === null || value === undefined) {\n        this.unset();\n        return;\n      }\n      _lodash.default.set(this._data, this.key, value);\n      return;\n    }\n    /**\n     * Splice a value from the dataValue.\n     *\n     * @param index\n     */\n  }, {\n    key: \"splice\",\n    value: function splice(index) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (this.hasValue()) {\n        var dataValue = this.dataValue || [];\n        if (_lodash.default.isArray(dataValue) && dataValue.hasOwnProperty(index)) {\n          dataValue.splice(index, 1);\n          this.dataValue = dataValue;\n          this.triggerChange(flags);\n        }\n      }\n    }\n  }, {\n    key: \"unset\",\n    value: function unset() {\n      _lodash.default.unset(this._data, this.key);\n    }\n    /**\n     * Deletes the value of the component.\n     */\n  }, {\n    key: \"deleteValue\",\n    value: function deleteValue() {\n      this.setValue(null, {\n        noUpdateEvent: true,\n        noDefault: true\n      });\n      this.unset();\n    }\n  }, {\n    key: \"getCustomDefaultValue\",\n    value: function getCustomDefaultValue(defaultValue) {\n      if (this.component.customDefaultValue && !this.options.preview) {\n        defaultValue = this.evaluate(this.component.customDefaultValue, {\n          value: ''\n        }, 'value');\n      }\n      return defaultValue;\n    }\n  }, {\n    key: \"shouldAddDefaultValue\",\n    get: function get() {\n      return !this.options.noDefaults || this.component.defaultValue && !this.isEmpty(this.component.defaultValue) || this.component.customDefaultValue;\n    }\n  }, {\n    key: \"defaultValue\",\n    get: function get() {\n      var _this16 = this;\n      var defaultValue = this.emptyValue;\n      if (this.component.defaultValue) {\n        defaultValue = this.component.defaultValue;\n      }\n      defaultValue = this.getCustomDefaultValue(defaultValue);\n      var checkMask = function checkMask(value) {\n        if (typeof value === 'string') {\n          var placeholderChar = _this16.placeholderChar;\n          value = (0, _vanillaTextMask.conformToMask)(value, _this16.defaultMask, {\n            placeholderChar: placeholderChar\n          }).conformedValue;\n          if (!FormioUtils.matchInputMask(value, _this16.defaultMask)) {\n            value = '';\n          }\n        } else {\n          value = '';\n        }\n        return value;\n      };\n      if (this.defaultMask) {\n        if (Array.isArray(defaultValue)) {\n          defaultValue = defaultValue.map(checkMask);\n        } else {\n          defaultValue = checkMask(defaultValue);\n        }\n      } // Clone so that it creates a new instance.\n\n      return _lodash.default.cloneDeep(defaultValue);\n    }\n    /**\n     * Get the input value of this component.\n     *\n     * @return {*}\n     */\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      if (!this.hasInput || this.viewOnly || !this.refs.input || !this.refs.input.length) {\n        return this.dataValue;\n      }\n      var values = [];\n      for (var i in this.refs.input) {\n        if (this.refs.input.hasOwnProperty(i)) {\n          if (!this.component.multiple) {\n            return this.getValueAt(i);\n          }\n          values.push(this.getValueAt(i));\n        }\n      }\n      if (values.length === 0 && !this.component.multiple) {\n        return '';\n      }\n      return values;\n    }\n    /**\n     * Get the value at a specific index.\n     *\n     * @param index\n     * @returns {*}\n     */\n  }, {\n    key: \"getValueAt\",\n    value: function getValueAt(index) {\n      var input = this.performInputMapping(this.refs.input[index]);\n      return input ? input.value : undefined;\n    }\n    /**\n     * Set the value of this component.\n     *\n     * @param value\n     * @param flags\n     *\n     * @return {boolean} - If the value changed.\n     */\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var changed = this.updateValue(value, flags);\n      value = this.dataValue;\n      if (!this.hasInput) {\n        return changed;\n      }\n      var isArray = Array.isArray(value);\n      var valueInput = this.refs.fileLink || this.refs.input;\n      if (isArray && Array.isArray(this.defaultValue) && this.refs.hasOwnProperty('input') && valueInput && valueInput.length !== value.length && this.visible) {\n        this.redraw();\n      }\n      if (this.isHtmlRenderMode() && flags && flags.fromSubmission && changed) {\n        this.redraw();\n        return changed;\n      }\n      for (var i in this.refs.input) {\n        if (this.refs.input.hasOwnProperty(i)) {\n          this.setValueAt(i, isArray ? value[i] : value, flags);\n        }\n      }\n      return changed;\n    }\n    /**\n     * Set the value at a specific index.\n     *\n     * @param index\n     * @param value\n     */\n  }, {\n    key: \"setValueAt\",\n    value: function setValueAt(index, value) {\n      var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (!flags.noDefault && (value === null || value === undefined) && !this.component.multiple) {\n        value = this.defaultValue;\n      }\n      var input = this.performInputMapping(this.refs.input[index]);\n      var valueMaskInput = this.refs.valueMaskInput;\n      if (valueMaskInput !== null && valueMaskInput !== void 0 && valueMaskInput.mask) {\n        valueMaskInput.mask.textMaskInputElement.update(value);\n      }\n      if (input.mask) {\n        input.mask.textMaskInputElement.update(value);\n      } else if (input.widget && input.widget.setValue) {\n        input.widget.setValue(value);\n      } else {\n        input.value = value;\n      }\n    }\n  }, {\n    key: \"hasSetValue\",\n    get: function get() {\n      return this.hasValue() && !this.isEmpty(this.dataValue);\n    }\n  }, {\n    key: \"setDefaultValue\",\n    value: function setDefaultValue() {\n      if (this.defaultValue && this.shouldAddDefaultValue) {\n        var defaultValue = this.component.multiple && !this.dataValue.length ? [] : this.defaultValue;\n        this.setValue(defaultValue, {\n          noUpdateEvent: true\n        });\n      }\n    }\n    /**\n     * Restore the value of a control.\n     */\n  }, {\n    key: \"restoreValue\",\n    value: function restoreValue() {\n      if (this.hasSetValue) {\n        this.setValue(this.dataValue, {\n          noUpdateEvent: true\n        });\n      } else {\n        this.setDefaultValue();\n      }\n    }\n    /**\n     * Normalize values coming into updateValue.\n     *\n     * @param value\n     * @return {*}\n     */\n  }, {\n    key: \"normalizeValue\",\n    value: function normalizeValue(value) {\n      if (this.component.multiple && !Array.isArray(value)) {\n        value = value ? [value] : [];\n      }\n      return value;\n    }\n    /**\n     * Update a value of this component.\n     *\n     * @param flags\n     */\n  }, {\n    key: \"updateComponentValue\",\n    value: function updateComponentValue(value) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var newValue = !flags.resetValue && (value === undefined || value === null) ? this.getValue() : value;\n      newValue = this.normalizeValue(newValue, flags);\n      var oldValue = this.dataValue;\n      var changed = newValue !== undefined ? this.hasChanged(newValue, oldValue) : false;\n      if (changed) {\n        this.dataValue = newValue;\n        changed = this.dataValue !== oldValue;\n        this.updateOnChange(flags, changed);\n      }\n      if (this.componentModal && flags && flags.fromSubmission) {\n        this.componentModal.setValue(value);\n      }\n      return changed;\n    }\n    /**\n     * Updates the value of this component plus all sub-components.\n     *\n     * @param args\n     * @return {boolean}\n     */\n  }, {\n    key: \"updateValue\",\n    value: function updateValue() {\n      return this.updateComponentValue.apply(this, arguments);\n    }\n  }, {\n    key: \"getIcon\",\n    value: function getIcon(name, content, styles) {\n      var ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'icon';\n      return this.renderTemplate('icon', {\n        className: this.iconClass(name),\n        ref: ref,\n        styles: styles,\n        content: content\n      });\n    }\n    /**\n     * Resets the value of this component.\n     */\n  }, {\n    key: \"resetValue\",\n    value: function resetValue() {\n      this.unset();\n      this.setValue(this.emptyValue, {\n        noUpdateEvent: true,\n        noValidate: true,\n        resetValue: true\n      });\n    }\n    /**\n     * Determine if the value of this component has changed.\n     *\n     * @param newValue\n     * @param oldValue\n     * @return {boolean}\n     */\n  }, {\n    key: \"hasChanged\",\n    value: function hasChanged(newValue, oldValue) {\n      if ((newValue === undefined || newValue === null) && (oldValue === undefined || oldValue === null || this.isEmpty(oldValue))) {\n        return false;\n      } // If we do not have a value and are getting set to anything other than undefined or null, then we changed.\n\n      if (newValue !== undefined && newValue !== null && this.allowData && !this.hasValue()) {\n        return true;\n      }\n      return !_lodash.default.isEqual(newValue, oldValue);\n    }\n    /**\n     * Update the value on change.\n     *\n     * @param flags\n     */\n  }, {\n    key: \"updateOnChange\",\n    value: function updateOnChange() {\n      var flags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var changed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!flags.noUpdateEvent && changed) {\n        this.triggerChange(flags);\n        return true;\n      }\n      return false;\n    }\n    /**\n     * Perform a calculated value operation.\n     *\n     * @param data - The global data object.\n     *\n     * @return {boolean} - If the value changed during calculation.\n     */\n  }, {\n    key: \"convertNumberOrBoolToString\",\n    value: function convertNumberOrBoolToString(value) {\n      if (typeof value === 'number' || typeof value === 'boolean') {\n        return value.toString();\n      }\n      return value;\n    }\n  }, {\n    key: \"doValueCalculation\",\n    value: function doValueCalculation(dataValue, data, row) {\n      return this.evaluate(this.component.calculateValue, {\n        value: dataValue,\n        data: data,\n        row: row || this.data\n      }, 'value');\n    }\n    /* eslint-disable max-statements */\n  }, {\n    key: \"calculateComponentValue\",\n    value: function calculateComponentValue(data, flags, row) {\n      // If no calculated value or\n      // hidden and set to clearOnHide (Don't calculate a value for a hidden field set to clear when hidden)\n      var clearOnHide = this.component.clearOnHide;\n      var shouldBeCleared = !this.visible && clearOnHide;\n      var allowOverride = _lodash.default.get(this.component, 'allowCalculateOverride', false); // Handle all cases when calculated values should not fire.\n\n      if (this.options.readOnly && !this.options.pdf || !(this.component.calculateValue || this.component.calculateValueVariable) || shouldBeCleared || this.options.server && !this.component.calculateServer || flags.dataSourceInitialLoading && allowOverride) {\n        return false;\n      }\n      var dataValue = this.dataValue; // Calculate the new value.\n\n      var calculatedValue = this.doValueCalculation(dataValue, data, row, flags);\n      if (_lodash.default.isNil(calculatedValue)) {\n        calculatedValue = this.emptyValue;\n      }\n      var changed = !_lodash.default.isEqual(dataValue, calculatedValue); // Do not override calculations on server if they have calculateServer set.\n\n      if (allowOverride) {\n        // The value is considered locked if it is not empty and comes from a submission value.\n        var fromSubmission = flags.fromSubmission && this.component.persistent === true;\n        if (this.isEmpty(dataValue)) {\n          // Reset the calculation lock if ever the data is cleared.\n          this.calculationLocked = false;\n        } else if (this.calculationLocked || fromSubmission) {\n          this.calculationLocked = true;\n          return false;\n        }\n        var firstPass = this.calculatedValue === undefined;\n        if (firstPass) {\n          this.calculatedValue = null;\n        }\n        var newCalculatedValue = this.normalizeValue(this.convertNumberOrBoolToString(calculatedValue));\n        var previousCalculatedValue = this.normalizeValue(this.convertNumberOrBoolToString(this.calculatedValue));\n        var normalizedDataValue = this.normalizeValue(this.convertNumberOrBoolToString(dataValue));\n        var calculationChanged = !_lodash.default.isEqual(previousCalculatedValue, newCalculatedValue);\n        var previousChanged = !_lodash.default.isEqual(normalizedDataValue, previousCalculatedValue);\n        if (calculationChanged && previousChanged && !firstPass) {\n          return false;\n        } // Check to ensure that the calculated value is different than the previously calculated value.\n\n        if (previousCalculatedValue && previousChanged && !calculationChanged) {\n          return false;\n        }\n        if (flags.isReordered || !calculationChanged) {\n          return false;\n        }\n        if (fromSubmission) {\n          // If we set value from submission and it differs from calculated one, set the calculated value to prevent overriding dataValue in the next pass\n          this.calculatedValue = calculatedValue;\n          return false;\n        } // If this is the firstPass, and the dataValue is different than to the calculatedValue.\n\n        if (firstPass && !this.isEmpty(dataValue) && changed && calculationChanged) {\n          // Return that we have a change so it will perform another pass.\n          return true;\n        }\n      }\n      this.calculatedValue = calculatedValue;\n      if (changed) {\n        if (!flags.noPristineChangeOnModified) {\n          this.pristine = false;\n        }\n        flags.triggeredComponentId = this.id;\n        return this.setValue(calculatedValue, flags);\n      }\n      return false;\n    }\n    /* eslint-enable max-statements */\n\n    /**\n     * Performs calculations in this component plus any child components.\n     *\n     * @param args\n     * @return {boolean}\n     */\n  }, {\n    key: \"calculateValue\",\n    value: function calculateValue(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data;\n      return this.calculateComponentValue(data, flags, row);\n    }\n    /**\n     * Get this component's label text.\n     *\n     */\n  }, {\n    key: \"label\",\n    get: function get() {\n      return this.component.label;\n    }\n    /**\n     * Set this component's label text and render it.\n     *\n     * @param value - The new label text.\n     */,\n\n    set: function set(value) {\n      this.component.label = value;\n      if (this.labelElement) {\n        this.labelElement.innerText = value;\n      }\n    }\n    /**\n     * Get FormioForm element at the root of this component tree.\n     *\n     */\n  }, {\n    key: \"getRoot\",\n    value: function getRoot() {\n      return this.root;\n    }\n    /**\n     * Returns the invalid message, or empty string if the component is valid.\n     *\n     * @param data\n     * @param dirty\n     * @return {*}\n     */\n  }, {\n    key: \"invalidMessage\",\n    value: function invalidMessage(data, dirty, ignoreCondition, row) {\n      if (!ignoreCondition && !this.checkCondition(row, data)) {\n        return '';\n      } // See if this is forced invalid.\n\n      if (this.invalid) {\n        return this.invalid;\n      } // No need to check for errors if there is no input or if it is pristine.\n\n      if (!this.hasInput || !dirty && this.pristine) {\n        return '';\n      }\n      return _lodash.default.map(_Validator.default.checkComponent(this, data), 'message').join('\\n\\n');\n    }\n    /**\n     * Returns if the component is valid or not.\n     *\n     * @param data\n     * @param dirty\n     * @return {boolean}\n     */\n  }, {\n    key: \"isValid\",\n    value: function isValid(data, dirty) {\n      return !this.invalidMessage(data, dirty);\n    }\n  }, {\n    key: \"setComponentValidity\",\n    value: function setComponentValidity(messages, dirty, silentCheck) {\n      var hasErrors = !!messages.filter(function (message) {\n        return message.level === 'error' && !message.fromServer;\n      }).length;\n      if (messages.length && (!silentCheck || this.error) && (!this.isEmpty(this.defaultValue) || dirty || !this.pristine)) {\n        this.setCustomValidity(messages, dirty);\n      } else if (!silentCheck) {\n        this.setCustomValidity('');\n      }\n      return !hasErrors;\n    }\n    /**\n     * Checks the validity of this component and sets the error message if it is invalid.\n     *\n     * @param data\n     * @param dirty\n     * @param row\n     * @return {boolean}\n     */\n  }, {\n    key: \"checkComponentValidity\",\n    value: function checkComponentValidity(data, dirty, row) {\n      var _this$serverErrors,\n        _this17 = this;\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      data = data || this.rootValue;\n      row = row || this.data;\n      var _options$async = options.async,\n        async = _options$async === void 0 ? false : _options$async,\n        _options$silentCheck = options.silentCheck,\n        silentCheck = _options$silentCheck === void 0 ? false : _options$silentCheck;\n      if (this.shouldSkipValidation(data, dirty, row)) {\n        this.setCustomValidity('');\n        return async ? _nativePromiseOnly.default.resolve(true) : true;\n      }\n      var check = _Validator.default.checkComponent(this, data, row, true, async);\n      var validations = check;\n      if ((_this$serverErrors = this.serverErrors) !== null && _this$serverErrors !== void 0 && _this$serverErrors.length) {\n        validations = check.concat(this.serverErrors);\n      }\n      return async ? validations.then(function (messages) {\n        return _this17.setComponentValidity(messages, dirty, silentCheck);\n      }) : this.setComponentValidity(validations, dirty, silentCheck);\n    }\n  }, {\n    key: \"checkValidity\",\n    value: function checkValidity(data, dirty, row, silentCheck) {\n      data = data || this.rootValue;\n      row = row || this.data;\n      var isValid = this.checkComponentValidity(data, dirty, row, {\n        silentCheck: silentCheck\n      });\n      this.checkModal();\n      return isValid;\n    }\n  }, {\n    key: \"checkAsyncValidity\",\n    value: function checkAsyncValidity(data, dirty, row, silentCheck) {\n      return _nativePromiseOnly.default.resolve(this.checkComponentValidity(data, dirty, row, {\n        async: true,\n        silentCheck: silentCheck\n      }));\n    }\n    /**\n     * Check the conditions, calculations, and validity of a single component and triggers an update if\n     * something changed.\n     *\n     * @param data - The root data of the change event.\n     * @param flags - The flags from this change event.\n     *\n     * @return boolean - If component is valid or not.\n     */\n  }, {\n    key: \"checkData\",\n    value: function checkData(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data; // Needs for Nextgen Rules Engine\n\n      this.resetCaches(); // Do not trigger refresh if change was triggered on blur event since components with Refresh on Blur have their own listeners\n\n      if (!flags.fromBlur) {\n        this.checkRefreshOn(flags.changes, flags);\n      }\n      if (flags.noCheck) {\n        return true;\n      }\n      this.checkComponentConditions(data, flags, row);\n      if (this.id !== flags.triggeredComponentId) {\n        this.calculateComponentValue(data, flags, row);\n      }\n      if (flags.noValidate && !flags.validateOnInit && !flags.fromIframe) {\n        if (flags.fromSubmission && this.rootPristine && this.pristine && this.error && flags.changed) {\n          this.checkComponentValidity(data, !!this.options.alwaysDirty, row, true);\n        }\n        return true;\n      }\n      var isDirty = false; // We need to set dirty if they explicitly set noValidate to false.\n\n      if (this.options.alwaysDirty || flags.dirty) {\n        isDirty = true;\n      } // See if they explicitely set the values with setSubmission.\n\n      if (flags.fromSubmission && this.hasValue(data)) {\n        isDirty = true;\n      }\n      this.setDirty(isDirty);\n      if (this.component.validateOn === 'blur' && flags.fromSubmission) {\n        return true;\n      }\n      var isValid = this.checkComponentValidity(data, isDirty, row, flags);\n      this.checkModal();\n      return isValid;\n    }\n  }, {\n    key: \"checkModal\",\n    value: function checkModal() {\n      var isValid = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var dirty = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!this.component.modalEdit || !this.componentModal) {\n        return;\n      }\n      if (dirty && !isValid) {\n        this.setErrorClasses([this.refs.openModal], dirty, !isValid, !!this.errors.length, this.refs.openModalWrapper);\n      } else {\n        this.clearErrorClasses(this.refs.openModalWrapper);\n      }\n    }\n  }, {\n    key: \"validationValue\",\n    get: function get() {\n      return this.dataValue;\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.dataValue;\n      var isEmptyArray = _lodash.default.isArray(value) && value.length === 1 ? _lodash.default.isEqual(value[0], this.emptyValue) : false;\n      return value == null || value.length === 0 || _lodash.default.isEqual(value, this.emptyValue) || isEmptyArray;\n    }\n  }, {\n    key: \"isEqual\",\n    value: function isEqual(valueA) {\n      var valueB = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.dataValue;\n      return this.isEmpty(valueA) && this.isEmpty(valueB) || _lodash.default.isEqual(valueA, valueB);\n    }\n    /**\n     * Check if a component is eligible for multiple validation\n     *\n     * @return {boolean}\n     */\n  }, {\n    key: \"validateMultiple\",\n    value: function validateMultiple() {\n      return true;\n    }\n  }, {\n    key: \"errors\",\n    get: function get() {\n      return this.error ? [this.error] : [];\n    }\n  }, {\n    key: \"clearErrorClasses\",\n    value: function clearErrorClasses() {\n      var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.element;\n      this.removeClass(element, this.options.componentErrorClass);\n      this.removeClass(element, 'alert alert-danger');\n      this.removeClass(element, 'has-error');\n      this.removeClass(element, 'has-message');\n    }\n  }, {\n    key: \"setInputWidgetErrorClasses\",\n    value: function setInputWidgetErrorClasses(inputRefs, hasErrors) {\n      if (!this.isInputComponent || !this.component.widget || !(inputRefs !== null && inputRefs !== void 0 && inputRefs.length)) {\n        return;\n      }\n      inputRefs.forEach(function (input) {\n        if (input !== null && input !== void 0 && input.widget && input.widget.setErrorClasses) {\n          input.widget.setErrorClasses(hasErrors);\n        }\n      });\n    }\n  }, {\n    key: \"setCustomValidity\",\n    value: function setCustomValidity(messages, dirty, external) {\n      var _this18 = this;\n      var inputRefs = this.isInputComponent ? this.refs.input || [] : null;\n      if (typeof messages === 'string' && messages) {\n        messages = {\n          level: 'error',\n          message: messages\n        };\n      }\n      if (!Array.isArray(messages)) {\n        if (messages) {\n          messages = [messages];\n        } else {\n          messages = [];\n        }\n      }\n      var hasErrors = !!messages.filter(function (message) {\n        return message.level === 'error';\n      }).length;\n      var invalidInputRefs = inputRefs;\n      if (this.component.multiple) {\n        var inputRefsArray = Array.from(inputRefs);\n        inputRefsArray.forEach(function (input) {\n          _this18.setElementInvalid(_this18.performInputMapping(input), false);\n        });\n        this.setInputWidgetErrorClasses(inputRefsArray, false);\n        invalidInputRefs = inputRefsArray.filter(function (ref) {\n          var _messages$some, _messages;\n          return (_messages$some = (_messages = messages).some) === null || _messages$some === void 0 ? void 0 : _messages$some.call(_messages, function (msg) {\n            var _msg$context;\n            return (msg === null || msg === void 0 ? void 0 : (_msg$context = msg.context) === null || _msg$context === void 0 ? void 0 : _msg$context.input) === ref;\n          });\n        });\n      }\n      if (messages.length) {\n        if (this.refs.messageContainer) {\n          this.empty(this.refs.messageContainer);\n        }\n        this.error = {\n          component: this.component,\n          message: messages[0].message,\n          messages: messages,\n          external: !!external\n        };\n        this.emit('componentError', this.error);\n        this.addMessages(messages, dirty, invalidInputRefs);\n        if (invalidInputRefs) {\n          this.setErrorClasses(invalidInputRefs, dirty, hasErrors, !!messages.length);\n        }\n      } else if (!this.error || this.error && this.error.external === !!external) {\n        if (this.refs.messageContainer) {\n          this.empty(this.refs.messageContainer);\n        }\n        if (this.refs.modalMessageContainer) {\n          this.empty(this.refs.modalMessageContainer);\n        }\n        this.error = null;\n        if (invalidInputRefs) {\n          this.setErrorClasses(invalidInputRefs, dirty, hasErrors, !!messages.length);\n        }\n        this.clearErrorClasses();\n      } // if (!this.refs.input) {\n      //   return;\n      // }\n      // this.refs.input.forEach(input => {\n      //   input = this.performInputMapping(input);\n      //   if (typeof input.setCustomValidity === 'function') {\n      //     input.setCustomValidity(message, dirty);\n      //   }\n      // });\n    }\n    /**\n     * Determines if the value of this component is hidden from the user as if it is coming from the server, but is\n     * protected.\n     *\n     * @return {boolean|*}\n     */\n  }, {\n    key: \"isValueHidden\",\n    value: function isValueHidden() {\n      if (this.component.protected && this.root.editing) {\n        return false;\n      }\n      if (!this.root || !this.root.hasOwnProperty('editing')) {\n        return false;\n      }\n      if (!this.root || !this.root.editing) {\n        return false;\n      }\n      return this.component.protected || !this.component.persistent || this.component.persistent === 'client-only';\n    }\n  }, {\n    key: \"shouldSkipValidation\",\n    value: function shouldSkipValidation(data, dirty, row) {\n      var _this19 = this;\n      var rules = [\n      // Force valid if component is read-only\n      function () {\n        return _this19.options.readOnly;\n      },\n      // Do not check validations if component is not an input component.\n      function () {\n        return !_this19.hasInput;\n      },\n      // Check to see if we are editing and if so, check component persistence.\n      function () {\n        return _this19.isValueHidden();\n      },\n      // Force valid if component is hidden.\n      function () {\n        return !_this19.visible;\n      },\n      // Force valid if component is conditionally hidden.\n      function () {\n        return !_this19.checkCondition(row, data);\n      }];\n      return rules.some(function (pred) {\n        return pred();\n      });\n    } // Maintain reverse compatibility.\n  }, {\n    key: \"whenReady\",\n    value: function whenReady() {\n      console.warn('The whenReady() method has been deprecated. Please use the dataReady property instead.');\n      return this.dataReady;\n    }\n  }, {\n    key: \"dataReady\",\n    get: function get() {\n      return _nativePromiseOnly.default.resolve();\n    }\n    /**\n     * Prints out the value of this component as a string value.\n     */\n  }, {\n    key: \"asString\",\n    value: function asString(value) {\n      value = value || this.getValue();\n      return (Array.isArray(value) ? value : [value]).map(_lodash.default.toString).join(', ');\n    }\n    /**\n     * Return if the component is disabled.\n     * @return {boolean}\n     */\n  }, {\n    key: \"disabled\",\n    get: function get() {\n      return this._disabled || this.parentDisabled;\n    }\n    /**\n     * Disable this component.\n     *\n     * @param {boolean} disabled\n     */,\n\n    set: function set(disabled) {\n      this._disabled = disabled;\n    }\n  }, {\n    key: \"setDisabled\",\n    value: function setDisabled(element, disabled) {\n      if (!element) {\n        return;\n      }\n      element.disabled = disabled;\n      if (disabled) {\n        element.setAttribute('disabled', 'disabled');\n      } else {\n        element.removeAttribute('disabled');\n      }\n    }\n  }, {\n    key: \"setLoading\",\n    value: function setLoading(element, loading) {\n      if (!element || element.loading === loading) {\n        return;\n      }\n      element.loading = loading;\n      if (!element.loader && loading) {\n        element.loader = this.ce('i', {\n          class: \"\".concat(this.iconClass('refresh', true), \" button-icon-right\")\n        });\n      }\n      if (element.loader) {\n        if (loading) {\n          this.appendTo(element.loader, element);\n        } else {\n          this.removeChildFrom(element.loader, element);\n        }\n      }\n    }\n  }, {\n    key: \"selectOptions\",\n    value: function selectOptions(select, tag, options, defaultValue) {\n      var _this20 = this;\n      _lodash.default.each(options, function (option) {\n        var attrs = {\n          value: option.value\n        };\n        if (defaultValue !== undefined && option.value === defaultValue) {\n          attrs.selected = 'selected';\n        }\n        var optionElement = _this20.ce('option', attrs);\n        optionElement.appendChild(_this20.text(option.label));\n        select.appendChild(optionElement);\n      });\n    }\n  }, {\n    key: \"setSelectValue\",\n    value: function setSelectValue(select, value) {\n      var options = select.querySelectorAll('option');\n      _lodash.default.each(options, function (option) {\n        if (option.value === value) {\n          option.setAttribute('selected', 'selected');\n        } else {\n          option.removeAttribute('selected');\n        }\n      });\n      if (select.onchange) {\n        select.onchange();\n      }\n      if (select.onselect) {\n        select.onselect();\n      }\n    }\n  }, {\n    key: \"getRelativePath\",\n    value: function getRelativePath(path) {\n      var keyPart = \".\".concat(this.key);\n      var thisPath = this.isInputComponent ? this.path : this.path.slice(0).replace(keyPart, '');\n      return path.replace(thisPath, '');\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.detach();\n      this.empty(this.getElement());\n    }\n  }, {\n    key: \"append\",\n    value: function append(element) {\n      this.appendTo(element, this.element);\n    }\n  }, {\n    key: \"prepend\",\n    value: function prepend(element) {\n      this.prependTo(element, this.element);\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(element) {\n      this.removeChildFrom(element, this.element);\n    }\n  }, {\n    key: \"detachLogic\",\n    value: function detachLogic() {\n      var _this21 = this;\n      this.logic.forEach(function (logic) {\n        if (logic.trigger.type === 'event') {\n          var event = _this21.interpolate(logic.trigger.event);\n          _this21.off(event); // only applies to callbacks on this component\n        }\n      });\n    }\n  }, {\n    key: \"attachLogic\",\n    value: function attachLogic() {\n      var _this22 = this;\n\n      // Do not attach logic during builder mode.\n      if (this.builderMode) {\n        return;\n      }\n      this.logic.forEach(function (logic) {\n        if (logic.trigger.type === 'event') {\n          var event = _this22.interpolate(logic.trigger.event);\n          _this22.on(event, function () {\n            var newComponent = (0, FormioUtils.fastCloneDeep)(_this22.originalComponent);\n            for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n              args[_key4] = arguments[_key4];\n            }\n            if (_this22.applyActions(newComponent, logic.actions, args)) {\n              // If component definition changed, replace it.\n              if (!_lodash.default.isEqual(_this22.component, newComponent)) {\n                _this22.component = newComponent;\n                var visible = _this22.conditionallyVisible(null, null);\n                var disabled = _this22.shouldDisabled; // Change states which won't be recalculated during redrawing\n\n                if (_this22.visible !== visible) {\n                  _this22.visible = visible;\n                }\n                if (_this22.disabled !== disabled) {\n                  _this22.disabled = disabled;\n                }\n                _this22.redraw();\n              }\n            }\n          }, true);\n        }\n      });\n    }\n    /**\n     * Get the element information.\n     */\n  }, {\n    key: \"elementInfo\",\n    value: function elementInfo() {\n      var attributes = {\n        name: this.options.name,\n        type: this.component.inputType || 'text',\n        class: 'form-control',\n        lang: this.options.language\n      };\n      if (this.component.placeholder) {\n        attributes.placeholder = this.t(this.component.placeholder, {\n          _userInput: true\n        });\n      }\n      if (this.component.tabindex) {\n        attributes.tabindex = this.component.tabindex;\n      }\n      if (this.disabled) {\n        attributes.disabled = 'disabled';\n      }\n      _lodash.default.defaults(attributes, this.component.attributes);\n      return {\n        type: 'input',\n        component: this.component,\n        changeEvent: 'change',\n        attr: attributes\n      };\n    }\n  }, {\n    key: \"autofocus\",\n    value: function autofocus() {\n      var _this23 = this;\n      var hasAutofocus = this.component.autofocus && !this.builderMode && !this.options.preview;\n      if (hasAutofocus) {\n        this.on('render', function () {\n          return _this23.focus();\n        }, true);\n      }\n    }\n  }, {\n    key: \"scrollIntoView\",\n    value: function scrollIntoView() {\n      var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.element;\n      if (!element) {\n        return;\n      }\n      var _element$getBoundingC = element.getBoundingClientRect(),\n        left = _element$getBoundingC.left,\n        top = _element$getBoundingC.top;\n      window.scrollTo(left + window.scrollX, top + window.scrollY);\n    }\n  }, {\n    key: \"focus\",\n    value: function focus(index) {\n      var _this$refs$input2;\n      if ('beforeFocus' in this.parent) {\n        this.parent.beforeFocus(this);\n      }\n      if ((_this$refs$input2 = this.refs.input) !== null && _this$refs$input2 !== void 0 && _this$refs$input2.length) {\n        var _this$component$widge;\n        var focusingInput = typeof index === 'number' && this.refs.input[index] ? this.refs.input[index] : this.refs.input[this.refs.input.length - 1];\n        if (((_this$component$widge = this.component.widget) === null || _this$component$widge === void 0 ? void 0 : _this$component$widge.type) === 'calendar') {\n          var sibling = focusingInput.nextSibling;\n          if (sibling) {\n            sibling.focus();\n          }\n        } else {\n          focusingInput.focus();\n        }\n      }\n      if (this.refs.openModal) {\n        this.refs.openModal.focus();\n      }\n      if (this.parent.refs.openModal) {\n        this.parent.refs.openModal.focus();\n      }\n    }\n    /**\n     * Get `Formio` instance for working with files\n     */\n  }, {\n    key: \"fileService\",\n    get: function get() {\n      if (this.options.fileService) {\n        return this.options.fileService;\n      }\n      if (this.options.formio) {\n        return this.options.formio;\n      }\n      if (this.root && this.root.formio) {\n        return this.root.formio;\n      }\n      var formio = new _Formio.GlobalFormio(); // If a form is loaded, then make sure to set the correct formUrl.\n\n      if (this.root && this.root._form && this.root._form._id) {\n        formio.formUrl = \"\".concat(formio.projectUrl, \"/form/\").concat(this.root._form._id);\n      }\n      return formio;\n    }\n  }, {\n    key: \"resetCaches\",\n    value: function resetCaches() {}\n  }, {\n    key: \"previewMode\",\n    get: function get() {\n      return false;\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len5 = arguments.length, sources = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        sources[_key5] = arguments[_key5];\n      }\n      return _lodash.default.merge.apply(_lodash.default, [{\n        /**\n         * Determines if this component provides an input.\n         */\n        input: true,\n        /**\n         * The data key for this component (how the data is stored in the database).\n         */\n        key: '',\n        /**\n         * The input placeholder for this component.\n         */\n        placeholder: '',\n        /**\n         * The input prefix\n         */\n        prefix: '',\n        /**\n         * The custom CSS class to provide to this component.\n         */\n        customClass: '',\n        /**\n         * The input suffix.\n         */\n        suffix: '',\n        /**\n         * If this component should allow an array of values to be captured.\n         */\n        multiple: false,\n        /**\n         * The default value of this component.\n         */\n        defaultValue: null,\n        /**\n         * If the data of this component should be protected (no GET api requests can see the data)\n         */\n        protected: false,\n        /**\n         * Validate if the value of this component should be unique within the form.\n         */\n        unique: false,\n        /**\n         * If the value of this component should be persisted within the backend api database.\n         */\n        persistent: true,\n        /**\n         * Determines if the component should be within the form, but not visible.\n         */\n        hidden: false,\n        /**\n         * If the component should be cleared when hidden.\n         */\n        clearOnHide: true,\n        /**\n         * This will refresh this component options when this field changes.\n         */\n        refreshOn: '',\n        /**\n         * This will redraw the component when this field changes.\n         */\n        redrawOn: '',\n        /**\n         * If this component should be included as a column within a submission table.\n         */\n        tableView: false,\n        /**\n         * If this component should be rendering in modal.\n         */\n        modalEdit: false,\n        /**\n         * The input label provided to this component.\n         */\n        label: '',\n        dataGridLabel: false,\n        labelPosition: 'top',\n        description: '',\n        errorLabel: '',\n        tooltip: '',\n        hideLabel: false,\n        tabindex: '',\n        disabled: false,\n        autofocus: false,\n        dbIndex: false,\n        customDefaultValue: '',\n        calculateValue: '',\n        calculateServer: false,\n        widget: null,\n        /**\n         * Attributes that will be assigned to the input elements of this component.\n         */\n        attributes: {},\n        /**\n         * This will perform the validation on either \"change\" or \"blur\" of the input element.\n         */\n        validateOn: 'change',\n        /**\n         * The validation criteria for this component.\n         */\n        validate: {\n          /**\n           * If this component is required.\n           */\n          required: false,\n          /**\n           * Custom JavaScript validation.\n           */\n          custom: '',\n          /**\n           * If the custom validation should remain private (only the backend will see it and execute it).\n           */\n          customPrivate: false,\n          /**\n           * If this component should implement a strict date validation if the Calendar widget is implemented.\n           */\n          strictDateValidation: false,\n          multiple: false,\n          unique: false\n        },\n        /**\n         * The simple conditional settings for a component.\n         */\n        conditional: {\n          show: null,\n          when: null,\n          eq: ''\n        },\n        overlay: {\n          style: '',\n          left: '',\n          top: '',\n          width: '',\n          height: ''\n        },\n        allowCalculateOverride: false,\n        encrypted: false,\n        showCharCount: false,\n        showWordCount: false,\n        properties: {},\n        allowMultipleMasks: false,\n        addons: []\n      }].concat(sources));\n    }\n    /**\n     * Return the validator as part of the component.\n     *\n     * @return {ValidationChecker}\n     * @constructor\n     */\n  }, {\n    key: \"Validator\",\n    get: function get() {\n      return _Validator.default;\n    }\n    /**\n     * Provides a table view for this component. Override if you wish to do something different than using getView\n     * method of your instance.\n     *\n     * @param value\n     * @param options\n     */\n\n    /* eslint-disable no-unused-vars */\n  }, {\n    key: \"tableView\",\n    value: function tableView(value, options) {}\n  }]);\n  return Component;\n}(_Element2.default);\nexports.default = Component;\nComponent.externalLibraries = {};\nComponent.requireLibrary = function (name, property, src, polling) {\n  if (!Component.externalLibraries.hasOwnProperty(name)) {\n    Component.externalLibraries[name] = {};\n    Component.externalLibraries[name].ready = new _nativePromiseOnly.default(function (resolve, reject) {\n      Component.externalLibraries[name].resolve = resolve;\n      Component.externalLibraries[name].reject = reject;\n    });\n    var callbackName = \"\".concat(name, \"Callback\");\n    if (!polling && !window[callbackName]) {\n      window[callbackName] = function () {\n        this.resolve();\n      }.bind(Component.externalLibraries[name]);\n    } // See if the plugin already exists.\n\n    var plugin = _lodash.default.get(window, property);\n    if (plugin) {\n      Component.externalLibraries[name].resolve(plugin);\n    } else {\n      src = Array.isArray(src) ? src : [src];\n      src.forEach(function (lib) {\n        var attrs = {};\n        var elementType = '';\n        if (typeof lib === 'string') {\n          lib = {\n            type: 'script',\n            src: lib\n          };\n        }\n        switch (lib.type) {\n          case 'script':\n            elementType = 'script';\n            attrs = {\n              src: lib.src,\n              type: 'text/javascript',\n              defer: true,\n              async: true\n            };\n            break;\n          case 'styles':\n            elementType = 'link';\n            attrs = {\n              href: lib.src,\n              rel: 'stylesheet'\n            };\n            break;\n        } // Add the script to the top page.\n\n        var script = document.createElement(elementType);\n        for (var attr in attrs) {\n          script.setAttribute(attr, attrs[attr]);\n        }\n        document.getElementsByTagName('head')[0].appendChild(script);\n      }); // if no callback is provided, then check periodically for the script.\n\n      if (polling) {\n        setTimeout(function checkLibrary() {\n          var plugin = _lodash.default.get(window, property);\n          if (plugin) {\n            Component.externalLibraries[name].resolve(plugin);\n          } else {\n            // check again after 200 ms.\n            setTimeout(checkLibrary, 200);\n          }\n        }, 200);\n      }\n    }\n  }\n  return Component.externalLibraries[name].ready;\n};\nComponent.libraryReady = function (name) {\n  if (Component.externalLibraries.hasOwnProperty(name) && Component.externalLibraries[name].ready) {\n    return Component.externalLibraries[name].ready;\n  }\n  return _nativePromiseOnly.default.reject(\"\".concat(name, \" library was not required.\"));\n};","map":{"version":3,"names":["_typeof","obj","Symbol","iterator","constructor","prototype","require","Object","defineProperty","exports","value","default","_vanillaTextMask","_nativePromiseOnly","_interopRequireDefault","_tippy","_lodash","_ismobilejs","_Formio","FormioUtils","_interopRequireWildcard","_Validator","_Element2","_ComponentModal","_widgets","_addons","_uploadAdapter","_en","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","_createForOfIteratorHelper","o","allowArrayLike","it","Array","isArray","_unsupportedIterableToArray","F","s","n","done","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","return","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","minLen","_arrayLikeToArray","toString","slice","name","from","test","iter","len","arr2","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_get","Reflect","bind","property","receiver","base","_superPropBase","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","getPrototypeOf","isIEBrowser","getBrowserInfo","ie","Templates","GlobalFormio","Component","_Element","_super","component","options","data","_this","assign","renderMode","attachMode","noDefaults","id","_hasCondition","refs","components","type","merge","validator","path","mergeSchema","originalComponent","fastCloneDeep","attached","rendered","_data","error","tooltip","row","_disabled","boolValue","disabled","root","localRoot","pristine","parent","validators","_path","_parentPath","parentPath","resetCaches","_parentVisible","parentVisible","_visible","conditionallyVisible","_parentDisabled","changes","lastChanged","triggerArgs","_triggerChange","debounce","_this2","changing","_len","args","_key","isEmpty","flags","retVal","onChange","triggerChange","_len2","_key2","triggerRedraw","redraw","tooltips","addons","invalid","allowData","concat","visible","clearOnHide","hasValue","shouldAddDefaultValue","dataValue","defaultValue","info","elementInfo","hook","skipInit","init","undefined","defaultsDeep","defaultSchema","resolve","label","hidden","labelIsHidden","className","labelPosition","tooltipClass","iconClass","isPDFReadOnlyMode","form","display","readOnly","hasInput","validate","required","attr","for","_this$component$addon","_this3","shouldDisabled","addon","createAddon","addonConfiguration","_addonConfiguration$s","settings","Addon","supportedComponents","supportsThisComponentType","indexOf","console","warn","destroy","detach","input","isInputComponent","schema","builderMode","previewMode","showHiddenFields","hide","show","_currentForm","width","labelWidth","margin","labelMargin","includes","split","rightDirection","direction","condensedMode","getLabelInfo","isCondensed","isRightPosition","labelPositions","isLeftPosition","isRightAlign","contentMargin","hideLabel","labelStyles","contentStyles","getModifiedSchema","recursion","_this4","modified","each","val","isObject","subModified","isEqual","omit","inDataGrid","t","text","_get2","params","_userInput","rootValue","_len3","_key3","isInDataGrid","dataGridLabel","inputsOnly","current","transform","getTemplate","names","modes","templates","checkTemplate","frameworkTemplates","template","templatesByName","defaultTemplates","templateByMode","checkTemplateMode","_iterator","_step","_iterator2","_step2","mode","getFormattedTooltip","tooltipValue","interpolate","replace","isHtmlRenderMode","renderTemplate","_this5","modeOption","size","builder","render","labelInfo","charAt","toUpperCase","substring","sanitize","dirty","forceSanitize","_this$options","shouldSanitizeValue","pdf","sanitizeConfig","renderString","performInputMapping","_this$root","widget","shadowRoot","getBrowserLanguage","nav","window","navigator","browserLanguagePropertyKeys","language","languages","_i","beforePage","beforeNext","beforeSubmit","submissionTimezone","getTimezone","timezone","displayInTimezone","server","currentTimezone","loadRefs","element","ref","refType","isString","selector","startsWith","querySelector","querySelectorAll","setOpenModalElement","componentModal","getModalPreviewTemplate","message","level","previewText","getValueAsString","modalPreview","messages","build","empty","setContent","attach","children","topLevel","isVisible","modalEdit","showSaveButton","hasModalSaveButton","classes","styles","customStyle","attachTooltips","toolTipsRefs","_this6","index","tooltipAttribute","getAttribute","tooltipDataTitle","tooltipText","allowHTML","trigger","placement","zIndex","interactive","content","createComponentModal","modalShouldBeOpened","currentValue","isOpened","openModalTemplate","messageContainer","attachLogic","autofocus","restoreFocus","_this$root2","_this$root2$focusedCo","isFocused","focusedComponent","_this$root$currentSel","focus","currentSelection","restoreCaretPosition","addShortcut","shortcut","removeShortcut","removeEventListeners","detachLogic","checkRefresh","refreshData","changed","changePath","refresh","getComponentPath","inContext","checkRefreshOn","_this7","noRefresh","refreshOn","fromBlur","refreshOnBlur","redrawOn","refreshOnChanged","refreshOnValue","clearOnRefresh","setValue","viewAsHtml","createViewOnlyElement","ce","getWidgetValueAsString","_this8","noInputWidget","values","join","isPlainObject","JSON","stringify","stringValue","getView","protected","updateItems","restoreValue","itemValue","forceUseValue","valueProperty","itemValueForHTMLMode","_this9","map","item","createModal","confirm","_this10","dialog","dialogOverlay","dialogContents","dialogClose","appendChild","document","body","classList","add","close","remove","dispatchEvent","CustomEvent","addEventListener","removeChildFrom","event","preventDefault","handleCloseClick","then","catch","optimizeRedraw","addClass","multiple","customClass","customCSS","style","getElement","evalContext","additional","rowIndex","submission","_submission","_form","setPristine","setDirty","removeValue","splice","triggerRootChange","spinning","iconset","defaultIconset","_size","placeholder","errorLabel","errorMessage","errors","sanitizeOptions","HTMLElement","innerHTML","_this$root3","_this$refs$input","_this$root$currentSel2","selection","isInputRangeSelectable","_input","setSelectionRange","_input$value","lastCharacter","parentNode","emit","outerHTML","rebuild","hasClass","removeClass","hasCondition","checkCondition","checkComponentConditions","fieldLogic","checkConditions","logic","_this11","logics","newComponent","reduce","checkTrigger","applyActions","actions","isIE","userAgent","msie","parseInt","trident","rv","edge","defineActionValue","action","argsObject","evaluate","_this12","setActionProperty","oldValue","getValue","newValue","clone","viewOnly","schemaDefinition","_oldValue","_newValue","customAction","addInputError","elements","addMessages","setErrorClasses","removeInputError","_this13","uniqBy","hasErrors","hasMessages","_this14","clearErrorClasses","setElementInvalid","setInputWidgetErrorClasses","highlightErrors","componentErrorClass","setAttribute","rootPristine","isInsideScopingComponent","deleteValue","noUpdateEvent","_this$options2","_this$root4","fromRoot","noPristineChangeOnModified","validateOn","noValidate","quill","theme","modules","toolbar","ace","maxLines","minLines","tabSize","ckeditor","image","extraPlugins","addCKE","base64Upload","isUploadEnabled","mediaEmbed","previewsInData","wysiwygDefault","getFormioUploadAdapterPlugin","fileService","requireLibrary","cdn","reject","editor","CKEDITOR","on","getData","ClassicEditor","model","addQuill","_this15","table","src","baseUrl","Quill","txtArea","createElement","addContainer","qlSource","setContents","clipboard","convert","html","elm","_this$options3","addAce","edit","removeAllListeners","setOptions","getSession","setMode","isUseWorkerDisabled","session","setUseWorker","tree","emptyValue","unset","noDefault","getCustomDefaultValue","customDefaultValue","preview","_this16","checkMask","placeholderChar","conformToMask","defaultMask","conformedValue","matchInputMask","cloneDeep","getValueAt","updateValue","valueInput","fileLink","fromSubmission","setValueAt","valueMaskInput","mask","textMaskInputElement","update","setDefaultValue","hasSetValue","normalizeValue","updateComponentValue","resetValue","hasChanged","updateOnChange","getIcon","convertNumberOrBoolToString","doValueCalculation","calculateValue","calculateComponentValue","shouldBeCleared","allowOverride","calculateValueVariable","calculateServer","dataSourceInitialLoading","calculatedValue","isNil","persistent","calculationLocked","firstPass","newCalculatedValue","previousCalculatedValue","normalizedDataValue","calculationChanged","previousChanged","isReordered","triggeredComponentId","labelElement","innerText","getRoot","invalidMessage","ignoreCondition","checkComponent","isValid","setComponentValidity","silentCheck","fromServer","setCustomValidity","checkComponentValidity","_this$serverErrors","_this17","_options$async","async","_options$silentCheck","shouldSkipValidation","check","validations","serverErrors","checkValidity","checkModal","checkAsyncValidity","checkData","noCheck","validateOnInit","fromIframe","alwaysDirty","isDirty","openModal","openModalWrapper","isEmptyArray","valueA","valueB","validateMultiple","inputRefs","external","_this18","invalidInputRefs","inputRefsArray","_messages$some","_messages","some","msg","_msg$context","context","modalMessageContainer","isValueHidden","editing","_this19","rules","pred","whenReady","dataReady","asString","parentDisabled","setDisabled","removeAttribute","setLoading","loading","loader","class","appendTo","selectOptions","select","tag","_this20","option","attrs","selected","optionElement","setSelectValue","onchange","onselect","getRelativePath","keyPart","thisPath","clear","append","prepend","prependTo","removeChild","_this21","off","_this22","_len4","_key4","attributes","inputType","lang","tabindex","defaults","changeEvent","_this23","hasAutofocus","scrollIntoView","_element$getBoundingC","getBoundingClientRect","left","top","scrollTo","scrollX","scrollY","_this$refs$input2","beforeFocus","_this$component$widge","focusingInput","sibling","nextSibling","formio","_id","formUrl","projectUrl","_len5","sources","_key5","prefix","suffix","unique","tableView","description","dbIndex","custom","customPrivate","strictDateValidation","conditional","when","eq","overlay","height","allowCalculateOverride","encrypted","showCharCount","showWordCount","properties","allowMultipleMasks","externalLibraries","polling","ready","callbackName","plugin","lib","elementType","defer","href","rel","script","getElementsByTagName","setTimeout","checkLibrary","libraryReady"],"sources":["D:/task/node_modules/formiojs/components/_classes/component/Component.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.reflect.get.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\n\nrequire(\"core-js/modules/es.weak-map.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.object.assign.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.regexp.flags.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.string.includes.js\");\n\nrequire(\"core-js/modules/es.string.replace.js\");\n\nrequire(\"core-js/modules/es.string.starts-with.js\");\n\nrequire(\"core-js/modules/es.array.join.js\");\n\nrequire(\"core-js/modules/es.regexp.to-string.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.array.splice.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nvar _vanillaTextMask = require(\"@formio/vanilla-text-mask\");\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nvar _tippy = _interopRequireDefault(require(\"tippy.js\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _ismobilejs = _interopRequireDefault(require(\"ismobilejs\"));\n\nvar _Formio = require(\"../../../Formio\");\n\nvar FormioUtils = _interopRequireWildcard(require(\"../../../utils/utils\"));\n\nvar _Validator = _interopRequireDefault(require(\"../../../validator/Validator\"));\n\nvar _Element2 = _interopRequireDefault(require(\"../../../Element\"));\n\nvar _ComponentModal = _interopRequireDefault(require(\"../componentModal/ComponentModal\"));\n\nvar _widgets = _interopRequireDefault(require(\"../../../widgets\"));\n\nvar _addons = _interopRequireDefault(require(\"../../../addons\"));\n\nvar _uploadAdapter = require(\"../../../providers/storage/uploadAdapter\");\n\nvar _en = _interopRequireDefault(require(\"../../../translations/en\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar isIEBrowser = FormioUtils.getBrowserInfo().ie;\nvar Templates = _Formio.GlobalFormio.Templates;\n\nif (!Templates) {\n  Templates = require('../../../templates/Templates').default;\n}\n/**\n * This is the Component class\n which all elements within the FormioForm derive from.\n */\n\n\nvar Component = /*#__PURE__*/function (_Element) {\n  _inherits(Component, _Element);\n\n  var _super = _createSuper(Component);\n\n  /* eslint-enable no-unused-vars */\n\n  /**\n   * Initialize a new Component.\n   *\n   * @param {Object} component - The component JSON you wish to initialize.\n   * @param {Object} options - The options for this component.\n   * @param {Object} data - The global data submission object this component will belong.\n   */\n\n  /* eslint-disable max-statements */\n  function Component(component, options, data) {\n    var _this;\n\n    _classCallCheck(this, Component);\n\n    _this = _super.call(this, Object.assign({\n      renderMode: 'form',\n      attachMode: 'full',\n      noDefaults: false\n    }, options || {})); // Restore the component id.\n\n    if (component && component.id) {\n      _this.id = component.id;\n    }\n    /**\n     * Determines if this component has a condition assigned to it.\n     * @type {null}\n     * @private\n     */\n\n\n    _this._hasCondition = null;\n    /**\n     * References to dom elements\n     */\n\n    _this.refs = {}; // Allow global override for any component JSON.\n\n    if (component && _this.options.components && _this.options.components[component.type]) {\n      _lodash.default.merge(component, _this.options.components[component.type]);\n    }\n    /**\n     * Set the validator instance.\n     */\n\n\n    _this.validator = _Validator.default;\n    /**\n     * The data path to this specific component instance.\n     *\n     * @type {string}\n     */\n\n    _this.path = '';\n    /**\n     * The Form.io component JSON schema.\n     * @type {*}\n     */\n\n    _this.component = _this.mergeSchema(component || {}); // Add the id to the component.\n\n    _this.component.id = _this.id; // Save off the original component to be used in logic.\n\n    _this.originalComponent = (0, FormioUtils.fastCloneDeep)(_this.component);\n    /**\n     * If the component has been attached\n     */\n\n    _this.attached = false;\n    /**\n     * If the component has been rendered\n     */\n\n    _this.rendered = false;\n    /**\n     * The data object in which this component resides.\n     * @type {*}\n     */\n\n    _this._data = data || {};\n    /**\n     * The existing error that this component has.\n     * @type {string}\n     */\n\n    _this.error = '';\n    /**\n     * Tool tip text after processing\n     * @type {string}\n     */\n\n    _this.tooltip = '';\n    /**\n     * The row path of this component.\n     * @type {number}\n     */\n\n    _this.row = _this.options.row;\n    /**\n     * Determines if this component is disabled, or not.\n     *\n     * @type {boolean}\n     */\n\n    _this._disabled = (0, FormioUtils.boolValue)(_this.component.disabled) ? _this.component.disabled : false;\n    /**\n     * Points to the root component, usually the FormComponent.\n     *\n     * @type {Component}\n     */\n\n    _this.root = _this.options.root;\n    _this.localRoot = _this.options.localRoot;\n    /**\n     * If this input has been input and provided value.\n     *\n     * @type {boolean}\n     */\n\n    _this.pristine = true;\n    /**\n     * Points to the parent component.\n     *\n     * @type {Component}\n     */\n\n    _this.parent = _this.options.parent;\n    _this.options.name = _this.options.name || 'data';\n    /**\n     * The validators that are assigned to this component.\n     * @type {[string]}\n     */\n\n    _this.validators = ['required', 'minLength', 'maxLength', 'minWords', 'maxWords', 'custom', 'pattern', 'json', 'mask'];\n    _this._path = ''; // Nested forms don't have parents so we need to pass their path in.\n\n    _this._parentPath = _this.options.parentPath || ''; // Needs for Nextgen Rules Engine\n\n    _this.resetCaches();\n    /**\n     * Determines if this component is visible, or not.\n     */\n\n\n    _this._parentVisible = _this.options.hasOwnProperty('parentVisible') ? _this.options.parentVisible : true;\n    _this._visible = _this._parentVisible && _this.conditionallyVisible(null, data);\n    _this._parentDisabled = false;\n    /**\n     * Used to trigger a new change in this component.\n     * @type {function} - Call to trigger a change in this component.\n     */\n\n    var changes = [];\n    var lastChanged = null;\n    var triggerArgs = [];\n\n    var _triggerChange = _lodash.default.debounce(function () {\n      var _this2;\n\n      if (_this.root) {\n        _this.root.changing = false;\n      }\n\n      triggerArgs = [];\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      if (!args[1] && lastChanged) {\n        // Set the changed component if one isn't provided.\n        args[1] = lastChanged;\n      }\n\n      if (_lodash.default.isEmpty(args[0]) && lastChanged) {\n        // Set the flags if it is empty and lastChanged exists.\n        args[0] = lastChanged.flags;\n      }\n\n      lastChanged = null;\n      args[3] = changes;\n\n      var retVal = (_this2 = _this).onChange.apply(_this2, args);\n\n      changes = [];\n      return retVal;\n    }, 100);\n\n    _this.triggerChange = function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      if (args[1]) {\n        // Make sure that during the debounce that we always track lastChanged component, even if they\n        // don't provide one later.\n        lastChanged = args[1];\n        changes.push(lastChanged);\n      }\n\n      if (_this.root) {\n        _this.root.changing = true;\n      }\n\n      if (args.length) {\n        triggerArgs = args;\n      }\n\n      return _triggerChange.apply(void 0, _toConsumableArray(triggerArgs));\n    };\n    /**\n     * Used to trigger a redraw event within this component.\n     *\n     * @type {Function}\n     */\n\n\n    _this.triggerRedraw = _lodash.default.debounce(_this.redraw.bind(_assertThisInitialized(_this)), 100);\n    /**\n     * list of attached tooltips\n     * @type {Array}\n     */\n\n    _this.tooltips = [];\n    /**\n     * List of attached addons\n     * @type {Array}\n     */\n\n    _this.addons = []; // To force this component to be invalid.\n\n    _this.invalid = false;\n\n    if (_this.component) {\n      _this.type = _this.component.type;\n\n      if (_this.allowData && _this.key) {\n        _this.options.name += \"[\".concat(_this.key, \"]\"); // If component is visible or not set to clear on hide, set the default value.\n\n        if (_this.visible || !_this.component.clearOnHide) {\n          if (!_this.hasValue()) {\n            if (_this.shouldAddDefaultValue) {\n              _this.dataValue = _this.defaultValue;\n            }\n          } else {\n            // Ensure the dataValue is set.\n\n            /* eslint-disable  no-self-assign */\n            _this.dataValue = _this.dataValue;\n            /* eslint-enable  no-self-assign */\n          }\n        }\n      }\n      /**\n       * The element information for creating the input element.\n       * @type {*}\n       */\n\n\n      _this.info = _this.elementInfo();\n    } // Allow anyone to hook into the component creation.\n\n\n    _this.hook('component');\n\n    if (!_this.options.skipInit) {\n      _this.init();\n    }\n\n    return _this;\n  }\n  /* eslint-enable max-statements */\n\n\n  _createClass(Component, [{\n    key: \"data\",\n    get: function get() {\n      return this._data;\n    },\n    set: function set(value) {\n      this._data = value;\n    }\n  }, {\n    key: \"mergeSchema\",\n    value: function mergeSchema() {\n      var component = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return _lodash.default.defaultsDeep(component, this.defaultSchema);\n    } // Allow componets to notify when ready.\n\n  }, {\n    key: \"ready\",\n    get: function get() {\n      return _nativePromiseOnly.default.resolve(this);\n    }\n  }, {\n    key: \"labelInfo\",\n    get: function get() {\n      var label = {};\n      label.hidden = this.labelIsHidden();\n      label.className = '';\n      label.labelPosition = this.component.labelPosition;\n      label.tooltipClass = \"\".concat(this.iconClass('question-sign'), \" text-muted\");\n      var isPDFReadOnlyMode = this.parent && this.parent.form && this.parent.form.display === 'pdf' && this.options.readOnly;\n\n      if (this.hasInput && this.component.validate && (0, FormioUtils.boolValue)(this.component.validate.required) && !isPDFReadOnlyMode) {\n        label.className += ' field-required';\n      }\n\n      if (label.hidden) {\n        label.className += ' control-label--hidden';\n      }\n\n      if (this.info.attr.id) {\n        label.for = this.info.attr.id;\n      }\n\n      return label;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this$component$addon,\n          _this3 = this;\n\n      this.disabled = this.shouldDisabled;\n      this._visible = this.conditionallyVisible(null, null);\n\n      if ((_this$component$addon = this.component.addons) !== null && _this$component$addon !== void 0 && _this$component$addon.length) {\n        this.component.addons.forEach(function (addon) {\n          return _this3.createAddon(addon);\n        });\n      }\n    }\n  }, {\n    key: \"createAddon\",\n    value: function createAddon(addonConfiguration) {\n      var _addonConfiguration$s;\n\n      var name = addonConfiguration.name;\n\n      if (!name) {\n        return;\n      }\n\n      var settings = ((_addonConfiguration$s = addonConfiguration.settings) === null || _addonConfiguration$s === void 0 ? void 0 : _addonConfiguration$s.data) || {};\n      var Addon = _addons.default[name];\n      var addon = null;\n\n      if (Addon) {\n        var supportedComponents = Addon.info.supportedComponents;\n        var supportsThisComponentType = !(supportedComponents !== null && supportedComponents !== void 0 && supportedComponents.length) || supportedComponents.indexOf(this.component.type) !== -1;\n\n        if (supportsThisComponentType) {\n          addon = new Addon(settings, this);\n          this.addons.push(addon);\n        } else {\n          console.warn(\"Addon \".concat(name, \" does not support component of type \").concat(this.component.type, \".\"));\n        }\n      }\n\n      return addon;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(Component.prototype), \"destroy\", this).call(this);\n\n      this.detach();\n      this.addons.forEach(function (addon) {\n        return addon.destroy();\n      });\n    }\n  }, {\n    key: \"shouldDisabled\",\n    get: function get() {\n      return this.options.readOnly || this.component.disabled || this.options.hasOwnProperty('disabled') && this.options.disabled[this.key];\n    }\n  }, {\n    key: \"isInputComponent\",\n    get: function get() {\n      return !this.component.hasOwnProperty('input') || this.component.input;\n    }\n  }, {\n    key: \"allowData\",\n    get: function get() {\n      return this.hasInput;\n    }\n  }, {\n    key: \"hasInput\",\n    get: function get() {\n      return this.isInputComponent || this.refs.input && this.refs.input.length;\n    }\n  }, {\n    key: \"defaultSchema\",\n    get: function get() {\n      return Component.schema();\n    }\n  }, {\n    key: \"key\",\n    get: function get() {\n      return _lodash.default.get(this.component, 'key', '');\n    }\n  }, {\n    key: \"parentVisible\",\n    get: function get() {\n      return this._parentVisible;\n    },\n    set: function set(value) {\n      this._parentVisible = value;\n    }\n  }, {\n    key: \"parentDisabled\",\n    get: function get() {\n      return this._parentDisabled;\n    }\n    /**\n     *\n     * @param value {boolean}\n     */\n    ,\n    set: function set(value) {\n      this._parentDisabled = value;\n    }\n  }, {\n    key: \"visible\",\n    get:\n    /**\n     *\n     * @returns {boolean}\n     */\n    function get() {\n      // Show only if visibility changes or if we are in builder mode or if hidden fields should be shown.\n      if (this.builderMode || this.previewMode || this.options.showHiddenFields) {\n        return true;\n      }\n\n      if (this.options.hide && this.options.hide[this.component.key]) {\n        return false;\n      }\n\n      if (this.options.show && this.options.show[this.component.key]) {\n        return true;\n      }\n\n      return this._visible && this._parentVisible;\n    },\n    set: function set(value) {\n      if (this._visible !== value) {\n        this._visible = value;\n        this.clearOnHide();\n        this.redraw();\n      }\n    }\n  }, {\n    key: \"currentForm\",\n    get: function get() {\n      return this._currentForm;\n    },\n    set: function set(instance) {\n      this._currentForm = instance;\n    }\n  }, {\n    key: \"fullMode\",\n    get: function get() {\n      return this.options.attachMode === 'full';\n    }\n  }, {\n    key: \"builderMode\",\n    get: function get() {\n      return this.options.attachMode === 'builder';\n    }\n  }, {\n    key: \"calculatedPath\",\n    get: function get() {\n      console.error('component.calculatedPath was deprecated, use component.path instead.');\n      return this.path;\n    }\n  }, {\n    key: \"labelPosition\",\n    get: function get() {\n      return this.component.labelPosition;\n    }\n  }, {\n    key: \"labelWidth\",\n    get: function get() {\n      var width = this.component.labelWidth;\n      return width >= 0 ? width : 30;\n    }\n  }, {\n    key: \"labelMargin\",\n    get: function get() {\n      var margin = this.component.labelMargin;\n      return margin >= 0 ? margin : 3;\n    }\n  }, {\n    key: \"isAdvancedLabel\",\n    get: function get() {\n      return ['left-left', 'left-right', 'right-left', 'right-right'].includes(this.labelPosition);\n    }\n  }, {\n    key: \"labelPositions\",\n    get: function get() {\n      return this.labelPosition.split('-');\n    }\n  }, {\n    key: \"skipInEmail\",\n    get: function get() {\n      return false;\n    }\n  }, {\n    key: \"rightDirection\",\n    value: function rightDirection(direction) {\n      if (this.options.condensedMode) {\n        return false;\n      }\n\n      return direction === 'right';\n    }\n  }, {\n    key: \"getLabelInfo\",\n    value: function getLabelInfo() {\n      var isCondensed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var isRightPosition = this.rightDirection(this.labelPositions[0]);\n      var isLeftPosition = this.labelPositions[0] === 'left' || isCondensed;\n      var isRightAlign = this.rightDirection(this.labelPositions[1]);\n      var contentMargin = '';\n\n      if (this.component.hideLabel) {\n        var margin = this.labelWidth + this.labelMargin;\n        contentMargin = isRightPosition ? \"margin-right: \".concat(margin, \"%\") : '';\n        contentMargin = isLeftPosition ? \"margin-left: \".concat(margin, \"%\") : '';\n      }\n\n      var labelStyles = \"\\n      flex: \".concat(this.labelWidth, \";\\n      \").concat(isRightPosition ? 'margin-left' : 'margin-right', \": \").concat(this.labelMargin, \"%;\\n    \");\n      var contentStyles = \"\\n      flex: \".concat(100 - this.labelWidth - this.labelMargin, \";\\n      \").concat(contentMargin, \";\\n      \").concat(this.component.hideLabel ? \"max-width: \".concat(100 - this.labelWidth - this.labelMargin) : '', \";\\n    \");\n      return {\n        isRightPosition: isRightPosition,\n        isRightAlign: isRightAlign,\n        labelStyles: labelStyles,\n        contentStyles: contentStyles\n      };\n    }\n    /**\n     * Returns only the schema that is different from the default.\n     *\n     * @param schema\n     * @param defaultSchema\n     */\n\n  }, {\n    key: \"getModifiedSchema\",\n    value: function getModifiedSchema(schema, defaultSchema, recursion) {\n      var _this4 = this;\n\n      var modified = {};\n\n      if (!defaultSchema) {\n        return schema;\n      }\n\n      _lodash.default.each(schema, function (val, key) {\n        if (!_lodash.default.isArray(val) && _lodash.default.isObject(val) && defaultSchema.hasOwnProperty(key)) {\n          var subModified = _this4.getModifiedSchema(val, defaultSchema[key], true);\n\n          if (!_lodash.default.isEmpty(subModified)) {\n            modified[key] = subModified;\n          }\n        } else if (_lodash.default.isArray(val)) {\n          if (val.length !== 0 && !_lodash.default.isEqual(val, defaultSchema[key])) {\n            modified[key] = val;\n          }\n        } else if (!recursion && key === 'type' || !recursion && key === 'key' || !recursion && key === 'label' || !recursion && key === 'input' || !recursion && key === 'tableView' || val !== '' && !defaultSchema.hasOwnProperty(key) || val !== '' && val !== defaultSchema[key] || defaultSchema[key] && val !== defaultSchema[key]) {\n          modified[key] = val;\n        }\n      });\n\n      return modified;\n    }\n    /**\n     * Returns the JSON schema for this component.\n     */\n\n  }, {\n    key: \"schema\",\n    get: function get() {\n      return (0, FormioUtils.fastCloneDeep)(this.getModifiedSchema(_lodash.default.omit(this.component, 'id'), this.defaultSchema));\n    }\n    /**\n     * Returns true if component is inside DataGrid\n     */\n\n  }, {\n    key: \"isInDataGrid\",\n    get: function get() {\n      return this.inDataGrid;\n    }\n    /**\n     * Translate a text using the i18n system.\n     *\n     * @param {string} text - The i18n identifier.\n     * @param {Object} params - The i18n parameters to use for translation.\n     */\n\n  }, {\n    key: \"t\",\n    value: function t(text) {\n      var _get2;\n\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!text) {\n        return '';\n      } // Use _userInput: true to ignore translations from defaults\n\n\n      if (text in _en.default && params._userInput) {\n        return text;\n      }\n\n      params.data = this.rootValue;\n      params.row = this.data;\n      params.component = this.component;\n\n      for (var _len3 = arguments.length, args = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n        args[_key3 - 2] = arguments[_key3];\n      }\n\n      return (_get2 = _get(_getPrototypeOf(Component.prototype), \"t\", this)).call.apply(_get2, [this, text, params].concat(args));\n    }\n  }, {\n    key: \"labelIsHidden\",\n    value: function labelIsHidden() {\n      return !this.component.label || (!this.isInDataGrid && this.component.hideLabel || this.isInDataGrid && !this.component.dataGridLabel || this.options.inputsOnly) && !this.builderMode;\n    }\n  }, {\n    key: \"transform\",\n    get: function get() {\n      return Templates.current.hasOwnProperty('transform') ? Templates.current.transform.bind(Templates.current) : function (type, value) {\n        return value;\n      };\n    }\n  }, {\n    key: \"getTemplate\",\n    value: function getTemplate(names, modes) {\n      modes = Array.isArray(modes) ? modes : [modes];\n      names = Array.isArray(names) ? names : [names];\n\n      if (!modes.includes('form')) {\n        modes.push('form');\n      }\n\n      var result = null;\n\n      if (this.options.templates) {\n        result = this.checkTemplate(this.options.templates, names, modes);\n\n        if (result) {\n          return result;\n        }\n      }\n\n      var frameworkTemplates = this.options.template ? Templates.templates[this.options.template] : Templates.current;\n      result = this.checkTemplate(frameworkTemplates, names, modes);\n\n      if (result) {\n        return result;\n      } // Default back to bootstrap if not defined.\n\n\n      var name = names[names.length - 1];\n      var templatesByName = Templates.defaultTemplates[name];\n\n      if (!templatesByName) {\n        return \"Unknown template: \".concat(name);\n      }\n\n      var templateByMode = this.checkTemplateMode(templatesByName, modes);\n\n      if (templateByMode) {\n        return templateByMode;\n      }\n\n      return templatesByName.form;\n    }\n  }, {\n    key: \"checkTemplate\",\n    value: function checkTemplate(templates, names, modes) {\n      var _iterator = _createForOfIteratorHelper(names),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var name = _step.value;\n          var templatesByName = templates[name];\n\n          if (templatesByName) {\n            var templateByMode = this.checkTemplateMode(templatesByName, modes);\n\n            if (templateByMode) {\n              return templateByMode;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"checkTemplateMode\",\n    value: function checkTemplateMode(templatesByName, modes) {\n      var _iterator2 = _createForOfIteratorHelper(modes),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var mode = _step2.value;\n          var templateByMode = templatesByName[mode];\n\n          if (templateByMode) {\n            return templateByMode;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getFormattedTooltip\",\n    value: function getFormattedTooltip(tooltipValue) {\n      var tooltip = this.interpolate(tooltipValue || '').replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n      return tooltip ? this.t(tooltip, {\n        _userInput: true\n      }).replace(/\"/g, '&quot;') : '';\n    }\n  }, {\n    key: \"isHtmlRenderMode\",\n    value: function isHtmlRenderMode() {\n      return this.options.renderMode === 'html';\n    }\n  }, {\n    key: \"renderTemplate\",\n    value: function renderTemplate(name) {\n      var _this5 = this;\n\n      var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var modeOption = arguments.length > 2 ? arguments[2] : undefined;\n      // Need to make this fall back to form if renderMode is not found similar to how we search templates.\n      var mode = modeOption || this.options.renderMode || 'form';\n      data.component = this.component;\n      data.self = this;\n      data.options = this.options;\n      data.readOnly = this.options.readOnly;\n      data.iconClass = this.iconClass.bind(this);\n      data.size = this.size.bind(this);\n      data.t = this.t.bind(this);\n      data.transform = this.transform;\n      data.id = data.id || this.id;\n      data.key = data.key || this.key;\n      data.value = data.value || this.dataValue;\n      data.disabled = this.disabled;\n      data.builder = this.builderMode;\n\n      data.render = function () {\n        console.warn(\"Form.io 'render' template function is deprecated.\\n      If you need to render template (template A) inside of another template (template B),\\n      pass pre-compiled template A (use this.renderTemplate('template_A_name') as template context variable for template B\");\n        return _this5.renderTemplate.apply(_this5, arguments);\n      };\n\n      data.label = this.labelInfo;\n      data.tooltip = this.getFormattedTooltip(this.component.tooltip); // Allow more specific template names\n\n      var names = [\"\".concat(name, \"-\").concat(this.component.type, \"-\").concat(this.key), \"\".concat(name, \"-\").concat(this.component.type), \"\".concat(name, \"-\").concat(this.key), \"\".concat(name)]; // Allow template alters.\n\n      return this.hook(\"render\".concat(name.charAt(0).toUpperCase() + name.substring(1, name.length)), this.interpolate(this.getTemplate(names, mode), data), data, mode);\n    }\n    /**\n     * Sanitize an html string.\n     *\n     * @param string\n     * @returns {*}\n     */\n\n  }, {\n    key: \"sanitize\",\n    value: function sanitize(dirty, forceSanitize, options) {\n      var _this$options;\n\n      // No need to sanitize when generating PDF'S since no users interact with the form.\n      if (!this.shouldSanitizeValue && !forceSanitize || this.options.pdf && !forceSanitize) {\n        return dirty;\n      }\n\n      return FormioUtils.sanitize(dirty, {\n        sanitizeConfig: _lodash.default.merge(((_this$options = this.options) === null || _this$options === void 0 ? void 0 : _this$options.sanitizeConfig) || {}, options || {})\n      });\n    }\n    /**\n     * Render a template string into html.\n     *\n     * @param template\n     * @param data\n     * @param actions\n     *\n     * @return {HTMLElement|String} - The created element or an empty string if template is not specified.\n     */\n\n  }, {\n    key: \"renderString\",\n    value: function renderString(template, data) {\n      if (!template) {\n        return '';\n      } // Interpolate the template and populate\n\n\n      return this.interpolate(template, data);\n    }\n  }, {\n    key: \"performInputMapping\",\n    value: function performInputMapping(input) {\n      return input;\n    }\n  }, {\n    key: \"widget\",\n    get: function get() {\n      var _this$root;\n\n      var settings = this.component.widget;\n\n      if (settings && (_this$root = this.root) !== null && _this$root !== void 0 && _this$root.shadowRoot) {\n        settings.shadowRoot = this.root.shadowRoot;\n      }\n\n      var widget = settings && _widgets.default[settings.type] ? new _widgets.default[settings.type](settings, this.component, this) : null;\n      return widget;\n    }\n  }, {\n    key: \"getBrowserLanguage\",\n    value: function getBrowserLanguage() {\n      var nav = window.navigator;\n      var browserLanguagePropertyKeys = ['language', 'browserLanguage', 'systemLanguage', 'userLanguage'];\n      var language; // support for HTML 5.1 \"navigator.languages\"\n\n      if (Array.isArray(nav.languages)) {\n        for (var i = 0; i < nav.languages.length; i++) {\n          language = nav.languages[i];\n\n          if (language && language.length) {\n            return language.split(';')[0];\n          }\n        }\n      } // support for other well known properties in browsers\n\n\n      for (var _i = 0; _i < browserLanguagePropertyKeys.length; _i++) {\n        language = nav[browserLanguagePropertyKeys[_i]];\n\n        if (language && language.length) {\n          return language.split(';')[0];\n        }\n      }\n\n      return null;\n    }\n    /**\n     * Called before a next and previous page is triggered allowing the components\n     * to perform special functions.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"beforePage\",\n    value: function beforePage() {\n      return _nativePromiseOnly.default.resolve(true);\n    }\n  }, {\n    key: \"beforeNext\",\n    value: function beforeNext() {\n      return this.beforePage(true);\n    }\n    /**\n     * Called before a submission is triggered allowing the components\n     * to perform special async functions.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"beforeSubmit\",\n    value: function beforeSubmit() {\n      return _nativePromiseOnly.default.resolve(true);\n    }\n    /**\n     * Return the submission timezone.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"submissionTimezone\",\n    get: function get() {\n      this.options.submissionTimezone = this.options.submissionTimezone || _lodash.default.get(this.root, 'options.submissionTimezone');\n      return this.options.submissionTimezone;\n    }\n  }, {\n    key: \"timezone\",\n    get: function get() {\n      return this.getTimezone(this.component);\n    }\n  }, {\n    key: \"getTimezone\",\n    value: function getTimezone(settings) {\n      if (settings.timezone) {\n        return settings.timezone;\n      }\n\n      if (settings.displayInTimezone === 'utc') {\n        return 'UTC';\n      }\n\n      var submissionTimezone = this.submissionTimezone;\n\n      if (submissionTimezone && (settings.displayInTimezone === 'submission' || (this.options.pdf || this.options.server) && settings.displayInTimezone === 'viewer')) {\n        return submissionTimezone;\n      } // Return current timezone if none are provided.\n\n\n      return (0, FormioUtils.currentTimezone)();\n    }\n  }, {\n    key: \"loadRefs\",\n    value: function loadRefs(element, refs) {\n      for (var ref in refs) {\n        var refType = refs[ref];\n        var isString = typeof refType === 'string';\n        var selector = isString && refType.includes('scope') ? \":scope > [ref=\\\"\".concat(ref, \"\\\"]\") : \"[ref=\\\"\".concat(ref, \"\\\"]\");\n\n        if (isString && refType.startsWith('single')) {\n          this.refs[ref] = element.querySelector(selector);\n        } else {\n          this.refs[ref] = element.querySelectorAll(selector);\n        }\n      }\n    }\n  }, {\n    key: \"setOpenModalElement\",\n    value: function setOpenModalElement(template) {\n      this.componentModal.setOpenModalElement(template || this.getModalPreviewTemplate());\n    }\n  }, {\n    key: \"getModalPreviewTemplate\",\n    value: function getModalPreviewTemplate() {\n      var dataValue = this.component.type === 'password' ? this.dataValue.replace(/./g, '•') : this.dataValue;\n      var message = this.error ? {\n        level: 'error',\n        message: this.error.message\n      } : '';\n      return this.renderTemplate('modalPreview', {\n        previewText: this.getValueAsString(dataValue, {\n          modalPreview: true\n        }) || this.t('Click to set value'),\n        messages: message && this.renderTemplate('message', message)\n      });\n    }\n  }, {\n    key: \"build\",\n    value: function build(element) {\n      element = element || this.element;\n      this.empty(element);\n      this.setContent(element, this.render());\n      return this.attach(element);\n    }\n  }, {\n    key: \"hasModalSaveButton\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var children = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"Unknown component: \".concat(this.component.type);\n      var topLevel = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var isVisible = this.visible;\n      this.rendered = true;\n\n      if (!this.builderMode && !this.previewMode && this.component.modalEdit) {\n        return _ComponentModal.default.render(this, {\n          visible: isVisible,\n          showSaveButton: this.hasModalSaveButton,\n          id: this.id,\n          classes: this.className,\n          styles: this.customStyle,\n          children: children\n        }, topLevel);\n      } else {\n        return this.renderTemplate('component', {\n          visible: isVisible,\n          id: this.id,\n          classes: this.className,\n          styles: this.customStyle,\n          children: children\n        }, topLevel);\n      }\n    }\n  }, {\n    key: \"attachTooltips\",\n    value: function attachTooltips(toolTipsRefs) {\n      var _this6 = this;\n\n      toolTipsRefs === null || toolTipsRefs === void 0 ? void 0 : toolTipsRefs.forEach(function (tooltip, index) {\n        if (tooltip) {\n          var tooltipAttribute = tooltip.getAttribute('data-tooltip');\n          var tooltipDataTitle = tooltip.getAttribute('data-title');\n\n          var tooltipText = _this6.interpolate(tooltipDataTitle || tooltipAttribute).replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n\n          _this6.tooltips[index] = (0, _tippy.default)(tooltip, {\n            allowHTML: true,\n            trigger: 'mouseenter click focus',\n            placement: 'right',\n            zIndex: 10000,\n            interactive: true,\n            content: _this6.t(tooltipText, {\n              _userInput: true\n            })\n          });\n        }\n      });\n    }\n  }, {\n    key: \"createComponentModal\",\n    value: function createComponentModal(element, modalShouldBeOpened, currentValue) {\n      return new _ComponentModal.default(this, element, modalShouldBeOpened, currentValue);\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      if (!this.builderMode && !this.previewMode && this.component.modalEdit) {\n        var modalShouldBeOpened = this.componentModal ? this.componentModal.isOpened : false;\n        var currentValue = modalShouldBeOpened ? this.componentModal.currentValue : this.dataValue;\n        var openModalTemplate = this.componentModal && modalShouldBeOpened ? this.componentModal.openModalTemplate : null;\n        this.componentModal = this.createComponentModal(element, modalShouldBeOpened, currentValue);\n        this.setOpenModalElement(openModalTemplate);\n      }\n\n      this.attached = true;\n      this.element = element;\n      element.component = this; // If this already has an id, get it from the dom. If SSR, it could be different from the initiated id.\n\n      if (this.element.id) {\n        this.id = this.element.id;\n        this.component.id = this.id;\n      }\n\n      this.loadRefs(element, {\n        messageContainer: 'single',\n        tooltip: 'multiple'\n      });\n      this.attachTooltips(this.refs.tooltip); // Attach logic.\n\n      this.attachLogic();\n      this.autofocus(); // Allow global attach.\n\n      this.hook('attachComponent', element, this); // Allow attach per component type.\n\n      var type = this.component.type;\n\n      if (type) {\n        this.hook(\"attach\".concat(type.charAt(0).toUpperCase() + type.substring(1, type.length)), element, this);\n      }\n\n      this.restoreFocus();\n      this.addons.forEach(function (addon) {\n        return addon.attach(element);\n      });\n      return _nativePromiseOnly.default.resolve();\n    }\n  }, {\n    key: \"restoreFocus\",\n    value: function restoreFocus() {\n      var _this$root2, _this$root2$focusedCo;\n\n      var isFocused = ((_this$root2 = this.root) === null || _this$root2 === void 0 ? void 0 : (_this$root2$focusedCo = _this$root2.focusedComponent) === null || _this$root2$focusedCo === void 0 ? void 0 : _this$root2$focusedCo.path) === this.path;\n\n      if (isFocused) {\n        var _this$root$currentSel;\n\n        this.loadRefs(this.element, {\n          input: 'multiple'\n        });\n        this.focus((_this$root$currentSel = this.root.currentSelection) === null || _this$root$currentSel === void 0 ? void 0 : _this$root$currentSel.index);\n        this.restoreCaretPosition();\n      }\n    }\n  }, {\n    key: \"addShortcut\",\n    value: function addShortcut(element, shortcut) {\n      // Avoid infinite recursion.\n      if (!element || !this.root || this.root === this) {\n        return;\n      }\n\n      if (!shortcut) {\n        shortcut = this.component.shortcut;\n      }\n\n      this.root.addShortcut(element, shortcut);\n    }\n  }, {\n    key: \"removeShortcut\",\n    value: function removeShortcut(element, shortcut) {\n      // Avoid infinite recursion.\n      if (!element || this.root === this) {\n        return;\n      }\n\n      if (!shortcut) {\n        shortcut = this.component.shortcut;\n      }\n\n      this.root.removeShortcut(element, shortcut);\n    }\n    /**\n     * Remove all event handlers.\n     */\n\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      this.refs = {};\n      this.removeEventListeners();\n      this.detachLogic();\n\n      if (this.tooltip) {\n        this.tooltip.destroy();\n      }\n    }\n  }, {\n    key: \"checkRefresh\",\n    value: function checkRefresh(refreshData, changed, flags) {\n      var changePath = _lodash.default.get(changed, 'instance.path', false); // Don't let components change themselves.\n\n\n      if (changePath && this.path === changePath) {\n        return;\n      }\n\n      if (refreshData === 'data') {\n        this.refresh(this.data, changed, flags);\n      } else if (changePath && (0, FormioUtils.getComponentPath)(changed.instance) === refreshData && changed && changed.instance && // Make sure the changed component is not in a different \"context\". Solves issues where refreshOn being set\n      // in fields inside EditGrids could alter their state from other rows (which is bad).\n      this.inContext(changed.instance)) {\n        this.refresh(changed.value, changed, flags);\n      }\n    }\n  }, {\n    key: \"checkRefreshOn\",\n    value: function checkRefreshOn(changes) {\n      var _this7 = this;\n\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      changes = changes || [];\n\n      if (flags.noRefresh) {\n        return;\n      }\n\n      if (!changes.length && flags.changed) {\n        changes = [flags.changed];\n      }\n\n      var refreshOn = flags.fromBlur ? this.component.refreshOnBlur : this.component.refreshOn || this.component.redrawOn; // If they wish to refresh on a value, then add that here.\n\n      if (refreshOn) {\n        if (Array.isArray(refreshOn)) {\n          refreshOn.forEach(function (refreshData) {\n            return changes.forEach(function (changed) {\n              return _this7.checkRefresh(refreshData, changed, flags);\n            });\n          });\n        } else {\n          changes.forEach(function (changed) {\n            return _this7.checkRefresh(refreshOn, changed, flags);\n          });\n        }\n      }\n    }\n    /**\n     * Refreshes the component with a new value.\n     *\n     * @param value\n     */\n\n  }, {\n    key: \"refresh\",\n    value: function refresh(value) {\n      if (this.hasOwnProperty('refreshOnValue')) {\n        this.refreshOnChanged = !_lodash.default.isEqual(value, this.refreshOnValue);\n      } else {\n        this.refreshOnChanged = true;\n      }\n\n      this.refreshOnValue = (0, FormioUtils.fastCloneDeep)(value);\n\n      if (this.refreshOnChanged) {\n        if (this.component.clearOnRefresh) {\n          this.setValue(null);\n        }\n\n        this.triggerRedraw();\n      }\n    }\n    /**\n     * Checks to see if a separate component is in the \"context\" of this component. This is determined by first checking\n     * if they share the same \"data\" object. It will then walk up the parent tree and compare its parents data objects\n     * with the components data and returns true if they are in the same context.\n     *\n     * Different rows of the same EditGrid, for example, are in different contexts.\n     *\n     * @param component\n     */\n\n  }, {\n    key: \"inContext\",\n    value: function inContext(component) {\n      if (component.data === this.data) {\n        return true;\n      }\n\n      var parent = this.parent;\n\n      while (parent) {\n        if (parent.data === component.data) {\n          return true;\n        }\n\n        parent = parent.parent;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"viewOnly\",\n    get: function get() {\n      return this.options.readOnly && this.options.viewAsHtml;\n    }\n  }, {\n    key: \"createViewOnlyElement\",\n    value: function createViewOnlyElement() {\n      this.element = this.ce('dl', {\n        id: this.id\n      });\n\n      if (this.element) {\n        // Ensure you can get the component info from the element.\n        this.element.component = this;\n      }\n\n      return this.element;\n    }\n  }, {\n    key: \"defaultViewOnlyValue\",\n    get: function get() {\n      return '-';\n    }\n    /**\n     * Uses the widget to determine the output string.\n     *\n     * @param value\n     * @return {*}\n     */\n\n  }, {\n    key: \"getWidgetValueAsString\",\n    value: function getWidgetValueAsString(value, options) {\n      var _this8 = this;\n\n      var noInputWidget = !this.refs.input || !this.refs.input[0] || !this.refs.input[0].widget;\n\n      if (!value || noInputWidget) {\n        if (!this.widget || !value) {\n          return value;\n        } else {\n          return this.widget.getValueAsString(value);\n        }\n      }\n\n      if (Array.isArray(value)) {\n        var values = [];\n        value.forEach(function (val, index) {\n          var widget = _this8.refs.input[index] && _this8.refs.input[index].widget;\n\n          if (widget) {\n            values.push(widget.getValueAsString(val, options));\n          }\n        });\n        return values;\n      }\n\n      var widget = this.refs.input[0].widget;\n      return widget.getValueAsString(value, options);\n    }\n  }, {\n    key: \"getValueAsString\",\n    value: function getValueAsString(value, options) {\n      if (!value) {\n        return '';\n      }\n\n      value = this.getWidgetValueAsString(value, options);\n\n      if (Array.isArray(value)) {\n        return value.join(', ');\n      }\n\n      if (_lodash.default.isPlainObject(value)) {\n        return JSON.stringify(value);\n      }\n\n      if (value === null || value === undefined) {\n        return '';\n      }\n\n      var stringValue = value.toString();\n      return this.sanitize(stringValue);\n    }\n  }, {\n    key: \"getView\",\n    value: function getView(value, options) {\n      if (this.component.protected) {\n        return '--- PROTECTED ---';\n      }\n\n      return this.getValueAsString(value, options);\n    }\n  }, {\n    key: \"updateItems\",\n    value: function updateItems() {\n      this.restoreValue();\n      this.onChange.apply(this, arguments);\n    }\n    /**\n     * @param {*} data\n     * @param {boolean} [forceUseValue=false] - if true, return 'value' property of the data\n     * @return {*}\n     */\n\n  }, {\n    key: \"itemValue\",\n    value: function itemValue(data) {\n      var forceUseValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (_lodash.default.isObject(data)) {\n        if (this.valueProperty) {\n          return _lodash.default.get(data, this.valueProperty);\n        }\n\n        if (forceUseValue) {\n          return data.value;\n        }\n      }\n\n      return data;\n    }\n  }, {\n    key: \"itemValueForHTMLMode\",\n    value: function itemValueForHTMLMode(value) {\n      var _this9 = this;\n\n      if (Array.isArray(value)) {\n        var values = value.map(function (item) {\n          return Array.isArray(item) ? _this9.itemValueForHTMLMode(item) : _this9.itemValue(item);\n        });\n        return values.join(', ');\n      }\n\n      return this.itemValue(value);\n    }\n  }, {\n    key: \"createModal\",\n    value: function createModal(element, attr, confirm) {\n      var _this10 = this;\n\n      var dialog = this.ce('div', attr || {});\n      this.setContent(dialog, this.renderTemplate('dialog')); // Add refs to dialog, not \"this\".\n\n      dialog.refs = {};\n      this.loadRefs.call(dialog, dialog, {\n        dialogOverlay: 'single',\n        dialogContents: 'single',\n        dialogClose: 'single'\n      });\n      dialog.refs.dialogContents.appendChild(element);\n      document.body.appendChild(dialog);\n      document.body.classList.add('modal-open');\n\n      dialog.close = function () {\n        document.body.classList.remove('modal-open');\n        dialog.dispatchEvent(new CustomEvent('close'));\n      };\n\n      this.addEventListener(dialog, 'close', function () {\n        return _this10.removeChildFrom(dialog, document.body);\n      });\n\n      var close = function close(event) {\n        event.preventDefault();\n        dialog.close();\n      };\n\n      var handleCloseClick = function handleCloseClick(e) {\n        if (confirm) {\n          confirm().then(function () {\n            return close(e);\n          }).catch(function () {});\n        } else {\n          close(e);\n        }\n      };\n\n      this.addEventListener(dialog.refs.dialogOverlay, 'click', handleCloseClick);\n      this.addEventListener(dialog.refs.dialogClose, 'click', handleCloseClick);\n      return dialog;\n    }\n  }, {\n    key: \"optimizeRedraw\",\n    get: function get() {\n      if (this.options.optimizeRedraw && this.element && !this.visible) {\n        this.addClass(this.element, 'formio-removed');\n        return true;\n      }\n\n      return false;\n    }\n    /**\n     * Retrieves the CSS class name of this component.\n     * @returns {string} - The class name of this component.\n     */\n\n  }, {\n    key: \"className\",\n    get: function get() {\n      var className = this.hasInput ? 'form-group has-feedback ' : '';\n      className += \"formio-component formio-component-\".concat(this.component.type, \" \"); // TODO: find proper way to avoid overriding of default type-based component styles\n\n      if (this.key && this.key !== 'form') {\n        className += \"formio-component-\".concat(this.key, \" \");\n      }\n\n      if (this.component.multiple) {\n        className += 'formio-component-multiple ';\n      }\n\n      if (this.component.customClass) {\n        className += this.component.customClass;\n      }\n\n      if (this.hasInput && this.component.validate && (0, FormioUtils.boolValue)(this.component.validate.required)) {\n        className += ' required';\n      }\n\n      if (this.labelIsHidden()) {\n        className += ' formio-component-label-hidden';\n      }\n\n      if (!this.visible) {\n        className += ' formio-hidden';\n      }\n\n      return className;\n    }\n    /**\n     * Build the custom style from the layout values\n     * @return {string} - The custom style\n     */\n\n  }, {\n    key: \"customStyle\",\n    get: function get() {\n      var customCSS = '';\n\n      _lodash.default.each(this.component.style, function (value, key) {\n        if (value !== '') {\n          customCSS += \"\".concat(key, \":\").concat(value, \";\");\n        }\n      });\n\n      return customCSS;\n    }\n  }, {\n    key: \"isMobile\",\n    get: function get() {\n      return (0, _ismobilejs.default)();\n    }\n    /**\n     * Returns the outside wrapping element of this component.\n     * @returns {HTMLElement}\n     */\n\n  }, {\n    key: \"getElement\",\n    value: function getElement() {\n      return this.element;\n    }\n    /**\n     * Create an evaluation context for all script executions and interpolations.\n     *\n     * @param additional\n     * @return {*}\n     */\n\n  }, {\n    key: \"evalContext\",\n    value: function evalContext(additional) {\n      return _get(_getPrototypeOf(Component.prototype), \"evalContext\", this).call(this, Object.assign({\n        component: this.component,\n        row: this.data,\n        rowIndex: this.rowIndex,\n        data: this.rootValue,\n        iconClass: this.iconClass.bind(this),\n        // Bind the translate function to the data context of any interpolated string.\n        // It is useful to translate strings in different scenarions (eg: custom edit grid templates, custom error messages etc.)\n        // and desirable to be publicly available rather than calling the internal {instance.t} function in the template string.\n        t: this.t.bind(this),\n        submission: this.root ? this.root._submission : {\n          data: this.rootValue\n        },\n        form: this.root ? this.root._form : {},\n        options: this.options\n      }, additional));\n    }\n    /**\n     * Sets the pristine flag for this component.\n     *\n     * @param pristine {boolean} - TRUE to make pristine, FALSE not pristine.\n     */\n\n  }, {\n    key: \"setPristine\",\n    value: function setPristine(pristine) {\n      this.pristine = pristine;\n    }\n  }, {\n    key: \"isPristine\",\n    get: function get() {\n      return this.pristine;\n    }\n  }, {\n    key: \"setDirty\",\n    value: function setDirty(dirty) {\n      this.dirty = dirty;\n    }\n  }, {\n    key: \"isDirty\",\n    get: function get() {\n      return this.dirty;\n    }\n    /**\n     * Removes a value out of the data array and rebuild the rows.\n     * @param {number} index - The index of the data element to remove.\n     */\n\n  }, {\n    key: \"removeValue\",\n    value: function removeValue(index) {\n      this.splice(index);\n      this.redraw();\n      this.restoreValue();\n      this.triggerRootChange();\n    }\n  }, {\n    key: \"iconClass\",\n    value: function iconClass(name, spinning) {\n      var iconset = this.options.iconset || Templates.current.defaultIconset || 'fa';\n      return Templates.current.hasOwnProperty('iconClass') ? Templates.current.iconClass(iconset, name, spinning) : this.options.iconset === 'fa' ? Templates.defaultTemplates.iconClass(iconset, name, spinning) : name;\n    }\n  }, {\n    key: \"size\",\n    value: function size(_size) {\n      return Templates.current.hasOwnProperty('size') ? Templates.current.size(_size) : _size;\n    }\n    /**\n     * The readible name for this component.\n     * @returns {string} - The name of the component.\n     */\n\n  }, {\n    key: \"name\",\n    get: function get() {\n      return this.t(this.component.label || this.component.placeholder || this.key, {\n        _userInput: true\n      });\n    }\n    /**\n     * Returns the error label for this component.\n     * @return {*}\n     */\n\n  }, {\n    key: \"errorLabel\",\n    get: function get() {\n      return this.t(this.component.errorLabel || this.component.label || this.component.placeholder || this.key);\n    }\n    /**\n     * Get the error message provided a certain type of error.\n     * @param type\n     * @return {*}\n     */\n\n  }, {\n    key: \"errorMessage\",\n    value: function errorMessage(type) {\n      return this.component.errors && this.component.errors[type] ? this.component.errors[type] : type;\n    }\n  }, {\n    key: \"setContent\",\n    value: function setContent(element, content, forceSanitize, sanitizeOptions) {\n      if (element instanceof HTMLElement) {\n        element.innerHTML = this.sanitize(content, forceSanitize, sanitizeOptions);\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"restoreCaretPosition\",\n    value: function restoreCaretPosition() {\n      var _this$root3;\n\n      if ((_this$root3 = this.root) !== null && _this$root3 !== void 0 && _this$root3.currentSelection) {\n        var _this$refs$input;\n\n        if ((_this$refs$input = this.refs.input) !== null && _this$refs$input !== void 0 && _this$refs$input.length) {\n          var _this$root$currentSel2 = this.root.currentSelection,\n              selection = _this$root$currentSel2.selection,\n              index = _this$root$currentSel2.index;\n          var input = this.refs.input[index];\n          var isInputRangeSelectable = /text|search|password|tel|url/i.test(input.type || '');\n\n          if (input) {\n            if (isInputRangeSelectable) {\n              var _input;\n\n              (_input = input).setSelectionRange.apply(_input, _toConsumableArray(selection));\n            }\n          } else {\n            var _input$value;\n\n            input = this.refs.input[this.refs.input.length];\n            var lastCharacter = ((_input$value = input.value) === null || _input$value === void 0 ? void 0 : _input$value.length) || 0;\n\n            if (isInputRangeSelectable) {\n              input.setSelectionRange(lastCharacter, lastCharacter);\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      // Don't bother if we have not built yet.\n      if (!this.element || !this.element.parentNode || this.optimizeRedraw) {\n        // Return a non-resolving promise.\n        return _nativePromiseOnly.default.resolve();\n      }\n\n      this.detach();\n      this.emit('redraw'); // Since we are going to replace the element, we need to know it's position so we can find it in the parent's children.\n\n      var parent = this.element.parentNode;\n      var index = Array.prototype.indexOf.call(parent.children, this.element);\n      this.element.outerHTML = this.sanitize(this.render());\n      this.element = parent.children[index];\n      return this.attach(this.element);\n    }\n  }, {\n    key: \"rebuild\",\n    value: function rebuild() {\n      this.destroy();\n      this.init();\n      this.visible = this.conditionallyVisible(null, null);\n      return this.redraw();\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners() {\n      _get(_getPrototypeOf(Component.prototype), \"removeEventListeners\", this).call(this);\n\n      this.tooltips.forEach(function (tooltip) {\n        return tooltip.destroy();\n      });\n      this.tooltips = [];\n    }\n  }, {\n    key: \"hasClass\",\n    value: function hasClass(element, className) {\n      if (!element) {\n        return;\n      }\n\n      return _get(_getPrototypeOf(Component.prototype), \"hasClass\", this).call(this, element, this.transform('class', className));\n    }\n  }, {\n    key: \"addClass\",\n    value: function addClass(element, className) {\n      if (!element) {\n        return;\n      }\n\n      return _get(_getPrototypeOf(Component.prototype), \"addClass\", this).call(this, element, this.transform('class', className));\n    }\n  }, {\n    key: \"removeClass\",\n    value: function removeClass(element, className) {\n      if (!element) {\n        return;\n      }\n\n      return _get(_getPrototypeOf(Component.prototype), \"removeClass\", this).call(this, element, this.transform('class', className));\n    }\n    /**\n     * Determines if this component has a condition defined.\n     *\n     * @return {null}\n     */\n\n  }, {\n    key: \"hasCondition\",\n    value: function hasCondition() {\n      if (this._hasCondition !== null) {\n        return this._hasCondition;\n      }\n\n      this._hasCondition = FormioUtils.hasCondition(this.component);\n      return this._hasCondition;\n    }\n    /**\n     * Check if this component is conditionally visible.\n     *\n     * @param data\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"conditionallyVisible\",\n    value: function conditionallyVisible(data, row) {\n      data = data || this.rootValue;\n      row = row || this.data;\n\n      if (this.builderMode || this.previewMode || !this.hasCondition()) {\n        return !this.component.hidden;\n      }\n\n      data = data || (this.root ? this.root.data : {});\n      return this.checkCondition(row, data);\n    }\n    /**\n     * Checks the condition of this component.\n     *\n     * TODO: Switch row and data parameters to be consistent with other methods.\n     *\n     * @param row - The row contextual data.\n     * @param data - The global data object.\n     * @return {boolean} - True if the condition applies to this component.\n     */\n\n  }, {\n    key: \"checkCondition\",\n    value: function checkCondition(row, data) {\n      return FormioUtils.checkCondition(this.component, row || this.data, data || this.rootValue, this.root ? this.root._form : {}, this);\n    }\n    /**\n     * Check for conditionals and hide/show the element based on those conditions.\n     */\n\n  }, {\n    key: \"checkComponentConditions\",\n    value: function checkComponentConditions(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data;\n\n      if (!this.builderMode & !this.previewMode && this.fieldLogic(data, row)) {\n        this.redraw();\n      } // Check advanced conditions\n\n\n      var visible = this.conditionallyVisible(data, row);\n\n      if (this.visible !== visible) {\n        this.visible = visible;\n      }\n\n      return visible;\n    }\n    /**\n     * Checks conditions for this component and any sub components.\n     * @param args\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"checkConditions\",\n    value: function checkConditions(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data;\n      return this.checkComponentConditions(data, flags, row);\n    }\n  }, {\n    key: \"logic\",\n    get: function get() {\n      return this.component.logic || [];\n    }\n    /**\n     * Check all triggers and apply necessary actions.\n     *\n     * @param data\n     */\n\n  }, {\n    key: \"fieldLogic\",\n    value: function fieldLogic(data, row) {\n      var _this11 = this;\n\n      data = data || this.rootValue;\n      row = row || this.data;\n      var logics = this.logic; // If there aren't logic, don't go further.\n\n      if (logics.length === 0) {\n        return;\n      }\n\n      var newComponent = (0, FormioUtils.fastCloneDeep)(this.originalComponent);\n      var changed = logics.reduce(function (changed, logic) {\n        var result = FormioUtils.checkTrigger(newComponent, logic.trigger, row, data, _this11.root ? _this11.root._form : {}, _this11);\n        return (result ? _this11.applyActions(newComponent, logic.actions, result, row, data) : false) || changed;\n      }, false); // If component definition changed, replace and mark as changed.\n\n      if (!_lodash.default.isEqual(this.component, newComponent)) {\n        this.component = newComponent;\n        changed = true;\n        var disabled = this.shouldDisabled; // Change disabled state if it has changed\n\n        if (this.disabled !== disabled) {\n          this.disabled = disabled;\n        }\n      }\n\n      return changed;\n    }\n  }, {\n    key: \"isIE\",\n    value: function isIE() {\n      if (typeof window === 'undefined') {\n        return false;\n      }\n\n      var userAgent = window.navigator.userAgent;\n      var msie = userAgent.indexOf('MSIE ');\n\n      if (msie > 0) {\n        // IE 10 or older => return version number\n        return parseInt(userAgent.substring(msie + 5, userAgent.indexOf('.', msie)), 10);\n      }\n\n      var trident = userAgent.indexOf('Trident/');\n\n      if (trident > 0) {\n        // IE 11 => return version number\n        var rv = userAgent.indexOf('rv:');\n        return parseInt(userAgent.substring(rv + 3, userAgent.indexOf('.', rv)), 10);\n      }\n\n      var edge = userAgent.indexOf('Edge/');\n\n      if (edge > 0) {\n        // IE 12 (aka Edge) => return version number\n        return parseInt(userAgent.substring(edge + 5, userAgent.indexOf('.', edge)), 10);\n      } // other browser\n\n\n      return false;\n    }\n  }, {\n    key: \"defineActionValue\",\n    value: function defineActionValue(action, argsObject) {\n      return this.evaluate(action.value, argsObject, 'value');\n    }\n  }, {\n    key: \"applyActions\",\n    value: function applyActions(newComponent, actions, result, row, data) {\n      var _this12 = this;\n\n      data = data || this.rootValue;\n      row = row || this.data;\n      return actions.reduce(function (changed, action) {\n        switch (action.type) {\n          case 'property':\n            {\n              FormioUtils.setActionProperty(newComponent, action, result, row, data, _this12);\n              var property = action.property.value;\n\n              if (!_lodash.default.isEqual(_lodash.default.get(_this12.component, property), _lodash.default.get(newComponent, property))) {\n                changed = true;\n              }\n\n              break;\n            }\n\n          case 'value':\n            {\n              var oldValue = _this12.getValue();\n\n              var newValue = _this12.defineActionValue(action, {\n                value: _lodash.default.clone(oldValue),\n                data: data,\n                row: row,\n                component: newComponent,\n                result: result\n              });\n\n              if (!_lodash.default.isEqual(oldValue, newValue)) {\n                _this12.setValue(newValue);\n\n                if (_this12.viewOnly) {\n                  _this12.dataValue = newValue;\n                }\n\n                changed = true;\n              }\n\n              break;\n            }\n\n          case 'mergeComponentSchema':\n            {\n              var schema = _this12.evaluate(action.schemaDefinition, {\n                value: _lodash.default.clone(_this12.getValue()),\n                data: data,\n                row: row,\n                component: newComponent,\n                result: result\n              }, 'schema');\n\n              _lodash.default.assign(newComponent, schema);\n\n              if (!_lodash.default.isEqual(_this12.component, newComponent)) {\n                changed = true;\n              }\n\n              break;\n            }\n\n          case 'customAction':\n            {\n              var _oldValue = _this12.getValue();\n\n              var _newValue = _this12.evaluate(action.customAction, {\n                value: _lodash.default.clone(_oldValue),\n                data: data,\n                row: row,\n                input: _oldValue,\n                component: newComponent,\n                result: result\n              }, 'value');\n\n              if (!_lodash.default.isEqual(_oldValue, _newValue)) {\n                _this12.setValue(_newValue);\n\n                if (_this12.viewOnly) {\n                  _this12.dataValue = _newValue;\n                }\n\n                changed = true;\n              }\n\n              break;\n            }\n        }\n\n        return changed;\n      }, false);\n    } // Deprecated\n\n  }, {\n    key: \"addInputError\",\n    value: function addInputError(message, dirty, elements) {\n      this.addMessages(message);\n      this.setErrorClasses(elements, dirty, !!message);\n    } // Deprecated\n\n  }, {\n    key: \"removeInputError\",\n    value: function removeInputError(elements) {\n      this.setErrorClasses(elements, true, false);\n    }\n    /**\n     * Add a new input error to this element.\n     *\n     * @param message\n     * @param dirty\n     */\n\n  }, {\n    key: \"addMessages\",\n    value: function addMessages(messages) {\n      var _this13 = this;\n\n      if (!messages) {\n        return;\n      } // Standardize on array of objects for message.\n\n\n      if (typeof messages === 'string') {\n        messages = {\n          messages: messages,\n          level: 'error'\n        };\n      }\n\n      if (!Array.isArray(messages)) {\n        messages = [messages];\n      }\n\n      messages = _lodash.default.uniqBy(messages, function (message) {\n        return message.message;\n      });\n\n      if (this.refs.messageContainer) {\n        this.setContent(this.refs.messageContainer, messages.map(function (message) {\n          return _this13.renderTemplate('message', message);\n        }).join(''));\n      }\n    }\n  }, {\n    key: \"setErrorClasses\",\n    value: function setErrorClasses(elements, dirty, hasErrors, hasMessages) {\n      var _this14 = this;\n\n      var element = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.element;\n      this.clearErrorClasses();\n      elements.forEach(function (element) {\n        _this14.setElementInvalid(_this14.performInputMapping(element), false);\n      });\n      this.setInputWidgetErrorClasses(elements, hasErrors);\n\n      if (hasErrors) {\n        // Add error classes\n        elements.forEach(function (input) {\n          _this14.setElementInvalid(_this14.performInputMapping(input), true);\n        });\n\n        if (dirty && this.options.highlightErrors) {\n          this.addClass(element, this.options.componentErrorClass);\n        } else {\n          this.addClass(element, 'has-error');\n        }\n      }\n\n      if (hasMessages) {\n        this.addClass(element, 'has-message');\n      }\n    }\n  }, {\n    key: \"setElementInvalid\",\n    value: function setElementInvalid(element, invalid) {\n      if (!element) return;\n\n      if (invalid) {\n        this.addClass(element, 'is-invalid');\n      } else {\n        this.removeClass(element, 'is-invalid');\n      }\n\n      element.setAttribute('aria-invalid', invalid ? 'true' : 'false');\n    }\n  }, {\n    key: \"clearOnHide\",\n    value: function clearOnHide() {\n      // clearOnHide defaults to true for old forms (without the value set) so only trigger if the value is false.\n      if ( // if change happens inside EditGrid's row, it doesn't trigger change on the root level, so rootPristine will be true\n      (!this.rootPristine || this.options.server || (0, FormioUtils.isInsideScopingComponent)(this)) && this.component.clearOnHide !== false && !this.options.readOnly && !this.options.showHiddenFields) {\n        if (!this.visible) {\n          this.deleteValue();\n        } else if (!this.hasValue() && this.shouldAddDefaultValue) {\n          // If shown, ensure the default is set.\n          this.setValue(this.defaultValue, {\n            noUpdateEvent: true\n          });\n        }\n      }\n    }\n  }, {\n    key: \"triggerRootChange\",\n    value: function triggerRootChange() {\n      if (this.options.onChange) {\n        var _this$options2;\n\n        (_this$options2 = this.options).onChange.apply(_this$options2, arguments);\n      } else if (this.root) {\n        var _this$root4;\n\n        (_this$root4 = this.root).triggerChange.apply(_this$root4, arguments);\n      }\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(flags, fromRoot) {\n      flags = flags || {};\n\n      if (flags.modified) {\n        if (!flags.noPristineChangeOnModified) {\n          this.pristine = false;\n        }\n\n        this.addClass(this.getElement(), 'formio-modified');\n      } // If we are supposed to validate on blur, then don't trigger validation yet.\n\n\n      if (this.component.validateOn === 'blur' && !this.errors.length) {\n        flags.noValidate = true;\n      }\n\n      if (this.component.onChange) {\n        this.evaluate(this.component.onChange, {\n          flags: flags\n        });\n      } // Set the changed variable.\n\n\n      var changed = {\n        instance: this,\n        component: this.component,\n        value: this.dataValue,\n        flags: flags\n      }; // Emit the change.\n\n      this.emit('componentChange', changed); // Do not propogate the modified flag.\n\n      var modified = false;\n\n      if (flags.modified) {\n        modified = true;\n        delete flags.modified;\n      } // Bubble this change up to the top.\n\n\n      if (!fromRoot) {\n        this.triggerRootChange(flags, changed, modified);\n      }\n\n      return changed;\n    }\n  }, {\n    key: \"wysiwygDefault\",\n    get: function get() {\n      return {\n        quill: {\n          theme: 'snow',\n          placeholder: this.t(this.component.placeholder, {\n            _userInput: true\n          }),\n          modules: {\n            toolbar: [[{\n              'size': ['small', false, 'large', 'huge']\n            }], // custom dropdown\n            [{\n              'header': [1, 2, 3, 4, 5, 6, false]\n            }], [{\n              'font': []\n            }], ['bold', 'italic', 'underline', 'strike', {\n              'script': 'sub'\n            }, {\n              'script': 'super'\n            }, 'clean'], [{\n              'color': []\n            }, {\n              'background': []\n            }], [{\n              'list': 'ordered'\n            }, {\n              'list': 'bullet'\n            }, {\n              'indent': '-1'\n            }, {\n              'indent': '+1'\n            }, {\n              'align': []\n            }], ['blockquote', 'code-block'], ['link', 'image', 'video', 'formula', 'source']]\n          }\n        },\n        ace: {\n          theme: 'ace/theme/xcode',\n          maxLines: 12,\n          minLines: 12,\n          tabSize: 2,\n          mode: 'ace/mode/javascript',\n          placeholder: this.t(this.component.placeholder, {\n            _userInput: true\n          })\n        },\n        ckeditor: {\n          image: {\n            toolbar: ['imageTextAlternative', '|', 'imageStyle:full', 'imageStyle:alignLeft', 'imageStyle:alignCenter', 'imageStyle:alignRight'],\n            styles: ['full', 'alignLeft', 'alignCenter', 'alignRight']\n          },\n          extraPlugins: []\n        },\n        default: {}\n      };\n    }\n  }, {\n    key: \"addCKE\",\n    value: function addCKE(element, settings, onChange) {\n      settings = _lodash.default.isEmpty(settings) ? {} : settings;\n      settings.base64Upload = this.component.isUploadEnabled ? false : true;\n      settings.mediaEmbed = {\n        previewsInData: true\n      };\n      settings = _lodash.default.merge(this.wysiwygDefault.ckeditor, _lodash.default.get(this.options, 'editors.ckeditor.settings', {}), settings);\n\n      if (this.component.isUploadEnabled) {\n        settings.extraPlugins.push((0, _uploadAdapter.getFormioUploadAdapterPlugin)(this.fileService, this));\n      }\n\n      return _Formio.GlobalFormio.requireLibrary('ckeditor', isIEBrowser ? 'CKEDITOR' : 'ClassicEditor', _lodash.default.get(this.options, 'editors.ckeditor.src', \"\".concat(_Formio.GlobalFormio.cdn.ckeditor, \"/ckeditor.js\")), true).then(function () {\n        if (!element.parentNode) {\n          return _nativePromiseOnly.default.reject();\n        }\n\n        if (isIEBrowser) {\n          var editor = CKEDITOR.replace(element);\n          editor.on('change', function () {\n            return onChange(editor.getData());\n          });\n          return _nativePromiseOnly.default.resolve(editor);\n        } else {\n          return ClassicEditor.create(element, settings).then(function (editor) {\n            editor.model.document.on('change', function () {\n              return onChange(editor.data.get());\n            });\n            return editor;\n          });\n        }\n      });\n    }\n  }, {\n    key: \"addQuill\",\n    value: function addQuill(element, settings, onChange) {\n      var _this15 = this;\n\n      settings = _lodash.default.isEmpty(settings) ? this.wysiwygDefault.quill : settings;\n      settings = _lodash.default.merge(this.wysiwygDefault.quill, _lodash.default.get(this.options, 'editors.quill.settings', {}), settings);\n      settings = _objectSpread(_objectSpread({}, settings), {}, {\n        modules: _objectSpread({\n          table: true\n        }, settings.modules)\n      }); // Lazy load the quill css.\n\n      _Formio.GlobalFormio.requireLibrary(\"quill-css-\".concat(settings.theme), 'Quill', [{\n        type: 'styles',\n        src: \"\".concat(_Formio.GlobalFormio.cdn.quill, \"/quill.\").concat(settings.theme, \".css\")\n      }], true); // Lazy load the quill library.\n\n\n      return _Formio.GlobalFormio.requireLibrary('quill', 'Quill', _lodash.default.get(this.options, 'editors.quill.src', \"\".concat(_Formio.GlobalFormio.cdn.quill, \"/quill.min.js\")), true).then(function () {\n        return _Formio.GlobalFormio.requireLibrary('quill-table', 'Quill', \"\".concat(_Formio.GlobalFormio.cdn.baseUrl, \"/quill/quill-table.js\"), true).then(function () {\n          if (!element.parentNode) {\n            return _nativePromiseOnly.default.reject();\n          }\n\n          _this15.quill = new Quill(element, isIEBrowser ? _objectSpread(_objectSpread({}, settings), {}, {\n            modules: {}\n          }) : settings);\n          /** This block of code adds the [source] capabilities.  See https://codepen.io/anon/pen/ZyEjrQ **/\n\n          var txtArea = document.createElement('textarea');\n          txtArea.setAttribute('class', 'quill-source-code');\n\n          _this15.quill.addContainer('ql-custom').appendChild(txtArea);\n\n          var qlSource = element.parentNode.querySelector('.ql-source');\n\n          if (qlSource) {\n            _this15.addEventListener(qlSource, 'click', function (event) {\n              event.preventDefault();\n\n              if (txtArea.style.display === 'inherit') {\n                _this15.quill.setContents(_this15.quill.clipboard.convert({\n                  html: txtArea.value\n                }));\n              }\n\n              txtArea.style.display = txtArea.style.display === 'none' ? 'inherit' : 'none';\n            });\n          }\n          /** END CODEBLOCK **/\n          // Make sure to select cursor when they click on the element.\n\n\n          _this15.addEventListener(element, 'click', function () {\n            return _this15.quill.focus();\n          }); // Allows users to skip toolbar items when tabbing though form\n\n\n          var elm = document.querySelectorAll('.ql-formats > button');\n\n          for (var i = 0; i < elm.length; i++) {\n            elm[i].setAttribute('tabindex', '-1');\n          }\n\n          _this15.quill.on('text-change', function () {\n            txtArea.value = _this15.quill.root.innerHTML;\n            onChange(txtArea);\n          });\n\n          return _this15.quill;\n        });\n      });\n    }\n  }, {\n    key: \"shouldSanitizeValue\",\n    get: function get() {\n      var _this$options3;\n\n      // Sanitize value if sanitizing for thw whole content is turned off\n      return ((_this$options3 = this.options) === null || _this$options3 === void 0 ? void 0 : _this$options3.sanitize) !== false;\n    }\n  }, {\n    key: \"addAce\",\n    value: function addAce(element, settings, onChange) {\n      if (!settings || settings.theme === 'snow') {\n        var mode = settings ? settings.mode : '';\n        settings = {};\n\n        if (mode) {\n          settings.mode = mode;\n        }\n      }\n\n      settings = _lodash.default.merge(this.wysiwygDefault.ace, _lodash.default.get(this.options, 'editors.ace.settings', {}), settings || {});\n      return _Formio.GlobalFormio.requireLibrary('ace', 'ace', _lodash.default.get(this.options, 'editors.ace.src', \"\".concat(_Formio.GlobalFormio.cdn.ace, \"/ace.js\")), true).then(function (editor) {\n        editor = editor.edit(element);\n        editor.removeAllListeners('change');\n        editor.setOptions(settings);\n        editor.getSession().setMode(settings.mode);\n        editor.on('change', function () {\n          return onChange(editor.getValue());\n        });\n\n        if (settings.isUseWorkerDisabled) {\n          editor.session.setUseWorker(false);\n        }\n\n        return editor;\n      });\n    }\n  }, {\n    key: \"tree\",\n    get: function get() {\n      return this.component.tree || false;\n    }\n    /**\n     * The empty value for this component.\n     *\n     * @return {null}\n     */\n\n  }, {\n    key: \"emptyValue\",\n    get: function get() {\n      return null;\n    }\n    /**\n     * Returns if this component has a value set.\n     *\n     */\n\n  }, {\n    key: \"hasValue\",\n    value: function hasValue(data) {\n      return _lodash.default.has(data || this.data, this.key);\n    }\n    /**\n     * Get the data value at the root level.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"rootValue\",\n    get: function get() {\n      return this.root ? this.root.data : this.data;\n    }\n  }, {\n    key: \"rootPristine\",\n    get: function get() {\n      return _lodash.default.get(this, 'root.pristine', false);\n    }\n    /**\n     * Get the static value of this component.\n     * @return {*}\n     */\n\n  }, {\n    key: \"dataValue\",\n    get: function get() {\n      if (!this.key || !this.visible && this.component.clearOnHide && !this.rootPristine) {\n        return this.emptyValue;\n      }\n\n      if (!this.hasValue() && this.shouldAddDefaultValue) {\n        var empty = this.component.multiple ? [] : this.emptyValue;\n\n        if (!this.rootPristine) {\n          this.dataValue = empty;\n        }\n\n        return empty;\n      }\n\n      return _lodash.default.get(this._data, this.key);\n    }\n    /**\n     * Sets the static value of this component.\n     *\n     * @param value\n     */\n    ,\n    set: function set(value) {\n      if (!this.allowData || !this.key || !this.visible && this.component.clearOnHide && !this.rootPristine) {\n        return;\n      }\n\n      if (value !== null && value !== undefined) {\n        value = this.hook('setDataValue', value, this.key, this._data);\n      }\n\n      if (value === null || value === undefined) {\n        this.unset();\n        return;\n      }\n\n      _lodash.default.set(this._data, this.key, value);\n\n      return;\n    }\n    /**\n     * Splice a value from the dataValue.\n     *\n     * @param index\n     */\n\n  }, {\n    key: \"splice\",\n    value: function splice(index) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (this.hasValue()) {\n        var dataValue = this.dataValue || [];\n\n        if (_lodash.default.isArray(dataValue) && dataValue.hasOwnProperty(index)) {\n          dataValue.splice(index, 1);\n          this.dataValue = dataValue;\n          this.triggerChange(flags);\n        }\n      }\n    }\n  }, {\n    key: \"unset\",\n    value: function unset() {\n      _lodash.default.unset(this._data, this.key);\n    }\n    /**\n     * Deletes the value of the component.\n     */\n\n  }, {\n    key: \"deleteValue\",\n    value: function deleteValue() {\n      this.setValue(null, {\n        noUpdateEvent: true,\n        noDefault: true\n      });\n      this.unset();\n    }\n  }, {\n    key: \"getCustomDefaultValue\",\n    value: function getCustomDefaultValue(defaultValue) {\n      if (this.component.customDefaultValue && !this.options.preview) {\n        defaultValue = this.evaluate(this.component.customDefaultValue, {\n          value: ''\n        }, 'value');\n      }\n\n      return defaultValue;\n    }\n  }, {\n    key: \"shouldAddDefaultValue\",\n    get: function get() {\n      return !this.options.noDefaults || this.component.defaultValue && !this.isEmpty(this.component.defaultValue) || this.component.customDefaultValue;\n    }\n  }, {\n    key: \"defaultValue\",\n    get: function get() {\n      var _this16 = this;\n\n      var defaultValue = this.emptyValue;\n\n      if (this.component.defaultValue) {\n        defaultValue = this.component.defaultValue;\n      }\n\n      defaultValue = this.getCustomDefaultValue(defaultValue);\n\n      var checkMask = function checkMask(value) {\n        if (typeof value === 'string') {\n          var placeholderChar = _this16.placeholderChar;\n          value = (0, _vanillaTextMask.conformToMask)(value, _this16.defaultMask, {\n            placeholderChar: placeholderChar\n          }).conformedValue;\n\n          if (!FormioUtils.matchInputMask(value, _this16.defaultMask)) {\n            value = '';\n          }\n        } else {\n          value = '';\n        }\n\n        return value;\n      };\n\n      if (this.defaultMask) {\n        if (Array.isArray(defaultValue)) {\n          defaultValue = defaultValue.map(checkMask);\n        } else {\n          defaultValue = checkMask(defaultValue);\n        }\n      } // Clone so that it creates a new instance.\n\n\n      return _lodash.default.cloneDeep(defaultValue);\n    }\n    /**\n     * Get the input value of this component.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      if (!this.hasInput || this.viewOnly || !this.refs.input || !this.refs.input.length) {\n        return this.dataValue;\n      }\n\n      var values = [];\n\n      for (var i in this.refs.input) {\n        if (this.refs.input.hasOwnProperty(i)) {\n          if (!this.component.multiple) {\n            return this.getValueAt(i);\n          }\n\n          values.push(this.getValueAt(i));\n        }\n      }\n\n      if (values.length === 0 && !this.component.multiple) {\n        return '';\n      }\n\n      return values;\n    }\n    /**\n     * Get the value at a specific index.\n     *\n     * @param index\n     * @returns {*}\n     */\n\n  }, {\n    key: \"getValueAt\",\n    value: function getValueAt(index) {\n      var input = this.performInputMapping(this.refs.input[index]);\n      return input ? input.value : undefined;\n    }\n    /**\n     * Set the value of this component.\n     *\n     * @param value\n     * @param flags\n     *\n     * @return {boolean} - If the value changed.\n     */\n\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var changed = this.updateValue(value, flags);\n      value = this.dataValue;\n\n      if (!this.hasInput) {\n        return changed;\n      }\n\n      var isArray = Array.isArray(value);\n      var valueInput = this.refs.fileLink || this.refs.input;\n\n      if (isArray && Array.isArray(this.defaultValue) && this.refs.hasOwnProperty('input') && valueInput && valueInput.length !== value.length && this.visible) {\n        this.redraw();\n      }\n\n      if (this.isHtmlRenderMode() && flags && flags.fromSubmission && changed) {\n        this.redraw();\n        return changed;\n      }\n\n      for (var i in this.refs.input) {\n        if (this.refs.input.hasOwnProperty(i)) {\n          this.setValueAt(i, isArray ? value[i] : value, flags);\n        }\n      }\n\n      return changed;\n    }\n    /**\n     * Set the value at a specific index.\n     *\n     * @param index\n     * @param value\n     */\n\n  }, {\n    key: \"setValueAt\",\n    value: function setValueAt(index, value) {\n      var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (!flags.noDefault && (value === null || value === undefined) && !this.component.multiple) {\n        value = this.defaultValue;\n      }\n\n      var input = this.performInputMapping(this.refs.input[index]);\n      var valueMaskInput = this.refs.valueMaskInput;\n\n      if (valueMaskInput !== null && valueMaskInput !== void 0 && valueMaskInput.mask) {\n        valueMaskInput.mask.textMaskInputElement.update(value);\n      }\n\n      if (input.mask) {\n        input.mask.textMaskInputElement.update(value);\n      } else if (input.widget && input.widget.setValue) {\n        input.widget.setValue(value);\n      } else {\n        input.value = value;\n      }\n    }\n  }, {\n    key: \"hasSetValue\",\n    get: function get() {\n      return this.hasValue() && !this.isEmpty(this.dataValue);\n    }\n  }, {\n    key: \"setDefaultValue\",\n    value: function setDefaultValue() {\n      if (this.defaultValue && this.shouldAddDefaultValue) {\n        var defaultValue = this.component.multiple && !this.dataValue.length ? [] : this.defaultValue;\n        this.setValue(defaultValue, {\n          noUpdateEvent: true\n        });\n      }\n    }\n    /**\n     * Restore the value of a control.\n     */\n\n  }, {\n    key: \"restoreValue\",\n    value: function restoreValue() {\n      if (this.hasSetValue) {\n        this.setValue(this.dataValue, {\n          noUpdateEvent: true\n        });\n      } else {\n        this.setDefaultValue();\n      }\n    }\n    /**\n     * Normalize values coming into updateValue.\n     *\n     * @param value\n     * @return {*}\n     */\n\n  }, {\n    key: \"normalizeValue\",\n    value: function normalizeValue(value) {\n      if (this.component.multiple && !Array.isArray(value)) {\n        value = value ? [value] : [];\n      }\n\n      return value;\n    }\n    /**\n     * Update a value of this component.\n     *\n     * @param flags\n     */\n\n  }, {\n    key: \"updateComponentValue\",\n    value: function updateComponentValue(value) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var newValue = !flags.resetValue && (value === undefined || value === null) ? this.getValue() : value;\n      newValue = this.normalizeValue(newValue, flags);\n      var oldValue = this.dataValue;\n      var changed = newValue !== undefined ? this.hasChanged(newValue, oldValue) : false;\n\n      if (changed) {\n        this.dataValue = newValue;\n        changed = this.dataValue !== oldValue;\n        this.updateOnChange(flags, changed);\n      }\n\n      if (this.componentModal && flags && flags.fromSubmission) {\n        this.componentModal.setValue(value);\n      }\n\n      return changed;\n    }\n    /**\n     * Updates the value of this component plus all sub-components.\n     *\n     * @param args\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"updateValue\",\n    value: function updateValue() {\n      return this.updateComponentValue.apply(this, arguments);\n    }\n  }, {\n    key: \"getIcon\",\n    value: function getIcon(name, content, styles) {\n      var ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'icon';\n      return this.renderTemplate('icon', {\n        className: this.iconClass(name),\n        ref: ref,\n        styles: styles,\n        content: content\n      });\n    }\n    /**\n     * Resets the value of this component.\n     */\n\n  }, {\n    key: \"resetValue\",\n    value: function resetValue() {\n      this.unset();\n      this.setValue(this.emptyValue, {\n        noUpdateEvent: true,\n        noValidate: true,\n        resetValue: true\n      });\n    }\n    /**\n     * Determine if the value of this component has changed.\n     *\n     * @param newValue\n     * @param oldValue\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"hasChanged\",\n    value: function hasChanged(newValue, oldValue) {\n      if ((newValue === undefined || newValue === null) && (oldValue === undefined || oldValue === null || this.isEmpty(oldValue))) {\n        return false;\n      } // If we do not have a value and are getting set to anything other than undefined or null, then we changed.\n\n\n      if (newValue !== undefined && newValue !== null && this.allowData && !this.hasValue()) {\n        return true;\n      }\n\n      return !_lodash.default.isEqual(newValue, oldValue);\n    }\n    /**\n     * Update the value on change.\n     *\n     * @param flags\n     */\n\n  }, {\n    key: \"updateOnChange\",\n    value: function updateOnChange() {\n      var flags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var changed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!flags.noUpdateEvent && changed) {\n        this.triggerChange(flags);\n        return true;\n      }\n\n      return false;\n    }\n    /**\n     * Perform a calculated value operation.\n     *\n     * @param data - The global data object.\n     *\n     * @return {boolean} - If the value changed during calculation.\n     */\n\n  }, {\n    key: \"convertNumberOrBoolToString\",\n    value: function convertNumberOrBoolToString(value) {\n      if (typeof value === 'number' || typeof value === 'boolean') {\n        return value.toString();\n      }\n\n      return value;\n    }\n  }, {\n    key: \"doValueCalculation\",\n    value: function doValueCalculation(dataValue, data, row) {\n      return this.evaluate(this.component.calculateValue, {\n        value: dataValue,\n        data: data,\n        row: row || this.data\n      }, 'value');\n    }\n    /* eslint-disable max-statements */\n\n  }, {\n    key: \"calculateComponentValue\",\n    value: function calculateComponentValue(data, flags, row) {\n      // If no calculated value or\n      // hidden and set to clearOnHide (Don't calculate a value for a hidden field set to clear when hidden)\n      var clearOnHide = this.component.clearOnHide;\n      var shouldBeCleared = !this.visible && clearOnHide;\n\n      var allowOverride = _lodash.default.get(this.component, 'allowCalculateOverride', false); // Handle all cases when calculated values should not fire.\n\n\n      if (this.options.readOnly && !this.options.pdf || !(this.component.calculateValue || this.component.calculateValueVariable) || shouldBeCleared || this.options.server && !this.component.calculateServer || flags.dataSourceInitialLoading && allowOverride) {\n        return false;\n      }\n\n      var dataValue = this.dataValue; // Calculate the new value.\n\n      var calculatedValue = this.doValueCalculation(dataValue, data, row, flags);\n\n      if (_lodash.default.isNil(calculatedValue)) {\n        calculatedValue = this.emptyValue;\n      }\n\n      var changed = !_lodash.default.isEqual(dataValue, calculatedValue); // Do not override calculations on server if they have calculateServer set.\n\n      if (allowOverride) {\n        // The value is considered locked if it is not empty and comes from a submission value.\n        var fromSubmission = flags.fromSubmission && this.component.persistent === true;\n\n        if (this.isEmpty(dataValue)) {\n          // Reset the calculation lock if ever the data is cleared.\n          this.calculationLocked = false;\n        } else if (this.calculationLocked || fromSubmission) {\n          this.calculationLocked = true;\n          return false;\n        }\n\n        var firstPass = this.calculatedValue === undefined;\n\n        if (firstPass) {\n          this.calculatedValue = null;\n        }\n\n        var newCalculatedValue = this.normalizeValue(this.convertNumberOrBoolToString(calculatedValue));\n        var previousCalculatedValue = this.normalizeValue(this.convertNumberOrBoolToString(this.calculatedValue));\n        var normalizedDataValue = this.normalizeValue(this.convertNumberOrBoolToString(dataValue));\n        var calculationChanged = !_lodash.default.isEqual(previousCalculatedValue, newCalculatedValue);\n        var previousChanged = !_lodash.default.isEqual(normalizedDataValue, previousCalculatedValue);\n\n        if (calculationChanged && previousChanged && !firstPass) {\n          return false;\n        } // Check to ensure that the calculated value is different than the previously calculated value.\n\n\n        if (previousCalculatedValue && previousChanged && !calculationChanged) {\n          return false;\n        }\n\n        if (flags.isReordered || !calculationChanged) {\n          return false;\n        }\n\n        if (fromSubmission) {\n          // If we set value from submission and it differs from calculated one, set the calculated value to prevent overriding dataValue in the next pass\n          this.calculatedValue = calculatedValue;\n          return false;\n        } // If this is the firstPass, and the dataValue is different than to the calculatedValue.\n\n\n        if (firstPass && !this.isEmpty(dataValue) && changed && calculationChanged) {\n          // Return that we have a change so it will perform another pass.\n          return true;\n        }\n      }\n\n      this.calculatedValue = calculatedValue;\n\n      if (changed) {\n        if (!flags.noPristineChangeOnModified) {\n          this.pristine = false;\n        }\n\n        flags.triggeredComponentId = this.id;\n        return this.setValue(calculatedValue, flags);\n      }\n\n      return false;\n    }\n    /* eslint-enable max-statements */\n\n    /**\n     * Performs calculations in this component plus any child components.\n     *\n     * @param args\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"calculateValue\",\n    value: function calculateValue(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data;\n      return this.calculateComponentValue(data, flags, row);\n    }\n    /**\n     * Get this component's label text.\n     *\n     */\n\n  }, {\n    key: \"label\",\n    get: function get() {\n      return this.component.label;\n    }\n    /**\n     * Set this component's label text and render it.\n     *\n     * @param value - The new label text.\n     */\n    ,\n    set: function set(value) {\n      this.component.label = value;\n\n      if (this.labelElement) {\n        this.labelElement.innerText = value;\n      }\n    }\n    /**\n     * Get FormioForm element at the root of this component tree.\n     *\n     */\n\n  }, {\n    key: \"getRoot\",\n    value: function getRoot() {\n      return this.root;\n    }\n    /**\n     * Returns the invalid message, or empty string if the component is valid.\n     *\n     * @param data\n     * @param dirty\n     * @return {*}\n     */\n\n  }, {\n    key: \"invalidMessage\",\n    value: function invalidMessage(data, dirty, ignoreCondition, row) {\n      if (!ignoreCondition && !this.checkCondition(row, data)) {\n        return '';\n      } // See if this is forced invalid.\n\n\n      if (this.invalid) {\n        return this.invalid;\n      } // No need to check for errors if there is no input or if it is pristine.\n\n\n      if (!this.hasInput || !dirty && this.pristine) {\n        return '';\n      }\n\n      return _lodash.default.map(_Validator.default.checkComponent(this, data), 'message').join('\\n\\n');\n    }\n    /**\n     * Returns if the component is valid or not.\n     *\n     * @param data\n     * @param dirty\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"isValid\",\n    value: function isValid(data, dirty) {\n      return !this.invalidMessage(data, dirty);\n    }\n  }, {\n    key: \"setComponentValidity\",\n    value: function setComponentValidity(messages, dirty, silentCheck) {\n      var hasErrors = !!messages.filter(function (message) {\n        return message.level === 'error' && !message.fromServer;\n      }).length;\n\n      if (messages.length && (!silentCheck || this.error) && (!this.isEmpty(this.defaultValue) || dirty || !this.pristine)) {\n        this.setCustomValidity(messages, dirty);\n      } else if (!silentCheck) {\n        this.setCustomValidity('');\n      }\n\n      return !hasErrors;\n    }\n    /**\n     * Checks the validity of this component and sets the error message if it is invalid.\n     *\n     * @param data\n     * @param dirty\n     * @param row\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"checkComponentValidity\",\n    value: function checkComponentValidity(data, dirty, row) {\n      var _this$serverErrors,\n          _this17 = this;\n\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      data = data || this.rootValue;\n      row = row || this.data;\n      var _options$async = options.async,\n          async = _options$async === void 0 ? false : _options$async,\n          _options$silentCheck = options.silentCheck,\n          silentCheck = _options$silentCheck === void 0 ? false : _options$silentCheck;\n\n      if (this.shouldSkipValidation(data, dirty, row)) {\n        this.setCustomValidity('');\n        return async ? _nativePromiseOnly.default.resolve(true) : true;\n      }\n\n      var check = _Validator.default.checkComponent(this, data, row, true, async);\n\n      var validations = check;\n\n      if ((_this$serverErrors = this.serverErrors) !== null && _this$serverErrors !== void 0 && _this$serverErrors.length) {\n        validations = check.concat(this.serverErrors);\n      }\n\n      return async ? validations.then(function (messages) {\n        return _this17.setComponentValidity(messages, dirty, silentCheck);\n      }) : this.setComponentValidity(validations, dirty, silentCheck);\n    }\n  }, {\n    key: \"checkValidity\",\n    value: function checkValidity(data, dirty, row, silentCheck) {\n      data = data || this.rootValue;\n      row = row || this.data;\n      var isValid = this.checkComponentValidity(data, dirty, row, {\n        silentCheck: silentCheck\n      });\n      this.checkModal();\n      return isValid;\n    }\n  }, {\n    key: \"checkAsyncValidity\",\n    value: function checkAsyncValidity(data, dirty, row, silentCheck) {\n      return _nativePromiseOnly.default.resolve(this.checkComponentValidity(data, dirty, row, {\n        async: true,\n        silentCheck: silentCheck\n      }));\n    }\n    /**\n     * Check the conditions, calculations, and validity of a single component and triggers an update if\n     * something changed.\n     *\n     * @param data - The root data of the change event.\n     * @param flags - The flags from this change event.\n     *\n     * @return boolean - If component is valid or not.\n     */\n\n  }, {\n    key: \"checkData\",\n    value: function checkData(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data; // Needs for Nextgen Rules Engine\n\n      this.resetCaches(); // Do not trigger refresh if change was triggered on blur event since components with Refresh on Blur have their own listeners\n\n      if (!flags.fromBlur) {\n        this.checkRefreshOn(flags.changes, flags);\n      }\n\n      if (flags.noCheck) {\n        return true;\n      }\n\n      this.checkComponentConditions(data, flags, row);\n\n      if (this.id !== flags.triggeredComponentId) {\n        this.calculateComponentValue(data, flags, row);\n      }\n\n      if (flags.noValidate && !flags.validateOnInit && !flags.fromIframe) {\n        if (flags.fromSubmission && this.rootPristine && this.pristine && this.error && flags.changed) {\n          this.checkComponentValidity(data, !!this.options.alwaysDirty, row, true);\n        }\n\n        return true;\n      }\n\n      var isDirty = false; // We need to set dirty if they explicitly set noValidate to false.\n\n      if (this.options.alwaysDirty || flags.dirty) {\n        isDirty = true;\n      } // See if they explicitely set the values with setSubmission.\n\n\n      if (flags.fromSubmission && this.hasValue(data)) {\n        isDirty = true;\n      }\n\n      this.setDirty(isDirty);\n\n      if (this.component.validateOn === 'blur' && flags.fromSubmission) {\n        return true;\n      }\n\n      var isValid = this.checkComponentValidity(data, isDirty, row, flags);\n      this.checkModal();\n      return isValid;\n    }\n  }, {\n    key: \"checkModal\",\n    value: function checkModal() {\n      var isValid = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var dirty = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!this.component.modalEdit || !this.componentModal) {\n        return;\n      }\n\n      if (dirty && !isValid) {\n        this.setErrorClasses([this.refs.openModal], dirty, !isValid, !!this.errors.length, this.refs.openModalWrapper);\n      } else {\n        this.clearErrorClasses(this.refs.openModalWrapper);\n      }\n    }\n  }, {\n    key: \"validationValue\",\n    get: function get() {\n      return this.dataValue;\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.dataValue;\n      var isEmptyArray = _lodash.default.isArray(value) && value.length === 1 ? _lodash.default.isEqual(value[0], this.emptyValue) : false;\n      return value == null || value.length === 0 || _lodash.default.isEqual(value, this.emptyValue) || isEmptyArray;\n    }\n  }, {\n    key: \"isEqual\",\n    value: function isEqual(valueA) {\n      var valueB = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.dataValue;\n      return this.isEmpty(valueA) && this.isEmpty(valueB) || _lodash.default.isEqual(valueA, valueB);\n    }\n    /**\n     * Check if a component is eligible for multiple validation\n     *\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"validateMultiple\",\n    value: function validateMultiple() {\n      return true;\n    }\n  }, {\n    key: \"errors\",\n    get: function get() {\n      return this.error ? [this.error] : [];\n    }\n  }, {\n    key: \"clearErrorClasses\",\n    value: function clearErrorClasses() {\n      var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.element;\n      this.removeClass(element, this.options.componentErrorClass);\n      this.removeClass(element, 'alert alert-danger');\n      this.removeClass(element, 'has-error');\n      this.removeClass(element, 'has-message');\n    }\n  }, {\n    key: \"setInputWidgetErrorClasses\",\n    value: function setInputWidgetErrorClasses(inputRefs, hasErrors) {\n      if (!this.isInputComponent || !this.component.widget || !(inputRefs !== null && inputRefs !== void 0 && inputRefs.length)) {\n        return;\n      }\n\n      inputRefs.forEach(function (input) {\n        if (input !== null && input !== void 0 && input.widget && input.widget.setErrorClasses) {\n          input.widget.setErrorClasses(hasErrors);\n        }\n      });\n    }\n  }, {\n    key: \"setCustomValidity\",\n    value: function setCustomValidity(messages, dirty, external) {\n      var _this18 = this;\n\n      var inputRefs = this.isInputComponent ? this.refs.input || [] : null;\n\n      if (typeof messages === 'string' && messages) {\n        messages = {\n          level: 'error',\n          message: messages\n        };\n      }\n\n      if (!Array.isArray(messages)) {\n        if (messages) {\n          messages = [messages];\n        } else {\n          messages = [];\n        }\n      }\n\n      var hasErrors = !!messages.filter(function (message) {\n        return message.level === 'error';\n      }).length;\n      var invalidInputRefs = inputRefs;\n\n      if (this.component.multiple) {\n        var inputRefsArray = Array.from(inputRefs);\n        inputRefsArray.forEach(function (input) {\n          _this18.setElementInvalid(_this18.performInputMapping(input), false);\n        });\n        this.setInputWidgetErrorClasses(inputRefsArray, false);\n        invalidInputRefs = inputRefsArray.filter(function (ref) {\n          var _messages$some, _messages;\n\n          return (_messages$some = (_messages = messages).some) === null || _messages$some === void 0 ? void 0 : _messages$some.call(_messages, function (msg) {\n            var _msg$context;\n\n            return (msg === null || msg === void 0 ? void 0 : (_msg$context = msg.context) === null || _msg$context === void 0 ? void 0 : _msg$context.input) === ref;\n          });\n        });\n      }\n\n      if (messages.length) {\n        if (this.refs.messageContainer) {\n          this.empty(this.refs.messageContainer);\n        }\n\n        this.error = {\n          component: this.component,\n          message: messages[0].message,\n          messages: messages,\n          external: !!external\n        };\n        this.emit('componentError', this.error);\n        this.addMessages(messages, dirty, invalidInputRefs);\n\n        if (invalidInputRefs) {\n          this.setErrorClasses(invalidInputRefs, dirty, hasErrors, !!messages.length);\n        }\n      } else if (!this.error || this.error && this.error.external === !!external) {\n        if (this.refs.messageContainer) {\n          this.empty(this.refs.messageContainer);\n        }\n\n        if (this.refs.modalMessageContainer) {\n          this.empty(this.refs.modalMessageContainer);\n        }\n\n        this.error = null;\n\n        if (invalidInputRefs) {\n          this.setErrorClasses(invalidInputRefs, dirty, hasErrors, !!messages.length);\n        }\n\n        this.clearErrorClasses();\n      } // if (!this.refs.input) {\n      //   return;\n      // }\n      // this.refs.input.forEach(input => {\n      //   input = this.performInputMapping(input);\n      //   if (typeof input.setCustomValidity === 'function') {\n      //     input.setCustomValidity(message, dirty);\n      //   }\n      // });\n\n    }\n    /**\n     * Determines if the value of this component is hidden from the user as if it is coming from the server, but is\n     * protected.\n     *\n     * @return {boolean|*}\n     */\n\n  }, {\n    key: \"isValueHidden\",\n    value: function isValueHidden() {\n      if (this.component.protected && this.root.editing) {\n        return false;\n      }\n\n      if (!this.root || !this.root.hasOwnProperty('editing')) {\n        return false;\n      }\n\n      if (!this.root || !this.root.editing) {\n        return false;\n      }\n\n      return this.component.protected || !this.component.persistent || this.component.persistent === 'client-only';\n    }\n  }, {\n    key: \"shouldSkipValidation\",\n    value: function shouldSkipValidation(data, dirty, row) {\n      var _this19 = this;\n\n      var rules = [// Force valid if component is read-only\n      function () {\n        return _this19.options.readOnly;\n      }, // Do not check validations if component is not an input component.\n      function () {\n        return !_this19.hasInput;\n      }, // Check to see if we are editing and if so, check component persistence.\n      function () {\n        return _this19.isValueHidden();\n      }, // Force valid if component is hidden.\n      function () {\n        return !_this19.visible;\n      }, // Force valid if component is conditionally hidden.\n      function () {\n        return !_this19.checkCondition(row, data);\n      }];\n      return rules.some(function (pred) {\n        return pred();\n      });\n    } // Maintain reverse compatibility.\n\n  }, {\n    key: \"whenReady\",\n    value: function whenReady() {\n      console.warn('The whenReady() method has been deprecated. Please use the dataReady property instead.');\n      return this.dataReady;\n    }\n  }, {\n    key: \"dataReady\",\n    get: function get() {\n      return _nativePromiseOnly.default.resolve();\n    }\n    /**\n     * Prints out the value of this component as a string value.\n     */\n\n  }, {\n    key: \"asString\",\n    value: function asString(value) {\n      value = value || this.getValue();\n      return (Array.isArray(value) ? value : [value]).map(_lodash.default.toString).join(', ');\n    }\n    /**\n     * Return if the component is disabled.\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"disabled\",\n    get: function get() {\n      return this._disabled || this.parentDisabled;\n    }\n    /**\n     * Disable this component.\n     *\n     * @param {boolean} disabled\n     */\n    ,\n    set: function set(disabled) {\n      this._disabled = disabled;\n    }\n  }, {\n    key: \"setDisabled\",\n    value: function setDisabled(element, disabled) {\n      if (!element) {\n        return;\n      }\n\n      element.disabled = disabled;\n\n      if (disabled) {\n        element.setAttribute('disabled', 'disabled');\n      } else {\n        element.removeAttribute('disabled');\n      }\n    }\n  }, {\n    key: \"setLoading\",\n    value: function setLoading(element, loading) {\n      if (!element || element.loading === loading) {\n        return;\n      }\n\n      element.loading = loading;\n\n      if (!element.loader && loading) {\n        element.loader = this.ce('i', {\n          class: \"\".concat(this.iconClass('refresh', true), \" button-icon-right\")\n        });\n      }\n\n      if (element.loader) {\n        if (loading) {\n          this.appendTo(element.loader, element);\n        } else {\n          this.removeChildFrom(element.loader, element);\n        }\n      }\n    }\n  }, {\n    key: \"selectOptions\",\n    value: function selectOptions(select, tag, options, defaultValue) {\n      var _this20 = this;\n\n      _lodash.default.each(options, function (option) {\n        var attrs = {\n          value: option.value\n        };\n\n        if (defaultValue !== undefined && option.value === defaultValue) {\n          attrs.selected = 'selected';\n        }\n\n        var optionElement = _this20.ce('option', attrs);\n\n        optionElement.appendChild(_this20.text(option.label));\n        select.appendChild(optionElement);\n      });\n    }\n  }, {\n    key: \"setSelectValue\",\n    value: function setSelectValue(select, value) {\n      var options = select.querySelectorAll('option');\n\n      _lodash.default.each(options, function (option) {\n        if (option.value === value) {\n          option.setAttribute('selected', 'selected');\n        } else {\n          option.removeAttribute('selected');\n        }\n      });\n\n      if (select.onchange) {\n        select.onchange();\n      }\n\n      if (select.onselect) {\n        select.onselect();\n      }\n    }\n  }, {\n    key: \"getRelativePath\",\n    value: function getRelativePath(path) {\n      var keyPart = \".\".concat(this.key);\n      var thisPath = this.isInputComponent ? this.path : this.path.slice(0).replace(keyPart, '');\n      return path.replace(thisPath, '');\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.detach();\n      this.empty(this.getElement());\n    }\n  }, {\n    key: \"append\",\n    value: function append(element) {\n      this.appendTo(element, this.element);\n    }\n  }, {\n    key: \"prepend\",\n    value: function prepend(element) {\n      this.prependTo(element, this.element);\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(element) {\n      this.removeChildFrom(element, this.element);\n    }\n  }, {\n    key: \"detachLogic\",\n    value: function detachLogic() {\n      var _this21 = this;\n\n      this.logic.forEach(function (logic) {\n        if (logic.trigger.type === 'event') {\n          var event = _this21.interpolate(logic.trigger.event);\n\n          _this21.off(event); // only applies to callbacks on this component\n\n        }\n      });\n    }\n  }, {\n    key: \"attachLogic\",\n    value: function attachLogic() {\n      var _this22 = this;\n\n      // Do not attach logic during builder mode.\n      if (this.builderMode) {\n        return;\n      }\n\n      this.logic.forEach(function (logic) {\n        if (logic.trigger.type === 'event') {\n          var event = _this22.interpolate(logic.trigger.event);\n\n          _this22.on(event, function () {\n            var newComponent = (0, FormioUtils.fastCloneDeep)(_this22.originalComponent);\n\n            for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n              args[_key4] = arguments[_key4];\n            }\n\n            if (_this22.applyActions(newComponent, logic.actions, args)) {\n              // If component definition changed, replace it.\n              if (!_lodash.default.isEqual(_this22.component, newComponent)) {\n                _this22.component = newComponent;\n\n                var visible = _this22.conditionallyVisible(null, null);\n\n                var disabled = _this22.shouldDisabled; // Change states which won't be recalculated during redrawing\n\n                if (_this22.visible !== visible) {\n                  _this22.visible = visible;\n                }\n\n                if (_this22.disabled !== disabled) {\n                  _this22.disabled = disabled;\n                }\n\n                _this22.redraw();\n              }\n            }\n          }, true);\n        }\n      });\n    }\n    /**\n     * Get the element information.\n     */\n\n  }, {\n    key: \"elementInfo\",\n    value: function elementInfo() {\n      var attributes = {\n        name: this.options.name,\n        type: this.component.inputType || 'text',\n        class: 'form-control',\n        lang: this.options.language\n      };\n\n      if (this.component.placeholder) {\n        attributes.placeholder = this.t(this.component.placeholder, {\n          _userInput: true\n        });\n      }\n\n      if (this.component.tabindex) {\n        attributes.tabindex = this.component.tabindex;\n      }\n\n      if (this.disabled) {\n        attributes.disabled = 'disabled';\n      }\n\n      _lodash.default.defaults(attributes, this.component.attributes);\n\n      return {\n        type: 'input',\n        component: this.component,\n        changeEvent: 'change',\n        attr: attributes\n      };\n    }\n  }, {\n    key: \"autofocus\",\n    value: function autofocus() {\n      var _this23 = this;\n\n      var hasAutofocus = this.component.autofocus && !this.builderMode && !this.options.preview;\n\n      if (hasAutofocus) {\n        this.on('render', function () {\n          return _this23.focus();\n        }, true);\n      }\n    }\n  }, {\n    key: \"scrollIntoView\",\n    value: function scrollIntoView() {\n      var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.element;\n\n      if (!element) {\n        return;\n      }\n\n      var _element$getBoundingC = element.getBoundingClientRect(),\n          left = _element$getBoundingC.left,\n          top = _element$getBoundingC.top;\n\n      window.scrollTo(left + window.scrollX, top + window.scrollY);\n    }\n  }, {\n    key: \"focus\",\n    value: function focus(index) {\n      var _this$refs$input2;\n\n      if ('beforeFocus' in this.parent) {\n        this.parent.beforeFocus(this);\n      }\n\n      if ((_this$refs$input2 = this.refs.input) !== null && _this$refs$input2 !== void 0 && _this$refs$input2.length) {\n        var _this$component$widge;\n\n        var focusingInput = typeof index === 'number' && this.refs.input[index] ? this.refs.input[index] : this.refs.input[this.refs.input.length - 1];\n\n        if (((_this$component$widge = this.component.widget) === null || _this$component$widge === void 0 ? void 0 : _this$component$widge.type) === 'calendar') {\n          var sibling = focusingInput.nextSibling;\n\n          if (sibling) {\n            sibling.focus();\n          }\n        } else {\n          focusingInput.focus();\n        }\n      }\n\n      if (this.refs.openModal) {\n        this.refs.openModal.focus();\n      }\n\n      if (this.parent.refs.openModal) {\n        this.parent.refs.openModal.focus();\n      }\n    }\n    /**\n     * Get `Formio` instance for working with files\n     */\n\n  }, {\n    key: \"fileService\",\n    get: function get() {\n      if (this.options.fileService) {\n        return this.options.fileService;\n      }\n\n      if (this.options.formio) {\n        return this.options.formio;\n      }\n\n      if (this.root && this.root.formio) {\n        return this.root.formio;\n      }\n\n      var formio = new _Formio.GlobalFormio(); // If a form is loaded, then make sure to set the correct formUrl.\n\n      if (this.root && this.root._form && this.root._form._id) {\n        formio.formUrl = \"\".concat(formio.projectUrl, \"/form/\").concat(this.root._form._id);\n      }\n\n      return formio;\n    }\n  }, {\n    key: \"resetCaches\",\n    value: function resetCaches() {}\n  }, {\n    key: \"previewMode\",\n    get: function get() {\n      return false;\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len5 = arguments.length, sources = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        sources[_key5] = arguments[_key5];\n      }\n\n      return _lodash.default.merge.apply(_lodash.default, [{\n        /**\n         * Determines if this component provides an input.\n         */\n        input: true,\n\n        /**\n         * The data key for this component (how the data is stored in the database).\n         */\n        key: '',\n\n        /**\n         * The input placeholder for this component.\n         */\n        placeholder: '',\n\n        /**\n         * The input prefix\n         */\n        prefix: '',\n\n        /**\n         * The custom CSS class to provide to this component.\n         */\n        customClass: '',\n\n        /**\n         * The input suffix.\n         */\n        suffix: '',\n\n        /**\n         * If this component should allow an array of values to be captured.\n         */\n        multiple: false,\n\n        /**\n         * The default value of this component.\n         */\n        defaultValue: null,\n\n        /**\n         * If the data of this component should be protected (no GET api requests can see the data)\n         */\n        protected: false,\n\n        /**\n         * Validate if the value of this component should be unique within the form.\n         */\n        unique: false,\n\n        /**\n         * If the value of this component should be persisted within the backend api database.\n         */\n        persistent: true,\n\n        /**\n         * Determines if the component should be within the form, but not visible.\n         */\n        hidden: false,\n\n        /**\n         * If the component should be cleared when hidden.\n         */\n        clearOnHide: true,\n\n        /**\n         * This will refresh this component options when this field changes.\n         */\n        refreshOn: '',\n\n        /**\n         * This will redraw the component when this field changes.\n         */\n        redrawOn: '',\n\n        /**\n         * If this component should be included as a column within a submission table.\n         */\n        tableView: false,\n\n        /**\n         * If this component should be rendering in modal.\n         */\n        modalEdit: false,\n\n        /**\n         * The input label provided to this component.\n         */\n        label: '',\n        dataGridLabel: false,\n        labelPosition: 'top',\n        description: '',\n        errorLabel: '',\n        tooltip: '',\n        hideLabel: false,\n        tabindex: '',\n        disabled: false,\n        autofocus: false,\n        dbIndex: false,\n        customDefaultValue: '',\n        calculateValue: '',\n        calculateServer: false,\n        widget: null,\n\n        /**\n         * Attributes that will be assigned to the input elements of this component.\n         */\n        attributes: {},\n\n        /**\n         * This will perform the validation on either \"change\" or \"blur\" of the input element.\n         */\n        validateOn: 'change',\n\n        /**\n         * The validation criteria for this component.\n         */\n        validate: {\n          /**\n           * If this component is required.\n           */\n          required: false,\n\n          /**\n           * Custom JavaScript validation.\n           */\n          custom: '',\n\n          /**\n           * If the custom validation should remain private (only the backend will see it and execute it).\n           */\n          customPrivate: false,\n\n          /**\n           * If this component should implement a strict date validation if the Calendar widget is implemented.\n           */\n          strictDateValidation: false,\n          multiple: false,\n          unique: false\n        },\n\n        /**\n         * The simple conditional settings for a component.\n         */\n        conditional: {\n          show: null,\n          when: null,\n          eq: ''\n        },\n        overlay: {\n          style: '',\n          left: '',\n          top: '',\n          width: '',\n          height: ''\n        },\n        allowCalculateOverride: false,\n        encrypted: false,\n        showCharCount: false,\n        showWordCount: false,\n        properties: {},\n        allowMultipleMasks: false,\n        addons: []\n      }].concat(sources));\n    }\n    /**\n     * Return the validator as part of the component.\n     *\n     * @return {ValidationChecker}\n     * @constructor\n     */\n\n  }, {\n    key: \"Validator\",\n    get: function get() {\n      return _Validator.default;\n    }\n    /**\n     * Provides a table view for this component. Override if you wish to do something different than using getView\n     * method of your instance.\n     *\n     * @param value\n     * @param options\n     */\n\n    /* eslint-disable no-unused-vars */\n\n  }, {\n    key: \"tableView\",\n    value: function tableView(value, options) {}\n  }]);\n\n  return Component;\n}(_Element2.default);\n\nexports.default = Component;\nComponent.externalLibraries = {};\n\nComponent.requireLibrary = function (name, property, src, polling) {\n  if (!Component.externalLibraries.hasOwnProperty(name)) {\n    Component.externalLibraries[name] = {};\n    Component.externalLibraries[name].ready = new _nativePromiseOnly.default(function (resolve, reject) {\n      Component.externalLibraries[name].resolve = resolve;\n      Component.externalLibraries[name].reject = reject;\n    });\n    var callbackName = \"\".concat(name, \"Callback\");\n\n    if (!polling && !window[callbackName]) {\n      window[callbackName] = function () {\n        this.resolve();\n      }.bind(Component.externalLibraries[name]);\n    } // See if the plugin already exists.\n\n\n    var plugin = _lodash.default.get(window, property);\n\n    if (plugin) {\n      Component.externalLibraries[name].resolve(plugin);\n    } else {\n      src = Array.isArray(src) ? src : [src];\n      src.forEach(function (lib) {\n        var attrs = {};\n        var elementType = '';\n\n        if (typeof lib === 'string') {\n          lib = {\n            type: 'script',\n            src: lib\n          };\n        }\n\n        switch (lib.type) {\n          case 'script':\n            elementType = 'script';\n            attrs = {\n              src: lib.src,\n              type: 'text/javascript',\n              defer: true,\n              async: true\n            };\n            break;\n\n          case 'styles':\n            elementType = 'link';\n            attrs = {\n              href: lib.src,\n              rel: 'stylesheet'\n            };\n            break;\n        } // Add the script to the top page.\n\n\n        var script = document.createElement(elementType);\n\n        for (var attr in attrs) {\n          script.setAttribute(attr, attrs[attr]);\n        }\n\n        document.getElementsByTagName('head')[0].appendChild(script);\n      }); // if no callback is provided, then check periodically for the script.\n\n      if (polling) {\n        setTimeout(function checkLibrary() {\n          var plugin = _lodash.default.get(window, property);\n\n          if (plugin) {\n            Component.externalLibraries[name].resolve(plugin);\n          } else {\n            // check again after 200 ms.\n            setTimeout(checkLibrary, 200);\n          }\n        }, 200);\n      }\n    }\n  }\n\n  return Component.externalLibraries[name].ready;\n};\n\nComponent.libraryReady = function (name) {\n  if (Component.externalLibraries.hasOwnProperty(name) && Component.externalLibraries[name].ready) {\n    return Component.externalLibraries[name].ready;\n  }\n\n  return _nativePromiseOnly.default.reject(\"\".concat(name, \" library was not required.\"));\n};"],"mappings":"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"},"metadata":{},"sourceType":"script"}