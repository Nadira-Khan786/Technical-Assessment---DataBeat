{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _immutabilityHelper = _interopRequireDefault(require(\"immutability-helper\"));\nvar _store = _interopRequireDefault(require(\"./stores/store\"));\nvar _formDynamicEdit = _interopRequireDefault(require(\"./form-dynamic-edit\"));\nvar _sortableFormElements = _interopRequireDefault(require(\"./sortable-form-elements\"));\nvar _componentDragLayer = _interopRequireDefault(require(\"./form-elements/component-drag-layer\"));\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar PlaceHolder = _sortableFormElements[\"default\"].PlaceHolder;\nvar Preview = /*#__PURE__*/function (_React$Component) {\n  (0, _inherits2[\"default\"])(Preview, _React$Component);\n  var _super = _createSuper(Preview);\n  function Preview(props) {\n    var _this;\n    (0, _classCallCheck2[\"default\"])(this, Preview);\n    _this = _super.call(this, props);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"state\", {\n      data: [],\n      answer_data: {}\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"editModeOff\", function (e) {\n      if (_this.editForm.current && !_this.editForm.current.contains(e.target)) {\n        _this.manualEditModeOff();\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"manualEditModeOff\", function () {\n      var editElement = _this.props.editElement;\n      if (editElement && editElement.dirty) {\n        editElement.dirty = false;\n        _this.updateElement(editElement);\n      }\n      _this.props.manualEditModeOff();\n    });\n    var onLoad = props.onLoad,\n      onPost = props.onPost;\n    _store[\"default\"].setExternalHandler(onLoad, onPost);\n    _this.editForm = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.state = {\n      data: props.data || [],\n      answer_data: {}\n    };\n    _this.seq = 0;\n    _this._onUpdate = _this._onChange.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.getDataById = _this.getDataById.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.moveCard = _this.moveCard.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.insertCard = _this.insertCard.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.setAsChild = _this.setAsChild.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.removeChild = _this.removeChild.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this._onDestroy = _this._onDestroy.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    return _this;\n  }\n  (0, _createClass2[\"default\"])(Preview, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      var _this$props = this.props,\n        data = _this$props.data,\n        url = _this$props.url,\n        saveUrl = _this$props.saveUrl,\n        saveAlways = _this$props.saveAlways;\n      _store[\"default\"].subscribe(function (state) {\n        return _this2._onUpdate(state.data);\n      });\n      _store[\"default\"].dispatch('load', {\n        loadUrl: url,\n        saveUrl: saveUrl,\n        data: data || [],\n        saveAlways: saveAlways\n      });\n      document.addEventListener('mousedown', this.editModeOff);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('mousedown', this.editModeOff);\n    }\n  }, {\n    key: \"_setValue\",\n    value: function _setValue(text) {\n      return text.replace(/[^A-Z0-9]+/ig, '_').toLowerCase();\n    }\n  }, {\n    key: \"updateElement\",\n    value: function updateElement(element) {\n      var data = this.state.data;\n      var found = false;\n      for (var i = 0, len = data.length; i < len; i++) {\n        if (element.id === data[i].id) {\n          data[i] = element;\n          found = true;\n          break;\n        }\n      }\n      if (found) {\n        this.seq = this.seq > 100000 ? 0 : this.seq + 1;\n        _store[\"default\"].dispatch('updateOrder', data);\n      }\n    }\n  }, {\n    key: \"_onChange\",\n    value: function _onChange(data) {\n      var _this3 = this;\n      var answer_data = {};\n      data.forEach(function (item) {\n        if (item && item.readOnly && _this3.props.variables[item.variableKey]) {\n          answer_data[item.field_name] = _this3.props.variables[item.variableKey];\n        }\n      });\n      this.setState({\n        data: data,\n        answer_data: answer_data\n      });\n    }\n  }, {\n    key: \"_onDestroy\",\n    value: function _onDestroy(item) {\n      var _this4 = this;\n      if (item.childItems) {\n        item.childItems.forEach(function (x) {\n          var child = _this4.getDataById(x);\n          if (child) {\n            _store[\"default\"].dispatch('delete', child);\n          }\n        });\n      }\n      _store[\"default\"].dispatch('delete', item);\n    }\n  }, {\n    key: \"getDataById\",\n    value: function getDataById(id) {\n      var data = this.state.data;\n      return data.find(function (x) {\n        return x && x.id === id;\n      });\n    }\n  }, {\n    key: \"swapChildren\",\n    value: function swapChildren(data, item, child, col) {\n      if (child.col !== undefined && item.id !== child.parentId) {\n        return false;\n      }\n      if (!(child.col !== undefined && child.col !== col && item.childItems[col])) {\n        // No child was assigned yet in both source and target.\n        return false;\n      }\n      var oldId = item.childItems[col];\n      var oldItem = this.getDataById(oldId);\n      var oldCol = child.col; // eslint-disable-next-line no-param-reassign\n\n      item.childItems[oldCol] = oldId;\n      oldItem.col = oldCol; // eslint-disable-next-line no-param-reassign\n\n      item.childItems[col] = child.id;\n      child.col = col;\n      _store[\"default\"].dispatch('updateOrder', data);\n      return true;\n    }\n  }, {\n    key: \"setAsChild\",\n    value: function setAsChild(item, child, col, isBusy) {\n      var data = this.state.data;\n      if (this.swapChildren(data, item, child, col)) {\n        return;\n      }\n      if (isBusy) {\n        return;\n      }\n      var oldParent = this.getDataById(child.parentId);\n      var oldCol = child.col; // eslint-disable-next-line no-param-reassign\n\n      item.childItems[col] = child.id;\n      child.col = col; // eslint-disable-next-line no-param-reassign\n\n      child.parentId = item.id; // eslint-disable-next-line no-param-reassign\n\n      child.parentIndex = data.indexOf(item);\n      if (oldParent) {\n        oldParent.childItems[oldCol] = null;\n      }\n      var list = data.filter(function (x) {\n        return x && x.parentId === item.id;\n      });\n      var toRemove = list.filter(function (x) {\n        return item.childItems.indexOf(x.id) === -1;\n      });\n      var newData = data;\n      if (toRemove.length) {\n        // console.log('toRemove', toRemove);\n        newData = data.filter(function (x) {\n          return toRemove.indexOf(x) === -1;\n        });\n      }\n      if (!this.getDataById(child.id)) {\n        newData.push(child);\n      }\n      _store[\"default\"].dispatch('updateOrder', newData);\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(item, col) {\n      var data = this.state.data;\n      var oldId = item.childItems[col];\n      var oldItem = this.getDataById(oldId);\n      if (oldItem) {\n        var newData = data.filter(function (x) {\n          return x !== oldItem;\n        }); // eslint-disable-next-line no-param-reassign\n\n        item.childItems[col] = null; // delete oldItem.parentId;\n\n        this.seq = this.seq > 100000 ? 0 : this.seq + 1;\n        _store[\"default\"].dispatch('updateOrder', newData);\n        this.setState({\n          data: newData\n        });\n      }\n    }\n  }, {\n    key: \"restoreCard\",\n    value: function restoreCard(item, id) {\n      var data = this.state.data;\n      var parent = this.getDataById(item.data.parentId);\n      var oldItem = this.getDataById(id);\n      if (parent && oldItem) {\n        var newIndex = data.indexOf(oldItem);\n        var newData = (0, _toConsumableArray2[\"default\"])(data); // data.filter(x => x !== oldItem);\n        // eslint-disable-next-line no-param-reassign\n\n        parent.childItems[oldItem.col] = null;\n        delete oldItem.parentId; // eslint-disable-next-line no-param-reassign\n\n        delete item.setAsChild; // eslint-disable-next-line no-param-reassign\n\n        delete item.parentIndex; // eslint-disable-next-line no-param-reassign\n\n        item.index = newIndex;\n        this.seq = this.seq > 100000 ? 0 : this.seq + 1;\n        _store[\"default\"].dispatch('updateOrder', newData);\n        this.setState({\n          data: newData\n        });\n      }\n    }\n  }, {\n    key: \"insertCard\",\n    value: function insertCard(item, hoverIndex, id) {\n      var data = this.state.data;\n      if (id) {\n        this.restoreCard(item, id);\n      } else {\n        data.splice(hoverIndex, 0, item);\n        this.saveData(item, hoverIndex, hoverIndex);\n        _store[\"default\"].dispatch('insertItem', item);\n      }\n    }\n  }, {\n    key: \"moveCard\",\n    value: function moveCard(dragIndex, hoverIndex) {\n      var data = this.state.data;\n      var dragCard = data[dragIndex];\n      this.saveData(dragCard, dragIndex, hoverIndex);\n    } // eslint-disable-next-line no-unused-vars\n  }, {\n    key: \"cardPlaceHolder\",\n    value: function cardPlaceHolder(dragIndex, hoverIndex) {// Dummy\n    }\n  }, {\n    key: \"saveData\",\n    value: function saveData(dragCard, dragIndex, hoverIndex) {\n      var newData = (0, _immutabilityHelper[\"default\"])(this.state, {\n        data: {\n          $splice: [[dragIndex, 1], [hoverIndex, 0, dragCard]]\n        }\n      });\n      this.setState(newData);\n      _store[\"default\"].dispatch('updateOrder', newData.data);\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement(item, index) {\n      if (item.custom) {\n        if (!item.component || typeof item.component !== 'function') {\n          // eslint-disable-next-line no-param-reassign\n          item.component = this.props.registry.get(item.key);\n        }\n      }\n      var SortableFormElement = _sortableFormElements[\"default\"][item.element];\n      if (SortableFormElement === null) {\n        return null;\n      }\n      return /*#__PURE__*/_react[\"default\"].createElement(SortableFormElement, {\n        id: item.id,\n        seq: this.seq,\n        index: index,\n        moveCard: this.moveCard,\n        insertCard: this.insertCard,\n        mutable: false,\n        parent: this.props.parent,\n        editModeOn: this.props.editModeOn,\n        isDraggable: true,\n        key: item.id,\n        sortData: item.id,\n        data: item,\n        getDataById: this.getDataById,\n        setAsChild: this.setAsChild,\n        removeChild: this.removeChild,\n        _onDestroy: this._onDestroy\n      });\n    }\n  }, {\n    key: \"showEditForm\",\n    value: function showEditForm() {\n      var _this5 = this;\n      var handleUpdateElement = function handleUpdateElement(element) {\n        return _this5.updateElement(element);\n      };\n      handleUpdateElement.bind(this);\n      var formElementEditProps = {\n        showCorrectColumn: this.props.showCorrectColumn,\n        files: this.props.files,\n        manualEditModeOff: this.manualEditModeOff,\n        preview: this,\n        element: this.props.editElement,\n        updateElement: handleUpdateElement\n      };\n      return this.props.renderEditForm(formElementEditProps);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n      var classes = this.props.className;\n      if (this.props.editMode) {\n        classes += ' is-editing';\n      }\n      var data = this.state.data.filter(function (x) {\n        return !!x && !x.parentId;\n      });\n      var items = data.map(function (item, index) {\n        return _this6.getElement(item, index);\n      });\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: classes\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: \"edit-form\",\n        ref: this.editForm\n      }, this.props.editElement !== null && this.showEditForm()), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: \"Sortable\"\n      }, items), /*#__PURE__*/_react[\"default\"].createElement(PlaceHolder, {\n        id: \"form-place-holder\",\n        show: items.length === 0,\n        index: items.length,\n        moveCard: this.cardPlaceHolder,\n        insertCard: this.insertCard\n      }), /*#__PURE__*/_react[\"default\"].createElement(_componentDragLayer[\"default\"], null));\n    }\n  }]);\n  return Preview;\n}(_react[\"default\"].Component);\nexports[\"default\"] = Preview;\nPreview.defaultProps = {\n  showCorrectColumn: false,\n  files: [],\n  editMode: false,\n  editElement: null,\n  className: 'col-md-9 react-form-builder-preview float-left',\n  renderEditForm: function renderEditForm(props) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_formDynamicEdit[\"default\"], props);\n  }\n};","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_toConsumableArray2","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_defineProperty2","_react","_immutabilityHelper","_store","_formDynamicEdit","_sortableFormElements","_componentDragLayer","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","PlaceHolder","Preview","_React$Component","_super","props","_this","data","answer_data","editForm","current","contains","target","manualEditModeOff","editElement","dirty","updateElement","onLoad","onPost","setExternalHandler","createRef","state","seq","_onUpdate","_onChange","bind","getDataById","moveCard","insertCard","setAsChild","removeChild","_onDestroy","key","componentDidMount","_this2","_this$props","url","saveUrl","saveAlways","subscribe","dispatch","loadUrl","document","addEventListener","editModeOff","componentWillUnmount","removeEventListener","_setValue","text","replace","toLowerCase","element","found","i","len","length","id","_this3","forEach","item","readOnly","variables","variableKey","field_name","setState","_this4","childItems","x","child","find","swapChildren","col","undefined","parentId","oldId","oldItem","oldCol","isBusy","oldParent","parentIndex","indexOf","list","filter","toRemove","newData","push","restoreCard","parent","newIndex","index","hoverIndex","splice","saveData","dragIndex","dragCard","cardPlaceHolder","$splice","getElement","custom","component","registry","get","SortableFormElement","createElement","mutable","editModeOn","isDraggable","sortData","showEditForm","_this5","handleUpdateElement","formElementEditProps","showCorrectColumn","files","preview","renderEditForm","render","_this6","classes","className","editMode","items","map","ref","show","Component","defaultProps"],"sources":["D:/task/node_modules/react-form-builder2/lib/preview.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _immutabilityHelper = _interopRequireDefault(require(\"immutability-helper\"));\n\nvar _store = _interopRequireDefault(require(\"./stores/store\"));\n\nvar _formDynamicEdit = _interopRequireDefault(require(\"./form-dynamic-edit\"));\n\nvar _sortableFormElements = _interopRequireDefault(require(\"./sortable-form-elements\"));\n\nvar _componentDragLayer = _interopRequireDefault(require(\"./form-elements/component-drag-layer\"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar PlaceHolder = _sortableFormElements[\"default\"].PlaceHolder;\n\nvar Preview = /*#__PURE__*/function (_React$Component) {\n  (0, _inherits2[\"default\"])(Preview, _React$Component);\n\n  var _super = _createSuper(Preview);\n\n  function Preview(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Preview);\n    _this = _super.call(this, props);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"state\", {\n      data: [],\n      answer_data: {}\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"editModeOff\", function (e) {\n      if (_this.editForm.current && !_this.editForm.current.contains(e.target)) {\n        _this.manualEditModeOff();\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"manualEditModeOff\", function () {\n      var editElement = _this.props.editElement;\n\n      if (editElement && editElement.dirty) {\n        editElement.dirty = false;\n\n        _this.updateElement(editElement);\n      }\n\n      _this.props.manualEditModeOff();\n    });\n    var onLoad = props.onLoad,\n        onPost = props.onPost;\n\n    _store[\"default\"].setExternalHandler(onLoad, onPost);\n\n    _this.editForm = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.state = {\n      data: props.data || [],\n      answer_data: {}\n    };\n    _this.seq = 0;\n    _this._onUpdate = _this._onChange.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.getDataById = _this.getDataById.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.moveCard = _this.moveCard.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.insertCard = _this.insertCard.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.setAsChild = _this.setAsChild.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.removeChild = _this.removeChild.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this._onDestroy = _this._onDestroy.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Preview, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          data = _this$props.data,\n          url = _this$props.url,\n          saveUrl = _this$props.saveUrl,\n          saveAlways = _this$props.saveAlways;\n\n      _store[\"default\"].subscribe(function (state) {\n        return _this2._onUpdate(state.data);\n      });\n\n      _store[\"default\"].dispatch('load', {\n        loadUrl: url,\n        saveUrl: saveUrl,\n        data: data || [],\n        saveAlways: saveAlways\n      });\n\n      document.addEventListener('mousedown', this.editModeOff);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('mousedown', this.editModeOff);\n    }\n  }, {\n    key: \"_setValue\",\n    value: function _setValue(text) {\n      return text.replace(/[^A-Z0-9]+/ig, '_').toLowerCase();\n    }\n  }, {\n    key: \"updateElement\",\n    value: function updateElement(element) {\n      var data = this.state.data;\n      var found = false;\n\n      for (var i = 0, len = data.length; i < len; i++) {\n        if (element.id === data[i].id) {\n          data[i] = element;\n          found = true;\n          break;\n        }\n      }\n\n      if (found) {\n        this.seq = this.seq > 100000 ? 0 : this.seq + 1;\n\n        _store[\"default\"].dispatch('updateOrder', data);\n      }\n    }\n  }, {\n    key: \"_onChange\",\n    value: function _onChange(data) {\n      var _this3 = this;\n\n      var answer_data = {};\n      data.forEach(function (item) {\n        if (item && item.readOnly && _this3.props.variables[item.variableKey]) {\n          answer_data[item.field_name] = _this3.props.variables[item.variableKey];\n        }\n      });\n      this.setState({\n        data: data,\n        answer_data: answer_data\n      });\n    }\n  }, {\n    key: \"_onDestroy\",\n    value: function _onDestroy(item) {\n      var _this4 = this;\n\n      if (item.childItems) {\n        item.childItems.forEach(function (x) {\n          var child = _this4.getDataById(x);\n\n          if (child) {\n            _store[\"default\"].dispatch('delete', child);\n          }\n        });\n      }\n\n      _store[\"default\"].dispatch('delete', item);\n    }\n  }, {\n    key: \"getDataById\",\n    value: function getDataById(id) {\n      var data = this.state.data;\n      return data.find(function (x) {\n        return x && x.id === id;\n      });\n    }\n  }, {\n    key: \"swapChildren\",\n    value: function swapChildren(data, item, child, col) {\n      if (child.col !== undefined && item.id !== child.parentId) {\n        return false;\n      }\n\n      if (!(child.col !== undefined && child.col !== col && item.childItems[col])) {\n        // No child was assigned yet in both source and target.\n        return false;\n      }\n\n      var oldId = item.childItems[col];\n      var oldItem = this.getDataById(oldId);\n      var oldCol = child.col; // eslint-disable-next-line no-param-reassign\n\n      item.childItems[oldCol] = oldId;\n      oldItem.col = oldCol; // eslint-disable-next-line no-param-reassign\n\n      item.childItems[col] = child.id;\n      child.col = col;\n\n      _store[\"default\"].dispatch('updateOrder', data);\n\n      return true;\n    }\n  }, {\n    key: \"setAsChild\",\n    value: function setAsChild(item, child, col, isBusy) {\n      var data = this.state.data;\n\n      if (this.swapChildren(data, item, child, col)) {\n        return;\n      }\n\n      if (isBusy) {\n        return;\n      }\n\n      var oldParent = this.getDataById(child.parentId);\n      var oldCol = child.col; // eslint-disable-next-line no-param-reassign\n\n      item.childItems[col] = child.id;\n      child.col = col; // eslint-disable-next-line no-param-reassign\n\n      child.parentId = item.id; // eslint-disable-next-line no-param-reassign\n\n      child.parentIndex = data.indexOf(item);\n\n      if (oldParent) {\n        oldParent.childItems[oldCol] = null;\n      }\n\n      var list = data.filter(function (x) {\n        return x && x.parentId === item.id;\n      });\n      var toRemove = list.filter(function (x) {\n        return item.childItems.indexOf(x.id) === -1;\n      });\n      var newData = data;\n\n      if (toRemove.length) {\n        // console.log('toRemove', toRemove);\n        newData = data.filter(function (x) {\n          return toRemove.indexOf(x) === -1;\n        });\n      }\n\n      if (!this.getDataById(child.id)) {\n        newData.push(child);\n      }\n\n      _store[\"default\"].dispatch('updateOrder', newData);\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(item, col) {\n      var data = this.state.data;\n      var oldId = item.childItems[col];\n      var oldItem = this.getDataById(oldId);\n\n      if (oldItem) {\n        var newData = data.filter(function (x) {\n          return x !== oldItem;\n        }); // eslint-disable-next-line no-param-reassign\n\n        item.childItems[col] = null; // delete oldItem.parentId;\n\n        this.seq = this.seq > 100000 ? 0 : this.seq + 1;\n\n        _store[\"default\"].dispatch('updateOrder', newData);\n\n        this.setState({\n          data: newData\n        });\n      }\n    }\n  }, {\n    key: \"restoreCard\",\n    value: function restoreCard(item, id) {\n      var data = this.state.data;\n      var parent = this.getDataById(item.data.parentId);\n      var oldItem = this.getDataById(id);\n\n      if (parent && oldItem) {\n        var newIndex = data.indexOf(oldItem);\n        var newData = (0, _toConsumableArray2[\"default\"])(data); // data.filter(x => x !== oldItem);\n        // eslint-disable-next-line no-param-reassign\n\n        parent.childItems[oldItem.col] = null;\n        delete oldItem.parentId; // eslint-disable-next-line no-param-reassign\n\n        delete item.setAsChild; // eslint-disable-next-line no-param-reassign\n\n        delete item.parentIndex; // eslint-disable-next-line no-param-reassign\n\n        item.index = newIndex;\n        this.seq = this.seq > 100000 ? 0 : this.seq + 1;\n\n        _store[\"default\"].dispatch('updateOrder', newData);\n\n        this.setState({\n          data: newData\n        });\n      }\n    }\n  }, {\n    key: \"insertCard\",\n    value: function insertCard(item, hoverIndex, id) {\n      var data = this.state.data;\n\n      if (id) {\n        this.restoreCard(item, id);\n      } else {\n        data.splice(hoverIndex, 0, item);\n        this.saveData(item, hoverIndex, hoverIndex);\n\n        _store[\"default\"].dispatch('insertItem', item);\n      }\n    }\n  }, {\n    key: \"moveCard\",\n    value: function moveCard(dragIndex, hoverIndex) {\n      var data = this.state.data;\n      var dragCard = data[dragIndex];\n      this.saveData(dragCard, dragIndex, hoverIndex);\n    } // eslint-disable-next-line no-unused-vars\n\n  }, {\n    key: \"cardPlaceHolder\",\n    value: function cardPlaceHolder(dragIndex, hoverIndex) {// Dummy\n    }\n  }, {\n    key: \"saveData\",\n    value: function saveData(dragCard, dragIndex, hoverIndex) {\n      var newData = (0, _immutabilityHelper[\"default\"])(this.state, {\n        data: {\n          $splice: [[dragIndex, 1], [hoverIndex, 0, dragCard]]\n        }\n      });\n      this.setState(newData);\n\n      _store[\"default\"].dispatch('updateOrder', newData.data);\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement(item, index) {\n      if (item.custom) {\n        if (!item.component || typeof item.component !== 'function') {\n          // eslint-disable-next-line no-param-reassign\n          item.component = this.props.registry.get(item.key);\n        }\n      }\n\n      var SortableFormElement = _sortableFormElements[\"default\"][item.element];\n\n      if (SortableFormElement === null) {\n        return null;\n      }\n\n      return /*#__PURE__*/_react[\"default\"].createElement(SortableFormElement, {\n        id: item.id,\n        seq: this.seq,\n        index: index,\n        moveCard: this.moveCard,\n        insertCard: this.insertCard,\n        mutable: false,\n        parent: this.props.parent,\n        editModeOn: this.props.editModeOn,\n        isDraggable: true,\n        key: item.id,\n        sortData: item.id,\n        data: item,\n        getDataById: this.getDataById,\n        setAsChild: this.setAsChild,\n        removeChild: this.removeChild,\n        _onDestroy: this._onDestroy\n      });\n    }\n  }, {\n    key: \"showEditForm\",\n    value: function showEditForm() {\n      var _this5 = this;\n\n      var handleUpdateElement = function handleUpdateElement(element) {\n        return _this5.updateElement(element);\n      };\n\n      handleUpdateElement.bind(this);\n      var formElementEditProps = {\n        showCorrectColumn: this.props.showCorrectColumn,\n        files: this.props.files,\n        manualEditModeOff: this.manualEditModeOff,\n        preview: this,\n        element: this.props.editElement,\n        updateElement: handleUpdateElement\n      };\n      return this.props.renderEditForm(formElementEditProps);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var classes = this.props.className;\n\n      if (this.props.editMode) {\n        classes += ' is-editing';\n      }\n\n      var data = this.state.data.filter(function (x) {\n        return !!x && !x.parentId;\n      });\n      var items = data.map(function (item, index) {\n        return _this6.getElement(item, index);\n      });\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: classes\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: \"edit-form\",\n        ref: this.editForm\n      }, this.props.editElement !== null && this.showEditForm()), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: \"Sortable\"\n      }, items), /*#__PURE__*/_react[\"default\"].createElement(PlaceHolder, {\n        id: \"form-place-holder\",\n        show: items.length === 0,\n        index: items.length,\n        moveCard: this.cardPlaceHolder,\n        insertCard: this.insertCard\n      }), /*#__PURE__*/_react[\"default\"].createElement(_componentDragLayer[\"default\"], null));\n    }\n  }]);\n  return Preview;\n}(_react[\"default\"].Component);\n\nexports[\"default\"] = Preview;\nPreview.defaultProps = {\n  showCorrectColumn: false,\n  files: [],\n  editMode: false,\n  editElement: null,\n  className: 'col-md-9 react-form-builder-preview float-left',\n  renderEditForm: function renderEditForm(props) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_formDynamicEdit[\"default\"], props);\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"script"}